<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>付録 A MySQL 5.6 のよくある質問</title><link rel="stylesheet" type="text/css" href="mvl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="MySQL 5.6 リファレンスマニュアル"><link rel="up" href="index.html" title="MySQL 5.6 リファレンスマニュアル"><link rel="prev" href="workbench.html" title="第 26 章 MySQL Workbench"><link rel="next" href="error-handling.html" title="付録 B エラー、エラーコード、および一般的な問題">
<script language="javascript" type="text/javascript">
  function addOnload(theFunc)
  {
    var previous = window.onload;
    if (typeof window.onload != 'function')
    {
      window.onload = theFunc;
    }
    else
    {
      window.onload = function()
      {
        previous();
        theFunc();
      }
    }
  }

  addOnload(function()
  {
    var base = new Date(1442918127*1000);
    var now = new Date();
    var diff = ((now-base)/1000)/(24*3600);

    if (diff > 90) {
      var nodes = document.getElementsByClassName('titlepage');
      nodes[0].innerHTML = '<p style="border: 5px #ff0000 solid; padding: 5px; margin 5px">' +
        'This copy of the manual is more than 90 days old. We encourage you to download a ' +
        'new version from <a href="http://dev.mysql.com">dev.mysql.com/doc</a>.</p>' + nodes[0].innerHTML;
    }
  });
</script>
<noscript></noscript>
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">付録 A MySQL 5.6 のよくある質問</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="workbench.html">前</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="error-handling.html">次へ</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="faqs"></a>付録 A MySQL 5.6 のよくある質問</h1></div></div></div><div class="toc"><p><b>目次</b></p><dl class="toc"><dt><span class="section"><a href="faqs.html#faqs-general">A.1 MySQL 5.6 FAQ: 全般</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-storage-engines">A.2 MySQL 5.6 FAQ: ストレージエンジン</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-sql-modes">A.3 MySQL 5.6 FAQ: サーバー SQL モード</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-stored-procs">A.4 MySQL 5.6 FAQ: ストアドプロシージャーおよびストアドファンクション</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-triggers">A.5 MySQL 5.6 FAQ: トリガー</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-views">A.6 MySQL 5.6 FAQ: ビュー</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-information-schema">A.7 MySQL 5.6 FAQ: INFORMATION_SCHEMA</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-migration">A.8 MySQL 5.6 FAQ: 移行</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-security">A.9 MySQL 5.6 FAQ: セキュリティー</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-mysql-cluster">A.10 MySQL 5.6 FAQ: MySQL Cluster</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-cjk">A.11 MySQL 5.6 FAQ: MySQL の中国語、日本語、および韓国語の文字セット</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-connectors-apis">A.12 MySQL 5.6 FAQ: コネクタおよび API</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-replication">A.13 MySQL 5.6 FAQ: レプリケーション</a></span></dt><dt><span class="section"><a href="faqs.html#faqs-thread-pool">A.14 MySQL 5.6 FAQ: MySQL エンタープライズスケーラビリティースレッドプール</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-general"></a>A.1 MySQL 5.6 FAQ: 全般</h2></div></div></div><div class="qandaset"><a name="idm139978995824080"></a><dl><dt>A.1.1. <a href="faqs.html#idm139978995823952">
        本番で使用 (GA) できる MySQL はどのバージョンですか。
      </a></dt><dt>A.1.2. <a href="faqs.html#idm139978995819008">
        開発 (GA ではない) バージョンの状況を教えてください。
      </a></dt><dt>A.1.3. <a href="faqs.html#idm139978995813920">
        MySQL 5.6 ではサブクエリーを実行できますか。
      </a></dt><dt>A.1.4. <a href="faqs.html#idm139978995811600">
        MySQL 5.6 では複数テーブルへの挿入、更新、および削除を実行できますか。
      </a></dt><dt>A.1.5. <a href="faqs.html#idm139978995804448">
        MySQL 5.6 にはクエリーキャッシュはありますか。それはサーバー、インスタンス、またはデータベースで動作しますか。
      </a></dt><dt>A.1.6. <a href="faqs.html#idm139978995801344">
        MySQL 5.6 にはシーケンスはありますか。
      </a></dt><dt>A.1.7. <a href="faqs.html#idm139978995795104">
        MySQL 5.6 には秒の小数部が返される NOW() 関数はありますか。
      </a></dt><dt>A.1.8. <a href="faqs.html#idm139978995790240">
        MySQL 5.6 はマルチコアプロセッサで動作しますか。
      </a></dt><dt>A.1.9. <a href="faqs.html#idm139978995788224">
        mysqld の複数のプロセスが表示されるのはなぜですか。
      </a></dt><dt>A.1.10. <a href="faqs.html#idm139978995784512">
        外部キーでエラーが発生した場合のエラー報告は改善されましたか。MySQL はエラーが発生したカラムおよび参照を報告するようになりましたか。
      </a></dt><dt>A.1.11. <a href="faqs.html#idm139978995781360">
        MySQL 5.6 は ACID トランザクションを実行できますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995823952"></a><a name="idm139978995823824"></a><p><b>A.1.1.</b></p></td><td align="left" valign="top"><p>
        本番で使用 (GA) できる MySQL はどのバージョンですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6、MySQL 5.5、MySQL 5.1、および MySQL 5.0 は、本番での使用がサポートされます。
      </p><p>
        MySQL 5.6 は MySQL 5.6.10 で一般提供 (GA) ステータスとなり、2013 年 2 月 5 日に本番使用のためにリリースされました。
      </p><p>
        MySQL 5.5 は MySQL 5.5.8 で一般提供 (GA) ステータスとなり、2010 年 12 月 3 日に本番使用のためにリリースされました。
      </p><p>
        MySQL 5.1 は MySQL 5.1.30 で一般提供 (GA) ステータスとなり、2008 年 11 月 14 日に本番使用のためにリリースされました。
      </p><p>
        MySQL 5.0 は MySQL 5.0.15 で一般提供 (GA) ステータスとなり、2005 年 10 月 19 日に本番使用のためにリリースされました。MySQL 5.0 のアクティブな開発は終了しました。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995819008"></a><a name="idm139978995818880"></a><p><b>A.1.2.</b></p></td><td align="left" valign="top"><p>
        開発 (GA ではない) バージョンの状況を教えてください。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL は、本番前品質機能を導入してリリース品質に安定化させるマイルストーンリリースモデルに従っています (<a class="ulink" href="http://dev.mysql.com/doc/mysql-development-cycle/en/index.html" target="_top">http://dev.mysql.com/doc/mysql-development-cycle/en/index.html</a> を参照してください)。このプロセスは繰り返され、各リリースが本番前ステータスおよびリリース品質ステータスの間を循環します。特定のリリースのステータスを確認するには、変更ログをチェックしてください。
      </p><p>
        MySQL 5.4 は開発シリーズでした。このシリーズへの作業は終了しました。
      </p><p>
        MySQL 5.7 は、前述のマイルストーンリリース方式を使用して、アクティブに開発されています。
      </p><p>
        MySQL 6.0 は開発シリーズでした。このシリーズへの作業は終了しました。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995813920"></a><a name="idm139978995813792"></a><p><b>A.1.3.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 ではサブクエリーを実行できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。<a class="xref" href="sql-syntax.html#subqueries" title="13.2.10 サブクエリー構文">セクション13.2.10「サブクエリー構文」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995811600"></a><a name="idm139978995811472"></a><p><b>A.1.4.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 では複数テーブルへの挿入、更新、および削除を実行できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。複数テーブルへの更新の実行に必要な構文については、<a class="xref" href="sql-syntax.html#update" title="13.2.11 UPDATE 構文">セクション13.2.11「UPDATE 構文」</a>を参照してください。複数テーブルでの削除の実行に必要な構文については、<a class="xref" href="sql-syntax.html#delete" title="13.2.2 DELETE 構文">セクション13.2.2「DELETE 構文」</a>を参照してください。
      </p><p>
        複数テーブルへの挿入は、<code class="literal">FOR EACH ROW</code> 句の <code class="literal">BEGIN ... END</code> ブロック内に複数の <code class="literal">INSERT</code> ステートメントが含まれているトリガーを使用して実行できます。<a class="xref" href="stored-programs-views.html#triggers" title="20.3 トリガーの使用">セクション20.3「トリガーの使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995804448"></a><a name="idm139978995804320"></a><p><b>A.1.5.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にはクエリーキャッシュはありますか。それはサーバー、インスタンス、またはデータベースで動作しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。クエリーキャッシュはサーバーレベルで動作し、元のクエリー文字列と一致する完全な結果セットがキャッシュされます。まったく同じクエリーが発行された (これは特に Web アプリケーションでよく行われます) 場合、解析または実行を行う必要はありません。結果がキャッシュから直接送信されます。さまざまなチューニングオプションを使用できます。<a class="xref" href="optimization.html#query-cache" title="8.9.3 MySQL クエリーキャッシュ">セクション8.9.3「MySQL クエリーキャッシュ」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995801344"></a><a name="idm139978995801216"></a><p><b>A.1.6.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にはシーケンスはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。ただし、MySQL には <code class="literal">AUTO_INCREMENT</code> システムがあり、MySQL 5.6 のマルチマスターレプリケーションセットアップで挿入を処理することもできます。<code class="literal">auto_increment_increment</code> および <code class="literal">auto_increment_offset</code> システム変数を使用して、各サーバーがほかのサーバーと競合しない自動インクリメント値を生成するように設定できます。<code class="literal">auto_increment_increment</code> にはサーバーの数より大きい値を指定し、各サーバーが一意のオフセットを持つようにします。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995795104"></a><a name="idm139978995794976"></a><p><b>A.1.7.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 には秒の小数部が返される <code class="literal">NOW()</code> 関数はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。これは MySQL のロードマップに<span class="quote">「<span class="quote">ローリング機能</span>」</span>として挙がっています。これは、フラッグシップ機能ではありませんが、開発時間が許すかぎり今後実装されることを意味します。特定の顧客の要求によって、このスケジュールが変更されることがあります。
      </p><p>
        ただし、MySQL では小数部がある時間文字列が解析されます。<a class="xref" href="data-types.html#time" title="11.3.2 TIME 型">セクション11.3.2「TIME 型」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995790240"></a><a name="idm139978995790112"></a><p><b>A.1.8.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 はマルチコアプロセッサで動作しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。MySQL は完全にマルチスレッド化されており、オペレーティングシステムでそれらがサポートされている場合、複数の CPU が使用されます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995788224"></a><a name="idm139978995788096"></a><p><b>A.1.9.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">mysqld</code> の複数のプロセスが表示されるのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        LinuxThreads を使用している場合は、少なくとも 3 つの <span class="command"><strong>mysqld</strong></span> プロセスが実行されていることが表示されます。これらは実際にはスレッドです。LinuxThreads マネージャーのための 1 つのスレッド、接続を処理するための 1 つのスレッド、およびアラームおよびシグナルを処理するための 1 つのスレッドがあります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995784512"></a><a name="idm139978995784384"></a><p><b>A.1.10.</b></p></td><td align="left" valign="top"><p>
        外部キーでエラーが発生した場合のエラー報告は改善されましたか。MySQL はエラーが発生したカラムおよび参照を報告するようになりましたか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">InnoDB</code> の外部キーサポートについては、MySQL の各メジャーバージョンで改善されています。すべてのストレージエンジンに適用される外部キーサポートは、MySQL 6.x にスケジュールされています。これにより、現在のストレージエンジン固有の実装の不備が解決されます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995781360"></a><a name="idm139978995781232"></a><p><b>A.1.11.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 は ACID トランザクションを実行できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。MySQL の現在のすべてのバージョンでトランザクションがサポートされます。<code class="literal">InnoDB</code> ストレージエンジンは、行レベルのロック、マルチバージョン、非ロックの反復可能読み取り、および 4 つのすべての SQL 標準分離レベルを持つ、完全な ACID トランザクションを提供しています。
      </p><p>
        <code class="literal">NDB</code> ストレージエンジンは、<code class="literal">READ COMMITTED</code> トランザクション分離レベルのみをサポートしています。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-storage-engines"></a>A.2 MySQL 5.6 FAQ: ストレージエンジン</h2></div></div></div><div class="qandaset"><a name="idm139978995774352"></a><dl><dt>A.2.1. <a href="faqs.html#idm139978995774224">
        MySQL のストレージエンジンの完全なドキュメントはどこで入手できますか。
      </a></dt><dt>A.2.2. <a href="faqs.html#idm139978995769008">
        MySQL 5.6 に新しいストレージエンジンはありますか。
      </a></dt><dt>A.2.3. <a href="faqs.html#idm139978995762384">
        MySQL 5.6 で削除されたストレージエンジンはありますか。
      </a></dt><dt>A.2.4. <a href="faqs.html#idm139978995760688">
        ARCHIVE ストレージエンジンに固有の利点は何ですか。
      </a></dt><dt>A.2.5. <a href="faqs.html#idm139978995756528">
        MySQL 5.6 の新機能はすべてのストレージエンジンに適用されますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995774224"></a><a name="idm139978995774096"></a><p><b>A.2.1.</b></p></td><td align="left" valign="top"><p>
        MySQL のストレージエンジンの完全なドキュメントはどこで入手できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <a class="xref" href="storage-engines.html" title="第 15 章 代替ストレージエンジン">第15章「<i>代替ストレージエンジン</i>」</a>を参照してください。この章には、MySQL Cluster に使用される <code class="literal">NDB</code> ストレージエンジンを除く、MySQL のすべてのストレージエンジンについての情報が含まれています。<code class="literal">NDB</code> については、<a class="xref" href="mysql-cluster.html" title="第 18 章 MySQL Cluster NDB 7.3 および MySQL Cluster NDB 7.4">第18章「<i>MySQL Cluster NDB 7.3 および MySQL Cluster NDB 7.4</i>」</a>で説明しています。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995769008"></a><a name="idm139978995768880"></a><p><b>A.2.2.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 に新しいストレージエンジンはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.1 ではオプションの <code class="literal">InnoDB Plugin</code> の機能が組み込みの <code class="literal">InnoDB</code> ストレージエンジンに取り込まれたため、Barracuda ファイル形式、<code class="literal">InnoDB</code> テーブルの圧縮、パフォーマンスのための新しい構成オプションなどの機能を活用できます。詳細は、<a class="xref" href="innodb-storage-engine.html" title="第 14 章 InnoDB ストレージエンジン">第14章「<i>InnoDB ストレージエンジン</i>」</a>を参照してください。また、<code class="literal">InnoDB</code> は新しいテーブルのデフォルトのストレージエンジンになりました。詳細は、<a class="xref" href="innodb-storage-engine.html#innodb-default-se" title="14.1.1 デフォルトの MySQL ストレージエンジンとしての InnoDB">セクション14.1.1「デフォルトの MySQL ストレージエンジンとしての InnoDB」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995762384"></a><a name="idm139978995762256"></a><p><b>A.2.3.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 で削除されたストレージエンジンはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995760688"></a><a name="idm139978995760560"></a><p><b>A.2.4.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">ARCHIVE</code> ストレージエンジンに固有の利点は何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">ARCHIVE</code> ストレージエンジンは、インデックスのない大量のデータを格納するのにもっとも適しています。フットプリントが非常に小さく、テーブルスキャンを使用して選択が実行されます。詳細は、<a class="xref" href="storage-engines.html#archive-storage-engine" title="15.5 ARCHIVE ストレージエンジン">セクション15.5「ARCHIVE ストレージエンジン」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995756528"></a><a name="idm139978995756400"></a><p><b>A.2.5.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 の新機能はすべてのストレージエンジンに適用されますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        全般的な新機能 (ビュー、ストアドプロシージャー、トリガー、<code class="literal">INFORMATION_SCHEMA</code>、高精度計算 (<code class="literal">DECIMAL</code> カラム型)、<code class="literal">BIT</code> カラム型など) は、すべてのストレージエンジンに適用されます。特定のストレージエンジンに対する追加および変更も行われています。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-sql-modes"></a>A.3 MySQL 5.6 FAQ: サーバー SQL モード</h2></div></div></div><div class="qandaset"><a name="idm139978995750208"></a><dl><dt>A.3.1. <a href="faqs.html#idm139978995750080">
        サーバー SQL モードとは何ですか。
      </a></dt><dt>A.3.2. <a href="faqs.html#idm139978995747200">
        サーバー SQL モードはいくつありますか。
      </a></dt><dt>A.3.3. <a href="faqs.html#idm139978995744624">
        サーバー SQL モードを判別するにはどうすればよいですか。
      </a></dt><dt>A.3.4. <a href="faqs.html#idm139978995738464">
        モードはデータベースまたは接続に依存していますか。
      </a></dt><dt>A.3.5. <a href="faqs.html#idm139978995734560">
        厳密モードにルールを追加できますか。
      </a></dt><dt>A.3.6. <a href="faqs.html#idm139978995728448">
        厳密モードはパフォーマンスに影響しますか。
      </a></dt><dt>A.3.7. <a href="faqs.html#idm139978995726224">
        MySQL 5.6 をインストールしたときのデフォルトのサーバー SQL モードは何ですか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995750080"></a><a name="idm139978995749952"></a><p><b>A.3.1.</b></p></td><td align="left" valign="top"><p>
        サーバー SQL モードとは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        サーバー SQL モードは、MySQL でサポートされる SQL 構文、および実行されるデータ妥当性チェックの種類を定義します。これにより、MySQL をさまざまな環境で使用したり、MySQL をほかのデータベースサーバーと一緒に使用したりすることが、さらに容易になります。MySQL サーバーは、これらのモードを各クライアントに個別に適用します。詳細は、<a class="xref" href="server-administration.html#sql-mode" title="5.1.7 サーバー SQL モード">セクション5.1.7「サーバー SQL モード」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995747200"></a><a name="idm139978995747072"></a><p><b>A.3.2.</b></p></td><td align="left" valign="top"><p>
        サーバー SQL モードはいくつありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        各モードは、個別にオン/オフを切り替えることができます。使用可能なモードの完全なリストについては、<a class="xref" href="server-administration.html#sql-mode" title="5.1.7 サーバー SQL モード">セクション5.1.7「サーバー SQL モード」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995744624"></a><a name="idm139978995744496"></a><p><b>A.3.3.</b></p></td><td align="left" valign="top"><p>
        サーバー SQL モードを判別するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="option">--sql-mode</code> オプションを使用すると、デフォルトの SQL モード (<span class="command"><strong>mysqld</strong></span> を起動する場合) を設定できます。<code class="literal">SET [GLOBAL|SESSION] sql_mode='<em class="replaceable"><code>modes</code></em>'</code> ステートメントを使用すると、ローカルに接続に対して、またはグローバルに適用されるように、接続内から設定を変更できます。現在のモードを取得するには、<code class="literal">SELECT @@sql_mode</code> ステートメントを発行します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995738464"></a><a name="idm139978995738336"></a><p><b>A.3.4.</b></p></td><td align="left" valign="top"><p>
        モードはデータベースまたは接続に依存していますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        モードは特定のデータベースにリンクされていません。モードは、ローカルにセッション (接続) に対して設定するか、グローバルにサーバーに対して設定できます。これらの設定は、<code class="literal">SET [GLOBAL|SESSION] sql_mode='<em class="replaceable"><code>modes</code></em>'</code> を使用して変更できます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995734560"></a><a name="idm139978995734432"></a><p><b>A.3.5.</b></p></td><td align="left" valign="top"><p>
        厳密モードにルールを追加できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="emphasis"><em>厳密モード</em></span>と呼ぶ場合は、<code class="literal">TRADITIONAL</code>、<code class="literal">STRICT_TRANS_TABLES</code>、または <code class="literal">STRICT_ALL_TABLES</code> モードの少なくとも 1 つが有効にされているモードを意味します。オプションは組み合わせることができるため、モードに制約を追加できます。詳細は、<a class="xref" href="server-administration.html#sql-mode" title="5.1.7 サーバー SQL モード">セクション5.1.7「サーバー SQL モード」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995728448"></a><a name="idm139978995728320"></a><p><b>A.3.6.</b></p></td><td align="left" valign="top"><p>
        厳密モードはパフォーマンスに影響しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        一部の設定での入力データの厳密な検証では、検証を行わない場合より時間がかかります。パフォーマンスへの影響はそれほど大きくありませんが、そのような検証が必要ない場合 (アプリケーションでそのすべてをすでに処理している場合)、MySQL には厳密モードを無効にするオプションがあります。ただし、必要な場合は、厳密モードでそのような検証を行うことができます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995726224"></a><a name="idm139978995726096"></a><p><b>A.3.7.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 をインストールしたときのデフォルトのサーバー SQL モードは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6.6 の時点では、デフォルトの SQL モードは <code class="literal">NO_ENGINE_SUBSTITUTION</code> です。5.6.6 より前は、デフォルトのモードは空でした (どのモードも有効にされません)。使用可能なすべてのモードおよび MySQL のデフォルトの動作については、<a class="xref" href="server-administration.html#sql-mode" title="5.1.7 サーバー SQL モード">セクション5.1.7「サーバー SQL モード」</a>を参照してください。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-stored-procs"></a>A.4 MySQL 5.6 FAQ: ストアドプロシージャーおよびストアドファンクション</h2></div></div></div><div class="qandaset"><a name="idm139978995721040"></a><dl><dt>A.4.1. <a href="faqs.html#idm139978995720912">
        MySQL 5.6 はストアドプロシージャーおよびストアドファンクションをサポートしていますか。
      </a></dt><dt>A.4.2. <a href="faqs.html#idm139978995718816">
        MySQL のストアドプロシージャーおよびストアドファンクションについてのドキュメントはどこにありますか。
      </a></dt><dt>A.4.3. <a href="faqs.html#idm139978995716384">
        MySQL のストアドプロシージャーのディスカッションフォーラムはありますか。
      </a></dt><dt>A.4.4. <a href="faqs.html#idm139978995713856">
        ストアドプロシージャーの ANSI SQL 2003 仕様はどこにありますか。
      </a></dt><dt>A.4.5. <a href="faqs.html#idm139978995711200">
        ストアドルーチンを管理するにはどうすればよいですか。
      </a></dt><dt>A.4.6. <a href="faqs.html#idm139978995703616">
        特定のデータベースのすべてのストアドプロシージャーおよびストアドファンクションを表示する方法はありますか。
      </a></dt><dt>A.4.7. <a href="faqs.html#idm139978995694400">
        ストアドプロシージャーはどこに格納されますか。
      </a></dt><dt>A.4.8. <a href="faqs.html#idm139978995685024">
        ストアドプロシージャーまたはストアドファンクションをパッケージにグループ化することはできますか。
      </a></dt><dt>A.4.9. <a href="faqs.html#idm139978995683088">
        ストアドプロシージャーは別のストアドプロシージャーを呼び出すことができますか。
      </a></dt><dt>A.4.10. <a href="faqs.html#idm139978995681328">
        ストアドプロシージャーはトリガーを呼び出すことができますか。
      </a></dt><dt>A.4.11. <a href="faqs.html#idm139978995678448">
        ストアドプロシージャーはテーブルにアクセスできますか。
      </a></dt><dt>A.4.12. <a href="faqs.html#idm139978995676544">
        ストアドプロシージャーには、アプリケーションエラーを発生させるステートメントはありますか。
      </a></dt><dt>A.4.13. <a href="faqs.html#idm139978995672400">
        ストアドプロシージャーには例外処理はありますか。
      </a></dt><dt>A.4.14. <a href="faqs.html#idm139978995668928">
        MySQL 5.6 のストアドルーチンは結果セットを返すことができますか。
      </a></dt><dt>A.4.15. <a href="faqs.html#idm139978995663584">
        ストアドプロシージャーで WITH RECOMPILE はサポートされますか。
      </a></dt><dt>A.4.16. <a href="faqs.html#idm139978995661168">
        mod_plsql を Apache のゲートウェイとして使用してデータベース内のストアドプロシージャーと直接やり取りするのと同等の機能は MySQL にありますか。
      </a></dt><dt>A.4.17. <a href="faqs.html#idm139978995658496">
        ストアドプロシージャーに入力として配列を渡すことはできますか。
      </a></dt><dt>A.4.18. <a href="faqs.html#idm139978995656736">
        ストアドプロシージャーに IN パラメータとしてカーソルを渡すことはできますか。
      </a></dt><dt>A.4.19. <a href="faqs.html#idm139978995654128">
        ストアドプロシージャーの OUT パラメータとしてカーソルを返すことはできますか。
      </a></dt><dt>A.4.20. <a href="faqs.html#idm139978995648784">
        デバッグのために、ストアドルーチン内の変数の値を出力できますか。
      </a></dt><dt>A.4.21. <a href="faqs.html#idm139978995643344">
        ストアドプロシージャー内でトランザクションをコミットまたはロールバックできますか。
      </a></dt><dt>A.4.22. <a href="faqs.html#idm139978995641328">
        MySQL 5.6 のストアドプロシージャーおよびストアドファンクションはレプリケーションで動作しますか。
      </a></dt><dt>A.4.23. <a href="faqs.html#idm139978995638336">
        マスターサーバーで作成されたストアドプロシージャーおよびストアドファンクションはスレーブにレプリケートされますか。
      </a></dt><dt>A.4.24. <a href="faqs.html#idm139978995634336">
        ストアドプロシージャーおよびストアドファンクション内で実行されたアクションはどのようにレプリケートされますか。
      </a></dt><dt>A.4.25. <a href="faqs.html#idm139978995631056">
        レプリケーションでストアドプロシージャーおよびストアドファンクションを使用するための特別なセキュリティー要件はありますか。
      </a></dt><dt>A.4.26. <a href="faqs.html#idm139978995622448">
        ストアドプロシージャーおよびストアドファンクションのアクションをレプリケートする場合の制限は何ですか。
      </a></dt><dt>A.4.27. <a href="faqs.html#idm139978995614752">
        前述の制限は MySQL のポイントインタイムリカバリを行う機能に影響しますか。
      </a></dt><dt>A.4.28. <a href="faqs.html#idm139978995612800">
        前述の制限を修正するために何が行われていますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995720912"></a><a name="idm139978995720784"></a><p><b>A.4.1.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 はストアドプロシージャーおよびストアドファンクションをサポートしていますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。MySQL 5.6 は 2 種類のストアドルーチン (ストアドプロシージャーおよびストアドファンクション) をサポートしています。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995718816"></a><a name="idm139978995718688"></a><p><b>A.4.2.</b></p></td><td align="left" valign="top"><p>
        MySQL のストアドプロシージャーおよびストアドファンクションについてのドキュメントはどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <a class="xref" href="stored-programs-views.html#stored-routines" title="20.2 ストアドルーチン (プロシージャーと関数) の使用">セクション20.2「ストアドルーチン (プロシージャーと関数) の使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995716384"></a><a name="idm139978995716256"></a><p><b>A.4.3.</b></p></td><td align="left" valign="top"><p>
        MySQL のストアドプロシージャーのディスカッションフォーラムはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。<a class="ulink" href="http://forums.mysql.com/list.php?98" target="_top">http://forums.mysql.com/list.php?98</a> を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995713856"></a><a name="idm139978995713728"></a><p><b>A.4.4.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーの ANSI SQL 2003 仕様はどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        残念ながら、正式な仕様は無料では入手できません (ANSI は有料で販売しています)。ただし、標準の包括的な概要を説明した (ストアドプロシージャーの説明を含む)、Peter Gulutzan および Trudy Pelzer 著の『<em class="citetitle">SQL-99 Complete, Really</em>』などの本があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995711200"></a><a name="idm139978995711072"></a><p><b>A.4.5.</b></p></td><td align="left" valign="top"><p>
        ストアドルーチンを管理するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ストアドルーチンに明快な命名スキームを使用することはよい管理方法です。ストアドプロシージャーは、<code class="literal">CREATE [FUNCTION|PROCEDURE]</code>、<code class="literal">ALTER [FUNCTION|PROCEDURE]</code>、<code class="literal">DROP [FUNCTION|PROCEDURE]</code>、および <code class="literal">SHOW CREATE [FUNCTION|PROCEDURE]</code> を使用して管理できます。既存のストアドプロシージャーに関する情報を取得するには、<code class="literal">INFORMATION_SCHEMA</code> データベースの <code class="literal">ROUTINES</code> テーブル (<a class="xref" href="information-schema.html#routines-table" title="21.18 INFORMATION_SCHEMA ROUTINES テーブル">セクション21.18「INFORMATION_SCHEMA ROUTINES テーブル」</a>を参照してください) を使用します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995703616"></a><a name="idm139978995703488"></a><p><b>A.4.6.</b></p></td><td align="left" valign="top"><p>
        特定のデータベースのすべてのストアドプロシージャーおよびストアドファンクションを表示する方法はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。<em class="replaceable"><code>dbname</code></em> という名前のデータベースの場合、<code class="literal">INFORMATION_SCHEMA.ROUTINES</code> テーブルに対して次のクエリーを使用します。
      </p><pre class="programlisting">
SELECT ROUTINE_TYPE, ROUTINE_NAME
    FROM INFORMATION_SCHEMA.ROUTINES
    WHERE ROUTINE_SCHEMA='<em class="replaceable"><code>dbname</code></em>';
</pre><p>
        詳細は、<a class="xref" href="information-schema.html#routines-table" title="21.18 INFORMATION_SCHEMA ROUTINES テーブル">セクション21.18「INFORMATION_SCHEMA ROUTINES テーブル」</a>を参照してください。
      </p><p>
        ストアドルーチンの本体は、<code class="literal">SHOW CREATE FUNCTION</code> (ストアドファンクションの場合) または <code class="literal">SHOW CREATE PROCEDURE</code> (ストアドプロシージャーの場合) を使用して表示できます。詳細は、<a class="xref" href="sql-syntax.html#show-create-procedure" title="13.7.5.11 SHOW CREATE PROCEDURE 構文">セクション13.7.5.11「SHOW CREATE PROCEDURE 構文」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995694400"></a><a name="idm139978995694272"></a><p><b>A.4.7.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーはどこに格納されますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">mysql</code> システムデータベースの <code class="literal">proc</code> テーブルに格納されます。ただし、システムデータベースのテーブルに直接アクセスしないでください。代わりに、ストアドファンクションに関する情報を取得するには <code class="literal">SHOW CREATE FUNCTION</code>、およびストアドプロシージャーに関する情報を取得するには <code class="literal">SHOW CREATE PROCEDURE</code> を使用します。これらのステートメントについては、<a class="xref" href="sql-syntax.html#show-create-procedure" title="13.7.5.11 SHOW CREATE PROCEDURE 構文">セクション13.7.5.11「SHOW CREATE PROCEDURE 構文」</a>を参照してください。
      </p><p>
        <code class="literal">INFORMATION_SCHEMA</code> データベースの <code class="literal">ROUTINES</code> テーブルにクエリーすることもできます。このテーブルの情報については、<a class="xref" href="information-schema.html#routines-table" title="21.18 INFORMATION_SCHEMA ROUTINES テーブル">セクション21.18「INFORMATION_SCHEMA ROUTINES テーブル」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995685024"></a><a name="idm139978995684896"></a><p><b>A.4.8.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーまたはストアドファンクションをパッケージにグループ化することはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。これは MySQL 5.6 ではサポートされません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995683088"></a><a name="idm139978995682960"></a><p><b>A.4.9.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーは別のストアドプロシージャーを呼び出すことができますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995681328"></a><a name="idm139978995681200"></a><p><b>A.4.10.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーはトリガーを呼び出すことができますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ストアドプロシージャーでは、トリガーが実行される <code class="literal">UPDATE</code> などの SQL ステートメントを実行できます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995678448"></a><a name="idm139978995678320"></a><p><b>A.4.11.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーはテーブルにアクセスできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。ストアドプロシージャーは、必要に応じて 1 つ以上のテーブルにアクセスできます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995676544"></a><a name="idm139978995676416"></a><p><b>A.4.12.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーには、アプリケーションエラーを発生させるステートメントはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。MySQL 5.6 には、SQL 標準の <code class="literal">SIGNAL</code> ステートメントおよび <code class="literal">RESIGNAL</code> ステートメントが実装されています。<a class="xref" href="sql-syntax.html#condition-handling" title="13.6.7 条件の処理">セクション13.6.7「条件の処理」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995672400"></a><a name="idm139978995672272"></a><p><b>A.4.13.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーには例外処理はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL には、SQL 標準に従った <code class="literal">HANDLER</code> 定義が実装されています。詳細は、<a class="xref" href="sql-syntax.html#declare-handler" title="13.6.7.2 DECLARE ... HANDLER 構文">セクション13.6.7.2「DECLARE ... HANDLER 構文」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995668928"></a><a name="idm139978995668800"></a><p><b>A.4.14.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 のストアドルーチンは結果セットを返すことができますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="emphasis"><em>ストアドプロシージャー</em></span>は返すことができますが、ストアドファンクションは返すことができません。ストアドプロシージャー内で通常の <code class="literal">SELECT</code> を実行すると、結果セットがクライアントに直接返されます。これが動作するようにするには、MySQL 4.1 (以降) のクライアント/サーバープロトコルを使用する必要があります。これは、たとえば PHP では、古い <code class="literal">mysql</code> 拡張ではなく <code class="literal">mysqli</code> 拡張を使用する必要があることを意味します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995663584"></a><a name="idm139978995663456"></a><p><b>A.4.15.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーで <code class="literal">WITH RECOMPILE</code> はサポートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 にはありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995661168"></a><a name="idm139978995661040"></a><p><b>A.4.16.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">mod_plsql</code> を Apache のゲートウェイとして使用してデータベース内のストアドプロシージャーと直接やり取りするのと同等の機能は MySQL にありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 には同等の機能はありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995658496"></a><a name="idm139978995658368"></a><p><b>A.4.17.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーに入力として配列を渡すことはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 にはありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995656736"></a><a name="idm139978995656608"></a><p><b>A.4.18.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーに <code class="literal">IN</code> パラメータとしてカーソルを渡すことはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 では、カーソルはストアドプロシージャーの内部でのみ使用できます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995654128"></a><a name="idm139978995654000"></a><p><b>A.4.19.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーの <code class="literal">OUT</code> パラメータとしてカーソルを返すことはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 では、カーソルはストアドプロシージャーの内部でのみ使用できます。ただし、<code class="literal">SELECT</code> でカーソルを開かない場合、結果はクライアントに直接送信されます。変数に対して <code class="literal">SELECT INTO</code> を発行することもできます。<a class="xref" href="sql-syntax.html#select" title="13.2.9 SELECT 構文">セクション13.2.9「SELECT 構文」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995648784"></a><a name="idm139978995648656"></a><p><b>A.4.20.</b></p></td><td align="left" valign="top"><p>
        デバッグのために、ストアドルーチン内の変数の値を出力できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。これは、<span class="emphasis"><em>ストアドプロシージャー</em></span>では行うことができますが、ストアドファンクションでは行うことはできません。ストアドプロシージャー内で通常の <code class="literal">SELECT</code> を実行すると、結果セットがクライアントに直接返されます。これが動作するようにするには、MySQL 4.1 (以降) のクライアント/サーバープロトコルを使用する必要があります。これは、たとえば PHP では、古い <code class="literal">mysql</code> 拡張ではなく <code class="literal">mysqli</code> 拡張を使用する必要があることを意味します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995643344"></a><a name="idm139978995643216"></a><p><b>A.4.21.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャー内でトランザクションをコミットまたはロールバックできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。ただし、ストアドファンクション内でトランザクション操作を実行することはできません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995641328"></a><a name="idm139978995641200"></a><p><b>A.4.22.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 のストアドプロシージャーおよびストアドファンクションはレプリケーションで動作しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。ストアドプロシージャーおよびストアドファンクションで実行された通常のアクションは、マスター MySQL サーバーからスレーブサーバーにレプリケートされます。<a class="xref" href="stored-programs-views.html#stored-programs-logging" title="20.7 ストアドプログラムのバイナリロギング">セクション20.7「ストアドプログラムのバイナリロギング」</a>で詳しく説明されているいくつかの制限があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995638336"></a><a name="idm139978995638208"></a><p><b>A.4.23.</b></p></td><td align="left" valign="top"><p>
        マスターサーバーで作成されたストアドプロシージャーおよびストアドファンクションはスレーブにレプリケートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。マスターサーバーで通常の DDL ステートメントを使用して実行されたストアドプロシージャーおよびストアドファンクションの作成はスレーブにレプリケートされるため、オブジェクトは両方のサーバーに存在します。ストアドプロシージャーおよびストアドファンクションに対する <code class="literal">ALTER</code> ステートメントおよび <code class="literal">DROP</code> ステートメントもレプリケートされます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995634336"></a><a name="idm139978995634208"></a><p><b>A.4.24.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーおよびストアドファンクション内で実行されたアクションはどのようにレプリケートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL は、ストアドプロシージャーで行われた各 DML イベントを記録し、それらの個々のアクションをスレーブサーバーにレプリケートします。ストアドプロシージャーを実行するために行われた実際の呼び出しはレプリケートされません。
      </p><p>
        データを変更するストアドファンクションは、各ファンクション内で行われた DML イベントとしてではなく、関数呼び出しとしてログ記録されます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995631056"></a><a name="idm139978995630928"></a><p><b>A.4.25.</b></p></td><td align="left" valign="top"><p>
        レプリケーションでストアドプロシージャーおよびストアドファンクションを使用するための特別なセキュリティー要件はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。スレーブサーバーにはマスターのバイナリログから読み取ったステートメントを実行する権限があるため、レプリケーションでストアドファンクションを使用するための特殊なセキュリティー制約が存在します。レプリケーションまたは一般のバイナリロギング (ポイントインタイムリカバリのための) がアクティブである場合、MySQL の DBA には選択できるセキュリティーオプションが 2 つあります。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              ストアドファンクションを作成するユーザーに、<code class="literal">SUPER</code> 権限を付与する必要があります。
            </p></li><li class="listitem"><p>
              または、DBA は <code class="literal">log_bin_trust_function_creators</code> システム変数に 1 を設定できます。これにより、標準の <code class="literal">CREATE ROUTINE</code> 権限を持ったユーザーがストアドファンクションを作成できます。
            </p></li></ol></div><p>
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995622448"></a><a name="idm139978995622320"></a><p><b>A.4.26.</b></p></td><td align="left" valign="top"><p>
        ストアドプロシージャーおよびストアドファンクションのアクションをレプリケートする場合の制限は何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ストアドプロシージャーに埋め込まれている決定性のない (ランダムな) アクションまたは時間ベースのアクションは、正しくレプリケートされないことがあります。その特性により、ランダムに生成された結果は予測できず、正確に再現できません。このため、スレーブにレプリケートされたランダムアクションは、マスターで実行されたアクションとは異なります。ストアドファンクションを <code class="literal">DETERMINISTIC</code> として宣言した場合、または <code class="literal">log_bin_trust_function_creators</code> システム変数に 0 を設定した場合は、ランダムに値が設定される操作を呼び出すことはできません。
      </p><p>
        また、時間ベースのアクションはスレーブで再現できません。ストアドプロシージャーのそのようなアクションのタイミングは、レプリケーションに使用されるバイナリログを介して再現できないためです。バイナリログには、DML イベントのみが記録され、タイミング制約は含まれていません。
      </p><p>
        最後に、非トランザクションテーブルで大きい DML アクション (一括挿入など) 中にエラーが発生した場合、マスターは DML アクティビティーによって部分的に更新されたがスレーブが更新されず、レプリケーションの問題が発生することがあります。回避策は、関数の DML アクションを <code class="literal">IGNORE</code> キーワードを指定して実行することであり、マスターでエラーが発生した更新が無視され、エラーが発生しなかった更新がスレーブにレプリケートされるようにします。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995614752"></a><a name="idm139978995614624"></a><p><b>A.4.27.</b></p></td><td align="left" valign="top"><p>
        前述の制限は MySQL のポイントインタイムリカバリを行う機能に影響しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        レプリケーションに影響する制限が、ポイントインタイムリカバリに同様に影響します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995612800"></a><a name="idm139978995612672"></a><p><b>A.4.28.</b></p></td><td align="left" valign="top"><p>
        前述の制限を修正するために何が行われていますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ステートメントベースのレプリケーションまたは行ベースのレプリケーションのいずれかを選択できます。元のレプリケーションの実装は、ステートメントベースのバイナリロギングに基づいています。行ベースのバイナリロギングによって、前述の制限が解決されます。
      </p><p>
        <em class="firstterm">複合</em>レプリケーションも使用できます (<code class="option">--binlog-format=mixed</code> を指定してサーバーを起動します)。このハイブリッドの<span class="quote">「<span class="quote">賢い</span>」</span>形式のレプリケーションは、ステートメントレベルのレプリケーションを安全に使用できるかどうか、または行レベルのレプリケーションが必要であるかを<span class="quote">「<span class="quote">判断</span>」</span>します。
      </p><p>
        追加情報については、<a class="xref" href="replication.html#replication-formats" title="17.1.2 レプリケーション形式">セクション17.1.2「レプリケーション形式」</a>を参照してください。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-triggers"></a>A.5 MySQL 5.6 FAQ: トリガー</h2></div></div></div><div class="qandaset"><a name="idm139978995605152"></a><dl><dt>A.5.1. <a href="faqs.html#idm139978995605024">
        MySQL 5.6 のトリガーについてのドキュメントはどこにありますか。
      </a></dt><dt>A.5.2. <a href="faqs.html#idm139978995602704">
        MySQL のトリガーについてのディスカッションフォーラムはありますか。
      </a></dt><dt>A.5.3. <a href="faqs.html#idm139978995600400">
        MySQL 5.6 にはステートメントレベルまたは行レベルのトリガーはありますか。
      </a></dt><dt>A.5.4. <a href="faqs.html#idm139978995596816">
        デフォルトのトリガーはありますか。
      </a></dt><dt>A.5.5. <a href="faqs.html#idm139978995593200">
        MySQL でトリガーを管理するにはどうすればよいですか。
      </a></dt><dt>A.5.6. <a href="faqs.html#idm139978995585568">
        特定のデータベースのすべてのトリガーを表示する方法はありますか。
      </a></dt><dt>A.5.7. <a href="faqs.html#idm139978995577152">
        トリガーはどこに格納されますか。
      </a></dt><dt>A.5.8. <a href="faqs.html#idm139978995574592">
        トリガーはストアドプロシージャーを呼び出すことができますか。
      </a></dt><dt>A.5.9. <a href="faqs.html#idm139978995572896">
        トリガーはテーブルにアクセスできますか。
      </a></dt><dt>A.5.10. <a href="faqs.html#idm139978995570672">
        1 つのテーブルに同じトリガーイベントおよびアクション時間のトリガーを複数定義することはできますか。
      </a></dt><dt>A.5.11. <a href="faqs.html#idm139978995567504">
        トリガーでは UDF を使用して外部アプリケーションを呼び出すことができますか。
      </a></dt><dt>A.5.12. <a href="faqs.html#idm139978995564880">
        トリガーはリモートサーバー上のテーブルを更新できますか。
      </a></dt><dt>A.5.13. <a href="faqs.html#idm139978995561552">
        トリガーはレプリケーションで動作しますか。
      </a></dt><dt>A.5.14. <a href="faqs.html#idm139978995555808">
        マスターでトリガーによって実行されたアクションはどのようにスレーブにレプリケートされますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995605024"></a><a name="idm139978995604896"></a><p><b>A.5.1.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 のトリガーについてのドキュメントはどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <a class="xref" href="stored-programs-views.html#triggers" title="20.3 トリガーの使用">セクション20.3「トリガーの使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995602704"></a><a name="idm139978995602576"></a><p><b>A.5.2.</b></p></td><td align="left" valign="top"><p>
        MySQL のトリガーについてのディスカッションフォーラムはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。<a class="ulink" href="http://forums.mysql.com/list.php?99" target="_top">http://forums.mysql.com/list.php?99</a> にあります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995600400"></a><a name="idm139978995600272"></a><p><b>A.5.3.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にはステートメントレベルまたは行レベルのトリガーはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 では、すべてのトリガーは <code class="literal">FOR EACH ROW</code> です。つまり、挿入、更新、または削除される各行に対してトリガーが実行されます。MySQL 5.6 は <code class="literal">FOR EACH STATEMENT</code> を使用したトリガーをサポートしていません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995596816"></a><a name="idm139978995596688"></a><p><b>A.5.4.</b></p></td><td align="left" valign="top"><p>
        デフォルトのトリガーはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        明示的にはありません。MySQL は、一部の <code class="literal">TIMESTAMP</code> カラム、および <code class="literal">AUTO_INCREMENT</code> を使用して定義されたカラムに特殊な動作を割り当てています。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995593200"></a><a name="idm139978995593072"></a><p><b>A.5.5.</b></p></td><td align="left" valign="top"><p>
        MySQL でトリガーを管理するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 では、トリガーを作成する場合は <code class="literal">CREATE TRIGGER</code> ステートメントを使用し、削除する場合は <code class="literal">DROP TRIGGER</code> を使用します。これらのステートメントについては、<a class="xref" href="sql-syntax.html#create-trigger" title="13.1.19 CREATE TRIGGER 構文">セクション13.1.19「CREATE TRIGGER 構文」</a>および<a class="xref" href="sql-syntax.html#drop-trigger" title="13.1.30 DROP TRIGGER 構文">セクション13.1.30「DROP TRIGGER 構文」</a>を参照してください。
      </p><p>
        トリガーに関する情報は、<code class="literal">INFORMATION_SCHEMA.TRIGGERS</code> テーブルをクエリーすることによって取得できます。<a class="xref" href="information-schema.html#triggers-table" title="21.26 INFORMATION_SCHEMA TRIGGERS テーブル">セクション21.26「INFORMATION_SCHEMA TRIGGERS テーブル」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995585568"></a><a name="idm139978995585440"></a><p><b>A.5.6.</b></p></td><td align="left" valign="top"><p>
        特定のデータベースのすべてのトリガーを表示する方法はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。データベース <code class="literal">dbname</code> に定義されているすべてのトリガーのリストを取得するには、<code class="literal">INFORMATION_SCHEMA.TRIGGERS</code> テーブルに対して次のようなクエリーを使用します。
      </p><pre class="programlisting">
SELECT TRIGGER_NAME, EVENT_MANIPULATION, EVENT_OBJECT_TABLE, ACTION_STATEMENT
    FROM INFORMATION_SCHEMA.TRIGGERS
    WHERE TRIGGER_SCHEMA='<em class="replaceable"><code>dbname</code></em>';
</pre><p>
        このテーブルについては、<a class="xref" href="information-schema.html#triggers-table" title="21.26 INFORMATION_SCHEMA TRIGGERS テーブル">セクション21.26「INFORMATION_SCHEMA TRIGGERS テーブル」</a>を参照してください。
      </p><p>
        MySQL に固有の <code class="literal">SHOW TRIGGERS</code> ステートメントを使用することもできます。<a class="xref" href="sql-syntax.html#show-triggers" title="13.7.5.39 SHOW TRIGGERS 構文">セクション13.7.5.39「SHOW TRIGGERS 構文」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995577152"></a><a name="idm139978995577024"></a><p><b>A.5.7.</b></p></td><td align="left" valign="top"><p>
        トリガーはどこに格納されますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        テーブルのトリガーは、現在、<code class="filename">.TRG</code> ファイルに格納され、テーブルごとにそのようなファイルが 1 つあります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995574592"></a><a name="idm139978995574464"></a><p><b>A.5.8.</b></p></td><td align="left" valign="top"><p>
        トリガーはストアドプロシージャーを呼び出すことができますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995572896"></a><a name="idm139978995572768"></a><p><b>A.5.9.</b></p></td><td align="left" valign="top"><p>
        トリガーはテーブルにアクセスできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        トリガーは、それ自体が定義されているテーブルの古いデータおよび新しいデータの両方にアクセスできます。トリガーはほかのテーブルに影響を与えることもできますが、その関数またはトリガーを呼び出したステートメントによってすでに使用されている (読み取りまたは書き込みのために) テーブルを変更することはできません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995570672"></a><a name="idm139978995570544"></a><p><b>A.5.10.</b></p></td><td align="left" valign="top"><p>
        1 つのテーブルに同じトリガーイベントおよびアクション時間のトリガーを複数定義することはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.6 では、同じトリガーイベントおよびアクション時間を持つ複数のトリガーを特定のテーブルに定義することはできません。たとえば、1 つのテーブルに対して 2 つの <code class="literal">BEFORE UPDATE</code> トリガーを定義することはできません。この制限は MySQL 5.7 で解除されました。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995567504"></a><a name="idm139978995567376"></a><p><b>A.5.11.</b></p></td><td align="left" valign="top"><p>
        トリガーでは UDF を使用して外部アプリケーションを呼び出すことができますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。たとえば、トリガーは <code class="literal">sys_exec()</code> という UDF を呼び出すことができます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995564880"></a><a name="idm139978995564752"></a><p><b>A.5.12.</b></p></td><td align="left" valign="top"><p>
        トリガーはリモートサーバー上のテーブルを更新できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。リモートサーバー上のテーブルは、<code class="literal">FEDERATED</code> ストレージエンジンを使用して更新できます。(<a class="xref" href="storage-engines.html#federated-storage-engine" title="15.8 FEDERATED ストレージエンジン">セクション15.8「FEDERATED ストレージエンジン」</a>を参照してください)。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995561552"></a><a name="idm139978995561424"></a><p><b>A.5.13.</b></p></td><td align="left" valign="top"><p>
        トリガーはレプリケーションで動作しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。ただし、それらが動作する仕組みは、MySQL のすべてのバージョンで使用できる<span class="quote">「<span class="quote">標準</span>」</span>のステートメントベースのレプリケーション、または MySQL 5.1 で導入された行ベースのレプリケーション形式のいずれを使用しているかによって異なります。
      </p><p>
        ステートメントベースのレプリケーションを使用している場合、スレーブのトリガーは、マスターで実行されてスレーブにレプリケートされたステートメントによって実行されます。
      </p><p>
        行ベースのレプリケーションを使用している場合、スレーブのトリガーは、マスターで実行されてスレーブにレプリケートされたステートメントによって実行されません。代わりに、行ベースのレプリケーションを使用した場合は、マスターでトリガーが実行されたことによる変更がスレーブに適用されます。
      </p><p>
        詳細は、<a class="xref" href="replication.html#replication-features-triggers" title="17.4.1.32 レプリケーションとトリガー">セクション17.4.1.32「レプリケーションとトリガー」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995555808"></a><a name="idm139978995555680"></a><p><b>A.5.14.</b></p></td><td align="left" valign="top"><p>
        マスターでトリガーによって実行されたアクションはどのようにスレーブにレプリケートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        これは、ステートメントベースのレプリケーションまたは行ベースのレプリケーションのいずれを使用しているかによって異なります。
      </p><p><b>ステートメントベースのレプリケーション </b>
          まず、マスターに存在するトリガーをスレーブサーバーに再作成する必要があります。これが行われると、レプリケーションに関与するほかの標準の DML ステートメントと同様に、レプリケーションフローが動作します。たとえば、マスター MySQL サーバーに存在する、<code class="literal">AFTER</code> 挿入トリガーを持つテーブル <code class="literal">EMP</code> について考えてみましょう。同じ <code class="literal">EMP</code> テーブルおよび <code class="literal">AFTER</code> 挿入トリガーが、スレーブサーバーにも存在します。レプリケーションフローは次のようになります。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="literal">INSERT</code> ステートメントが <code class="literal">EMP</code> に発行されます。
          </p></li><li class="listitem"><p>
            <code class="literal">EMP</code> の <code class="literal">AFTER</code> トリガーが実行されます。
          </p></li><li class="listitem"><p>
            <code class="literal">INSERT</code> ステートメントがバイナリログに書き込まれます。
          </p></li><li class="listitem"><p>
            レプリケーションのスレーブは、<code class="literal">EMP</code> に対するその <code class="literal">INSERT</code> ステートメントを取得してそれを実行します。
          </p></li><li class="listitem"><p>
            スレーブに存在する <code class="literal">EMP</code> の <code class="literal">AFTER</code> トリガーが実行されます。
          </p></li></ol></div><p><b>行ベースのレプリケーション </b>
          行ベースのレプリケーションを使用している場合は、マスターでトリガーが実行されたことによる変更がスレーブに適用されます。ただし、行ベースのレプリケーションでは、トリガー自体は実際にはスレーブで実行されません。これは、マスターとスレーブの両方にマスターの変更が適用され、さらにそれらの変更を行なったトリガーがスレーブで実行された場合、その変更は実際には 2 回スレーブに適用され、マスターとスレーブのデータが異なるデータとなってしまうためです。
        </p><p>
        ほとんどの場合、行ベースのレプリケーションおよびステートメントベースのレプリケーションで結果は同じです。ただし、マスターとスレーブで異なるトリガーを使用している場合、行ベースのレプリケーションは使用できません。(これは、行ベース形式は、トリガーが実行されるきっかけとなったステートメントではなく、マスターで実行されたトリガーによる変更をスレーブにレプリケートし、スレーブの対応するトリガーは実行されないためです。)代わりに、そのようなトリガーが実行されるきっかけとなったステートメントを、ステートメントベースのレプリケーションを使用してレプリケートする必要があります。
      </p><p>
        詳細は、<a class="xref" href="replication.html#replication-features-triggers" title="17.4.1.32 レプリケーションとトリガー">セクション17.4.1.32「レプリケーションとトリガー」</a>を参照してください。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-views"></a>A.6 MySQL 5.6 FAQ: ビュー</h2></div></div></div><div class="qandaset"><a name="idm139978995528416"></a><dl><dt>A.6.1. <a href="faqs.html#idm139978995528288">
        MySQL のビューについて説明しているドキュメントはどこにありますか。
      </a></dt><dt>A.6.2. <a href="faqs.html#idm139978995525888">
        MySQL のビューについてのディスカッションフォーラムはありますか。
      </a></dt><dt>A.6.3. <a href="faqs.html#idm139978995523376">
        基礎テーブルが削除または名前変更された場合、ビューはどうなりますか。
      </a></dt><dt>A.6.4. <a href="faqs.html#idm139978995519488">
        MySQL 5.6 にはテーブルのスナップショットはありますか。
      </a></dt><dt>A.6.5. <a href="faqs.html#idm139978995517792">
        MySQL 5.6 にはマテリアライズドビューはありますか。
      </a></dt><dt>A.6.6. <a href="faqs.html#idm139978995516112">
        結合に基づいているビューに挿入できますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995528288"></a><a name="idm139978995528160"></a><p><b>A.6.1.</b></p></td><td align="left" valign="top"><p>
        MySQL のビューについて説明しているドキュメントはどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <a class="xref" href="stored-programs-views.html#views" title="20.5 ビューの使用">セクション20.5「ビューの使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995525888"></a><a name="idm139978995525760"></a><p><b>A.6.2.</b></p></td><td align="left" valign="top"><p>
        MySQL のビューについてのディスカッションフォーラムはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。<a class="ulink" href="http://forums.mysql.com/list.php?100" target="_top">http://forums.mysql.com/list.php?100</a> を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995523376"></a><a name="idm139978995523248"></a><p><b>A.6.3.</b></p></td><td align="left" valign="top"><p>
        基礎テーブルが削除または名前変更された場合、ビューはどうなりますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ビューが作成されたあとに、その定義が参照しているテーブルまたはビューを削除または変更できます。この種類の問題に関してビュー定義を確認するには、<code class="literal">CHECK TABLE</code> ステートメントを使用します。(<a class="xref" href="sql-syntax.html#check-table" title="13.7.2.2 CHECK TABLE 構文">セクション13.7.2.2「CHECK TABLE 構文」</a>を参照してください。)
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995519488"></a><a name="idm139978995519360"></a><p><b>A.6.4.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にはテーブルのスナップショットはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995517792"></a><a name="idm139978995517664"></a><p><b>A.6.5.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にはマテリアライズドビューはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995516112"></a><a name="idm139978995515984"></a><p><b>A.6.6.</b></p></td><td align="left" valign="top"><p>
        結合に基づいているビューに挿入できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">INSERT</code> ステートメントに、関連するテーブルが 1 つのみであることを明確にするカラムリストがある場合は、実行できます。
      </p><p>
        ビューに対する単一の挿入で、複数のテーブルに挿入することは<span class="emphasis"><em>できません</em></span>。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-information-schema"></a>A.7 MySQL 5.6 FAQ: INFORMATION_SCHEMA</h2></div></div></div><div class="qandaset"><a name="idm139978995510800"></a><dl><dt>A.7.1. <a href="faqs.html#idm139978995510672">
        MySQL の INFORMATION_SCHEMA データベースについてのドキュメントはどこにありますか。
      </a></dt><dt>A.7.2. <a href="faqs.html#idm139978995507648">
        INFORMATION_SCHEMA についてのディスカッションフォーラムはありますか。
      </a></dt><dt>A.7.3. <a href="faqs.html#idm139978995504592">
        INFORMATION_SCHEMA の ANSI SQL 2003 仕様はどこにありますか。
      </a></dt><dt>A.7.4. <a href="faqs.html#idm139978995500672">
        Oracle のデータディクショナリと MySQL の INFORMATION_SCHEMA の違いは何ですか。
      </a></dt><dt>A.7.5. <a href="faqs.html#idm139978995496912">
        INFORMATION_SCHEMA データベースのテーブルに挿入または変更を行うことはできますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995510672"></a><a name="idm139978995510544"></a><p><b>A.7.1.</b></p></td><td align="left" valign="top"><p>
        MySQL の <code class="literal">INFORMATION_SCHEMA</code> データベースについてのドキュメントはどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <a class="xref" href="information-schema.html" title="第 21 章 INFORMATION_SCHEMA テーブル">第21章「<i>INFORMATION_SCHEMA テーブル</i>」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995507648"></a><a name="idm139978995507520"></a><p><b>A.7.2.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">INFORMATION_SCHEMA</code> についてのディスカッションフォーラムはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <a class="ulink" href="http://forums.mysql.com/list.php?101" target="_top">http://forums.mysql.com/list.php?101</a> を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995504592"></a><a name="idm139978995504464"></a><p><b>A.7.3.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">INFORMATION_SCHEMA</code> の ANSI SQL 2003 仕様はどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        残念ながら、正式な仕様は無料では入手できません。(ANSI は有料で販売しています。)ただし、標準の包括的な概要を説明した (<code class="literal">INFORMATION_SCHEMA</code> を含む)、Peter Gulutzan および Trudy Pelzer 著の<em class="citetitle">『SQL-99 Complete, Really』</em>などの本があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995500672"></a><a name="idm139978995500544"></a><p><b>A.7.4.</b></p></td><td align="left" valign="top"><p>
        Oracle のデータディクショナリと MySQL の <code class="literal">INFORMATION_SCHEMA</code> の違いは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Oracle および MySQL は両方とも、テーブルにメタデータを提供しています。ただし、Oracle と MySQL では異なるテーブル名およびカラム名が使用されています。MySQL の実装は、SQL 標準に定義されている <code class="literal">INFORMATION_SCHEMA</code> をサポートしている DB2 および SQL Server により似ています。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995496912"></a><a name="idm139978995496784"></a><p><b>A.7.5.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">INFORMATION_SCHEMA</code> データベースのテーブルに挿入または変更を行うことはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。アプリケーションが特定の標準構造に依存していることがあるため、変更しないでください。このため、<span class="emphasis"><em><code class="literal">INFORMATION_SCHEMA</code> テーブルまたはデータを変更したことによるバグまたはその他の問題はサポートできません</em></span>。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-migration"></a>A.8 MySQL 5.6 FAQ: 移行</h2></div></div></div><div class="qandaset"><a name="idm139978995491584"></a><dl><dt>A.8.1. <a href="faqs.html#idm139978995491456">
        MySQL 5.5 から MySQL 5.6 に移行する方法に関する情報はどこにありますか。
      </a></dt><dt>A.8.2. <a href="faqs.html#idm139978995487824">
        MySQL 5.6 のストレージエンジン (テーブルタイプ) のサポートは、以前のバージョンからどのように変更されましたか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995491456"></a><a name="idm139978995491328"></a><p><b>A.8.1.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.5 から MySQL 5.6 に移行する方法に関する情報はどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        アップグレード情報については、<a class="xref" href="installing.html#upgrading" title="2.11.1 MySQL のアップグレード">セクション2.11.1「MySQL のアップグレード」</a>を参照してください。アップグレード時はメジャーバージョンをスキップせずに、各手順でメジャーバージョンから次のメジャーバージョンにアップグレードして、手順の操作を完了してください。これはより複雑に見えますが、時間を節約してトラブルを避けることができます。アップグレード中に問題が発生した場合に、ユーザー自身または (MySQL Enterprise サブスクリプションがある場合は) MySQL サポートがその原因を識別しやすくなります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995487824"></a><a name="idm139978995487696"></a><p><b>A.8.2.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 のストレージエンジン (テーブルタイプ) のサポートは、以前のバージョンからどのように変更されましたか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ストレージエンジンのサポートは次のように変更されました。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ISAM</code> テーブルのサポートは MySQL 5.0 で削除されたため、<code class="literal">ISAM</code> の代わりに <code class="literal">MyISAM</code> ストレージエンジンを使用してください。テーブル <em class="replaceable"><code>tblname</code></em> を <code class="literal">ISAM</code> から <code class="literal">MyISAM</code> に変更するには、次のようなステートメントを発行します。
            </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tblname</code></em> ENGINE=MYISAM;</pre></li><li class="listitem"><p>
              <code class="literal">MyISAM</code> テーブルの内部 <code class="literal">RAID</code> も MySQL 5.0 で削除されました。これは、2G バイトを超えるファイルサイズをサポートしていないファイルシステムで大きいテーブルを許容するために以前使用されていました。現在のすべてのファイルシステムではより大きいテーブルが許容されます。<code class="literal">MERGE</code> テーブル、ビューなどの新しいほかのソリューションもあります。
            </p></li><li class="listitem"><p>
              すべてのストレージエンジンの <code class="literal">VARCHAR</code> カラム型で、末尾のスペースが維持されるようになりました。
            </p></li><li class="listitem"><p>
              <code class="literal">MEMORY</code> テーブル (以前は <code class="literal">HEAP</code> テーブルと呼ばれました) にも <code class="literal">VARCHAR</code> カラムを含めることができます。
            </p></li></ul></div><p>
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-security"></a>A.9 MySQL 5.6 FAQ: セキュリティー</h2></div></div></div><div class="qandaset"><a name="idm139978995468416"></a><dl><dt>A.9.1. <a href="faqs.html#idm139978995468288">
        MySQL のセキュリティーの問題に関するドキュメントはどこにありますか。
      </a></dt><dt>A.9.2. <a href="faqs.html#idm139978995451008">
        MySQL 5.6 には SSL に対するネイティブなサポートはありますか。
      </a></dt><dt>A.9.3. <a href="faqs.html#idm139978995446864">
        SSL のサポートは MySQL バイナリに組み込まれていますか。それとも、バイナリを再コンパイルして有効にする必要がありますか。
      </a></dt><dt>A.9.4. <a href="faqs.html#idm139978995443872">
        MySQL 5.6 には LDAP ディレクトリに対する組み込みの認証はありますか。
      </a></dt><dt>A.9.5. <a href="faqs.html#idm139978995442128">
        MySQL 5.6 にはロールベースのアクセス制御 (RBAC) のサポートは含まれていますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995468288"></a><a name="idm139978995468160"></a><p><b>A.9.1.</b></p></td><td align="left" valign="top"><p>
        MySQL のセキュリティーの問題に関するドキュメントはどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        最初に<a class="xref" href="security.html" title="第 6 章 セキュリティー">第6章「<i>セキュリティー</i>」</a>をお読みください。
      </p><p>
        特定のセキュリティーの問題に関して役に立つことがある MySQL ドキュメントのほかの部分としては、次のセクションがあります。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="xref" href="security.html#security-guidelines" title="6.1.1 セキュリティーガイドライン">セクション6.1.1「セキュリティーガイドライン」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="security.html#security-against-attack" title="6.1.3 攻撃者に対する MySQL のセキュアな状態の維持">セクション6.1.3「攻撃者に対する MySQL のセキュアな状態の維持」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="error-handling.html#resetting-permissions" title="B.5.4.1 root のパスワードをリセットする方法">セクションB.5.4.1「root のパスワードをリセットする方法」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="security.html#changing-mysql-user" title="6.1.5 MySQL を通常ユーザーとして実行する方法">セクション6.1.5「MySQL を通常ユーザーとして実行する方法」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="extending-mysql.html#udf-security" title="24.3.2.6 ユーザー定義関数のセキュリティー上の予防措置">セクション24.3.2.6「ユーザー定義関数のセキュリティー上の予防措置」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="security.html#security-options" title="6.1.4 セキュリティー関連の mysqld オプションおよび変数">セクション6.1.4「セキュリティー関連の mysqld オプションおよび変数」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="security.html#load-data-local" title="6.1.6 LOAD DATA LOCAL のセキュリティーの問題">セクション6.1.6「LOAD DATA LOCAL のセキュリティーの問題」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="installing.html#postinstallation" title="2.10 インストール後のセットアップとテスト">セクション2.10「インストール後のセットアップとテスト」</a>。
            </p></li><li class="listitem"><p>
              <a class="xref" href="security.html#ssl-basics" title="6.3.10.1 基本的な SSL の概念">セクション6.3.10.1「基本的な SSL の概念」</a>。
            </p></li></ul></div><p>
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995451008"></a><a name="idm139978995450880"></a><p><b>A.9.2.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 には SSL に対するネイティブなサポートはありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ほとんどの 5.6 バイナリには、クライアントおよびサーバー間の SSL 接続のサポートがあります。<a class="xref" href="security.html#ssl-connections" title="6.3.10 セキュアな接続のための SSL の使用">セクション6.3.10「セキュアな接続のための SSL の使用」</a>を参照してください。
      </p><p>
        (たとえば) クライアントアプリケーションで SSL 接続がサポートされない場合は、SSH を使用して接続をトンネルすることもできます。例については、<a class="xref" href="security.html#windows-and-ssh" title="6.3.11 SSH を使用した Windows から MySQL へのリモート接続">セクション6.3.11「SSH を使用した Windows から MySQL へのリモート接続」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995446864"></a><a name="idm139978995446736"></a><p><b>A.9.3.</b></p></td><td align="left" valign="top"><p>
        SSL のサポートは MySQL バイナリに組み込まれていますか。それとも、バイナリを再コンパイルして有効にする必要がありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ほとんどの 5.6 バイナリでは、セキュアなクライアントとサーバーの接続、認証が行われるクライアントとサーバーの接続、またはその両方に対して SSL が有効にされます。<a class="xref" href="security.html#ssl-connections" title="6.3.10 セキュアな接続のための SSL の使用">セクション6.3.10「セキュアな接続のための SSL の使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995443872"></a><a name="idm139978995443744"></a><p><b>A.9.4.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 には LDAP ディレクトリに対する組み込みの認証はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        現在はありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995442128"></a><a name="idm139978995442000"></a><p><b>A.9.5.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にはロールベースのアクセス制御 (RBAC) のサポートは含まれていますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        現在はありません。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-mysql-cluster"></a>A.10 MySQL 5.6 FAQ: MySQL Cluster</h2></div></div></div><a class="indexterm" name="idm139978995438976"></a><a class="indexterm" name="idm139978995437040"></a><a class="indexterm" name="idm139978995435008"></a><p>
      次のセクションでは、MySQL Cluster および <code class="literal">NDB</code> ストレージエンジンに関するよくある質問に回答します。
    </p><div class="qandaset"><a name="idm139978995431424"></a><dl><dt>A.10.1. <a href="faqs.html#idm139978995431296">
        クラスタがサポートされる MySQL ソフトウェアのバージョンはどれですか。ソースからコンパイルする必要がありますか。
      </a></dt><dt>A.10.2. <a href="faqs.html#idm139978995406992">
        「NDB」 および 「NDBCLUSTER」 は何を意味していますか。
      </a></dt><dt>A.10.3. <a href="faqs.html#idm139978995396656">
        MySQL Cluster を使用した場合と MySQL Replication を使用した場合の違いは何ですか。
      </a></dt><dt>A.10.4. <a href="faqs.html#idm139978995388016">
        MySQL Cluster を実行するには、特殊なネットワーク環境が必要となりますか。クラスタ内のコンピュータはどのように通信しますか。
      </a></dt><dt>A.10.5. <a href="faqs.html#idm139978995384128">
        MySQL Cluster を実行するために必要なコンピュータは何台ですか。その理由は何ですか。
      </a></dt><dt>A.10.6. <a href="faqs.html#idm139978995379616">
        MySQL Cluster 内の各種のコンピュータにはどのような役割がありますか。
      </a></dt><dt>A.10.7. <a href="faqs.html#idm139978995357408">
        MySQL Cluster の管理クライアントで SHOW コマンドを実行すると、次のような出力行が表示されます。
      </a></dt><dt>A.10.8. <a href="faqs.html#idm139978995341280">
        MySQL Cluster を使用できるオペレーティングシステムはどれですか。
      </a></dt><dt>A.10.9. <a href="faqs.html#idm139978995337568">
        MySQL Cluster を実行するためのハードウェア要件は何ですか。
      </a></dt><dt>A.10.10. <a href="faqs.html#idm139978995331968">
        MySQL Cluster を使用するために必要な RAM のサイズはどれくらいですか。ディスクメモリーを使用することはできますか。
      </a></dt><dt>A.10.11. <a href="faqs.html#idm139978995299456">
        MySQL Cluster に使用できるファイルシステムは何ですか。ネットワークファイルシステムまたはネットワーク共有は使用できますか。
      </a></dt><dt>A.10.12. <a href="faqs.html#idm139978995291904">
        MySQL Cluster のノードは、仮想マシン (VMWare、Parallels、Xen によって作成された仮想マシンなど) 内で実行できますか。
      </a></dt><dt>A.10.13. <a href="faqs.html#idm139978995287936">
        MySQL Cluster データベースにデータを移入しようとしています。ロード処理が予期せずに終了し、次のようなエラーメッセージが表示されます。
      </a></dt><dt>A.10.14. <a href="faqs.html#idm139978995268192">
        MySQL Cluster は TCP/IP を使用しています。これは、1 つ以上のノードをリモートの場所に配置して、インターネット経由で実行できることを意味しますか。
      </a></dt><dt>A.10.15. <a href="faqs.html#idm139978995262432">
        MySQL Cluster を使用するために、新しいプログラミング言語またはクエリー言語を学習する必要がありますか。
      </a></dt><dt>A.10.16. <a href="faqs.html#idm139978995253136">
        MySQL Cluster によってサポートされるプログラミング言語および API は何ですか。
      </a></dt><dt>A.10.17. <a href="faqs.html#idm139978995237984">
        MySQL Cluster には管理ツールが含まれていますか。
      </a></dt><dt>A.10.18. <a href="faqs.html#idm139978995231136">
        MySQL Cluster を使用しているときに、エラーメッセージまたは警告メッセージの意味を確認するにはどうすればよいですか。
      </a></dt><dt>A.10.19. <a href="faqs.html#idm139978995223648">
        MySQL Cluster はトランザクションセーフですか。どのような分離レベルがサポートされますか。
      </a></dt><dt>A.10.20. <a href="faqs.html#idm139978995219104">
        MySQL Cluster によってサポートされるストレージエンジンは何ですか。
      </a></dt><dt>A.10.21. <a href="faqs.html#idm139978995210368">
        壊滅的な障害が発生した場合 (たとえば、街全体が停電かつUPS の障害が発生した場合)、すべてのデータが失われますか。
      </a></dt><dt>A.10.22. <a href="faqs.html#idm139978995207536">
        MySQL Cluster では FULLTEXT インデックスを使用できますか。
      </a></dt><dt>A.10.23. <a href="faqs.html#idm139978995201520">
        単一のコンピュータ上で複数のノードを実行できますか。
      </a></dt><dt>A.10.24. <a href="faqs.html#idm139978995192560">
        MySQL Cluster を使用するときに、注意するべき制限はありますか。
      </a></dt><dt>A.10.25. <a href="faqs.html#idm139978995167792">
        MySQL Cluster では外部キーはサポートされますか。
      </a></dt><dt>A.10.26. <a href="faqs.html#idm139978995163360">
        既存の MySQL データベースを MySQL Cluster にインポートするにはどうすればよいですか。
      </a></dt><dt>A.10.27. <a href="faqs.html#idm139978995153696">
        MySQL Cluster のノードはどのようにして相互にやり取りしますか。
      </a></dt><dt>A.10.28. <a href="faqs.html#idm139978995149824">
        アービトレータとは何ですか。
      </a></dt><dt>A.10.29. <a href="faqs.html#idm139978995139616">
        MySQL Cluster によってサポートされるデータ型を何ですか。
      </a></dt><dt>A.10.30. <a href="faqs.html#idm139978995127824">
        MySQL Cluster を起動および停止するにはどうすればよいですか。
      </a></dt><dt>A.10.31. <a href="faqs.html#idm139978995096816">
        MySQL Cluster をシャットダウンすると、MySQL Cluster のデータはどうなりますか。
      </a></dt><dt>A.10.32. <a href="faqs.html#idm139978995094672">
        MySQL Cluster に複数の管理ノードを使用することはよい考えですか。
      </a></dt><dt>A.10.33. <a href="faqs.html#idm139978995091120">
        単一の MySQL Cluster に、異なる種類のハードウェアおよびオペレーティングシステムを混在させることはできますか。
      </a></dt><dt>A.10.34. <a href="faqs.html#idm139978995086848">
        単一のホスト上で 2 つのデータノードを実行できますか。2 つの SQL ノードは実行できますか。
      </a></dt><dt>A.10.35. <a href="faqs.html#idm139978995080992">
        MySQL Cluster ではホスト名を使用できますか。
      </a></dt><dt>A.10.36. <a href="faqs.html#idm139978995078480">
        MySQL Cluster では IPv6 はサポートされますか。
      </a></dt><dt>A.10.37. <a href="faqs.html#idm139978995074816">
        複数の MySQL サーバーを持つ MySQL Cluster で MySQL ユーザーを管理するにはどうすればよいですか。
      </a></dt><dt>A.10.38. <a href="faqs.html#idm139978995071744">
        SQL ノードの 1 つで障害が発生した場合に、クエリーの送信を続けるにはどうすればよいですか。
      </a></dt><dt>A.10.39. <a href="faqs.html#idm139978995069376">
        MySQL Cluster をバックアップおよびリストアするにはどうすればよいですか。
      </a></dt><dt>A.10.40. <a href="faqs.html#idm139978995063152">
        「エンジェルプロセス」とは何ですか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978995431296"></a><a name="idm139978995431168"></a><p><b>A.10.1.</b></p></td><td align="left" valign="top"><p>
        クラスタがサポートされる MySQL ソフトウェアのバージョンはどれですか。ソースからコンパイルする必要がありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は標準の MySQL Server 5.6 リリースではサポートされません。そうではなく、MySQL Cluster は個別の製品として提供されています。現在、次の MySQL Cluster リリースを本番で使用できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>MySQL Cluster NDB 7.1 </b>
              このシリーズは MySQL Cluster の以前の一般提供 (GA) バージョンであり、引き続き本番に使用できますが、新しい配備では MySQL Cluster NDB 7.3 を使用することをお勧めします。最新の MySQL Cluster NDB 7.1 リリースは <a class="ulink" href="http://dev.mysql.com/downloads/cluster/" target="_top">http://dev.mysql.com/downloads/cluster/</a> から入手できます。
            </p></li><li class="listitem"><p><b>MySQL Cluster NDB 7.2 </b>
              このシリーズは MySQL Cluster の一般提供 (GA) バージョンであり、引き続き本番に使用できますが、新しい配備では最新の MySQL Cluster NDB 7.3 リリースを使用することをお勧めします。最新の MySQL Cluster NDB 7.2 リリースは <a class="ulink" href="http://dev.mysql.com/downloads/cluster/" target="_top">http://dev.mysql.com/downloads/cluster/</a> から入手できます。
            </p></li><li class="listitem"><p><b>MySQL Cluster NDB 7.3 </b>
              このシリーズは、MySQL Cluster の最新の一般提供 (GA) バージョンであり、<code class="literal">NDB</code> ストレージエンジンのバージョン 7.3 および MySQL Server 5.6 に基づいています。新しい配備には、このシリーズの最新のリリースを使用してください。最新の MySQL Cluster NDB 7.3 リリースは <a class="ulink" href="http://dev.mysql.com/downloads/cluster/" target="_top">http://dev.mysql.com/downloads/cluster/</a> から入手できます。
            </p></li><li class="listitem"><p><b>MySQL Cluster NDB 7.4 </b>
              これは、MySQL Cluster の現在の開発バージョンであり、<code class="literal">NDB</code> ストレージエンジンのバージョン 7.4 および MySQL Server 5.6 に基づいています。現在、MySQL Cluster NDB 7.4 はテストおよび評価のために使用できます。最新の MySQL Cluster NDB 7.4 リリースは <a class="ulink" href="http://dev.mysql.com/downloads/cluster/" target="_top">http://dev.mysql.com/downloads/cluster/</a> から入手できます。
            </p><p>
            MySQL Cluster NDB 7.4 での改善点の概要については、<a class="xref" href="mysql-cluster.html#mysql-cluster-development-5-6-ndb-7-4" title="18.1.4.2 MySQL Cluster NDB 7.4 での MySQL Cluster の開発">セクション18.1.4.2「MySQL Cluster NDB 7.4 での MySQL Cluster の開発」</a>を参照してください。
          </p></li></ul></div><p>
        新しい配備には、MySQL Cluster NDB 7.2 または MySQL Cluster NDB 7.3 を使用してください。古いバージョンの MySQL Cluster を使用している場合は、これらのいずれかにできるかぎり早くアップグレードしてください。MySQL Cluster NDB 7.2 での改善点の概要については、<a class="ulink" href="http://dev.mysql.com/doc/refman/5.5/en/mysql-cluster-development-5-5-ndb-7-2.html" target="_top">MySQL Cluster Development in MySQL Cluster NDB 7.2</a>を参照してください。MySQL Cluster NDB 7.3 での改善点については、<a class="xref" href="mysql-cluster.html#mysql-cluster-development-5-6-ndb-7-3" title="18.1.4.1 MySQL Cluster NDB 7.3 での MySQL Cluster の開発">セクション18.1.4.1「MySQL Cluster NDB 7.3 での MySQL Cluster の開発」</a>を参照してください。
      </p><p>
        使用している MySQL Server で <code class="literal">NDB</code> がサポートされるかどうかを判別するには、<code class="literal">SHOW VARIABLES LIKE 'have_%'</code>、<code class="literal">SHOW ENGINES</code>、または <code class="literal">SHOW PLUGINS</code> ステートメントのいずれかを使用します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995406992"></a><a name="idm139978995406864"></a><p><b>A.10.2.</b></p></td><td align="left" valign="top"><p>
        <span class="quote">「<span class="quote">NDB</span>」</span> および <span class="quote">「<span class="quote">NDBCLUSTER</span>」</span> は何を意味していますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="quote">「<span class="quote">NDB</span>」</span> は <span class="quote">「<span class="quote"><span class="bold"><strong>N</strong></span>etwork <span class="bold"><strong>D</strong></span>ata<span class="bold"><strong>b</strong></span>ase</span>」</span> を意味しています。<code class="literal">NDB</code> および <code class="literal">NDBCLUSTER</code> は、MySQL でクラスタがサポートされるストレージエンジンの名前です。開発者は <code class="literal">NDB</code> を好んでいますが、どちらの名前も正しい名前です。両方の名前がドキュメントに記述され、どちらの名前も MySQL Cluster テーブルを作成するための <code class="literal">CREATE TABLE</code> ステートメントの <code class="literal">ENGINE</code> オプションに使用できます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995396656"></a><a name="idm139978995396528"></a><p><b>A.10.3.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を使用した場合と MySQL Replication を使用した場合の違いは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        従来の MySQL レプリケーションでは、マスター MySQL サーバーが 1 つ以上のスレーブを更新します。トランザクションは順次的にコミットされ、遅いトランザクションの場合、スレーブでの処理がマスターより遅れることがあります。これは、マスターで障害が発生した場合に、スレーブで最後のいくつかのトランザクションが記録されないことがあることを意味します。<code class="literal">InnoDB</code> などのトランザクションセーフなエンジンを使用している場合、トランザクションはスレーブで完了するかまったく適用されないかのいずれかであり、レプリケーションではマスターおよびスレーブのすべてのデータが常時整合性がとれていることは保証されません。MySQL Cluster では、すべてのデータノードの同期が維持され、あるデータノードでコミットされたトランザクションはすべてのデータノードでコミットされます。データノードの障害が発生した場合、ほかのすべてのデータノードでは整合性のある状態が維持されます。
      </p><p>
        簡単に言うと、標準の MySQL レプリケーションは<em class="firstterm">非同期</em>で実行され、MySQL Cluster は<em class="firstterm">同期</em>を維持して実行されます。
      </p><p>
        非同期レプリケーションは MySQL Cluster でも使用できます。<em class="firstterm">MySQL Cluster Replication</em> (<span class="quote">「<span class="quote">ジオレプリケーション</span>」</span>を呼ばれることもあります) には、2 つの MySQL Cluster 間のレプリケーション、および MySQL Cluster からクラスタ化されていない MySQL サーバーへのレプリケーションの両方を行う機能が含まれています。<a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="18.6 MySQL Cluster レプリケーション">セクション18.6「MySQL Cluster レプリケーション」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995388016"></a><a name="idm139978995387888"></a><p><b>A.10.4.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を実行するには、特殊なネットワーク環境が必要となりますか。クラスタ内のコンピュータはどのように通信しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は、TCP/IP を使用してコンピュータが接続されている高帯域幅の環境で使用することが意図されています。そのパフォーマンスは、クラスタ内のコンピュータ間の接続速度に直接関係しています。MySQL Cluster の最低限の接続要件には、一般的な 100 メガビット Ethernet ネットワークまたは同等のものが含まれます。可能な場合はギガビット Ethernet を使用することをお勧めします。
      </p><p>
        より速い SCI プロトコルもサポートされますが、特殊なハードウェアが必要となります。SCI については、<a class="xref" href="mysql-cluster.html#mysql-cluster-interconnects" title="18.3.5 MySQL Cluster での高速インターコネクトの使用">セクション18.3.5「MySQL Cluster での高速インターコネクトの使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995384128"></a><a name="idm139978995384000"></a><p><b>A.10.5.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を実行するために必要なコンピュータは何台ですか。その理由は何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        実行可能なクラスタの実行には、少なくとも 3 台のコンピュータが必要となります。ただし、MySQL Cluster の<span class="emphasis"><em>推奨される</em></span>最低限のコンピュータの数は 4 台であり、管理ノードと SQL ノードを実行するためにそれぞれ 1 台ずつ、およびデータノードとして使用される 2 台のコンピュータです。データノードを 2 台にする目的は冗長性を持たせるためです。管理ノードは別個のマシンで実行して、いずれかのデータノードで障害が発生した場合にアービトレーションサービスが継続されることを保証する必要があります。
      </p><p>
        スループットおよび高可用性を向上させるには、複数の SQL ノード (クラスタに接続された MySQL サーバー) を使用してください。複数の管理サーバーを実行することもできます (必須ではありません)。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995379616"></a><a name="idm139978995379488"></a><p><b>A.10.6.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster 内の各種のコンピュータにはどのような役割がありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster には、コンピュータを物理的要素とする、物理組織および論理組織の両方があります。クラスタの論理要素または機能要素は<em class="firstterm">ノード</em>と呼ばれ、クラスタのノードを収容するコンピュータは<em class="firstterm">クラスタホスト</em>と呼ばれることがあります。クラスタ内の特定のロールにそれぞれ対応する 3 つのタイプのノードがあります。これらを次に示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>管理ノード </b>
              このノードはクラスタ全体の管理サービス (起動、シャットダウン、バックアップ、およびほかのノードの構成データを含む) を提供します。管理ノードサーバーはアプリケーション <span class="command"><strong>ndb_mgmd</strong></span> として実装されます。MySQL Cluster を制御するために使用される管理クライアントは <span class="command"><strong>ndb_mgm</strong></span> です。これらのプログラムについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="18.4.4 ndb_mgmd — MySQL Cluster 管理サーバーデーモン">セクション18.4.4「<span class="command"><strong>ndb_mgmd</strong></span> — MySQL Cluster 管理サーバーデーモン」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="18.4.5 ndb_mgm — MySQL Cluster 管理クライアント">セクション18.4.5「<span class="command"><strong>ndb_mgm</strong></span> — MySQL Cluster 管理クライアント」</a>を参照してください。
            </p></li><li class="listitem"><p><b>データノード </b>
              このタイプのノードは、データを格納およびレプリケートします。データノードの機能は、<code class="literal">NDB</code> データノードプロセス<span class="command"><strong>ndbd</strong></span> のインスタンスによって処理されます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="18.4.1 ndbd — MySQL Cluster データノードデーモン">セクション18.4.1「<span class="command"><strong>ndbd</strong></span> — MySQL Cluster データノードデーモン」</a>を参照してください。
            </p></li><li class="listitem"><p><b>SQL ノード </b>
              これは、単純に MySQL サーバーのインスタンス (<span class="command"><strong>mysqld</strong></span>) であり、<code class="literal">NDBCLUSTER</code> ストレージエンジンのサポートを組み込んでビルドされていて、<code class="option">--ndb-cluster</code> オプションを指定して起動することによってこのエンジンを有効にし、<code class="option">--ndb-connectstring</code> オプションを指定して MySQL Cluster の管理サーバーに接続できるようにします。これらのオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="18.3.4.2 MySQL Cluster 用の MySQL Server オプション">セクション18.3.4.2「MySQL Cluster 用の MySQL Server オプション」</a>を参照してください。
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <em class="firstterm">API ノード</em>は、データの格納および取得のためにクラスタのデータノードを直接使用するアプリケーションです。このため、SQL ノードは MySQL サーバーを使用してクラスタへの SQL インタフェースを提供する API ノードの一種であると考えることができます。直接的でオブジェクト指向のトランザクションおよび MySQL Cluster のデータへのスキャンインタフェースを提供するそのようなアプリケーション (MySQL サーバーに依存しない) は、NDB API を使用して記述できます。詳細は、<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/overview-ndb-api.html" target="_top">MySQL Cluster API Overview: The NDB API</a>を参照してください。
            </p></div></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995357408"></a><a name="idm139978995357280"></a><p><b>A.10.7.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster の管理クライアントで <code class="literal">SHOW</code> コマンドを実行すると、次のような出力行が表示されます。
      </p><pre class="programlisting">
id=2    @10.100.10.32  (Version: 5.6.22-ndb-7.3.9 Nodegroup: 0, *)
</pre><p>
        <code class="literal">「*」</code>は何を意味していますか。このノードはほかのノードとどのように異なりますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        もっとも簡単な回答は、<span class="quote">「<span class="quote">ユーザーが制御できるものではなく、MySQL Cluster のソースコードを記述または分析するソフトウェアエンジニアではないかぎり、どのような場合でも憂慮する必要はないものです</span>」</span>となります。
      </p><p>
        この回答に満足できない場合、より長くテクニカルなバージョンは次のとおりです。
      </p><p>
        MySQL Cluster の多数のメカニズムでは、データノードの分散調整が必要となります。これらの分散アルゴリズムおよびプロトコルには、グローバルチェックポイント、DDL (スキーマ) の変更、およびノードの再起動処理が含まれます。この調整を単純にするために、それらのメンバーのいずれかがリーダーとして動作するようにデータノードで<span class="quote">「<span class="quote">選出</span>」</span>されます。(このノードは<span class="quote">「<span class="quote">マスター</span>」</span>と呼ばれていましたが、MySQL Replication のマスターサーバーと混乱しないように、この用語は削除されました。)この選択は完全に自動的であり、それに影響するメカニズムをユーザーが目にすることはありません。自動的で<span class="emphasis"><em>ある</em></span>ことが、MySQL Cluster の内部アーキテクチャーの重要な部分です。
      </p><p>
        ノードがこれらのメカニズムの<span class="quote">「<span class="quote">リーダー</span>」</span>として動作する場合、通常、それがアクティビティーの調整の中心となり、<span class="quote">「<span class="quote">フォロワー</span>」</span>として動作するほかのノードは、リーダーによって指示されたアクティビティーの各自の担当分を実行します。リーダーとして動作するノードで障害が発生すると、残りのノードによって新しいリーダーが選出されます。古いリーダーによって調整されていた進行中のタスクは、実際に関係するメカニズムに従って、失敗するか、新しいリーダーによって続行されます。
      </p><p>
        これらの各種のメカニズムおよびプロトコルの一部で別のリーダーノードが使用されることがありますが、一般的には、それらのすべてで同じリーダーが選択されます。管理クライアントの <code class="literal">SHOW</code> の出力でリーダーとして示されるノードは、DDL およびメタデータのアクティビティーの調整を担当する <code class="literal">DICT</code> マネージャーと内部では呼ばれています (詳細は、『<em class="citetitle">MySQL Cluster API Developer Guide</em>』の<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/ndb-internals-kernel-blocks-dbdict.html" target="_top">The DBDICT Block</a>を参照してください)。
      </p><p>
        MySQL Cluster は、リーダーの選択がクラスタの外部で認識できるような影響を及ぼさないように設計されています。たとえば、現在のリーダーの CPU またはリソースの使用量がほかのデータノードより著しく高いことはなく、リーダーで障害が発生した場合にほかのデータノードで障害が発生した場合よりクラスタに対して特別に大きい影響があるということはありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995341280"></a><a name="idm139978995341152"></a><p><b>A.10.8.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を使用できるオペレーティングシステムはどれですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster はほとんどの Unix 系のオペレーティングシステムでサポートされています。MySQL Cluster NDB 7.2 は、Microsoft Windows オペレーティングシステムの本番設定でもサポートされます。
      </p><p>
        さまざまなオペレーティングシステムのバージョン、オペレーティングシステムの配布、およびハードウェアプラットフォームで MySQL Cluster に提供されるサポートのレベルについては、<a class="ulink" href="http://www.mysql.com/support/supportedplatforms/cluster.html" target="_top">http://www.mysql.com/support/supportedplatforms/cluster.html</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995337568"></a><a name="idm139978995337440"></a><p><b>A.10.9.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を実行するためのハードウェア要件は何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は <code class="literal">NDB</code> 対応のバイナリを使用できるプラットフォームで実行してください。データノードおよび API ノードの場合、より速い CPU およびより多くのメモリーによって、パフォーマンスが向上することがあり、64 ビットの CPU は 32 ビットのプロセッサよりも効率的である場合があります。各ノードのデータベースの分担を保持するために、データノードに使用されるマシンに十分なメモリーがある必要があります (詳細は、<span class="emphasis"><em>「必要な RAM のサイズはどれくらいですか」</em></span>を参照してください)。MySQL Cluster の管理サーバーを実行するためにのみ使用されるコンピュータの場合、要件は最低限のものです。通常、このタスクには一般的なデスクトップ PC (または同等のもの) で十分です。ノードは標準の TCP/IP ネットワークおよびハードウェアを使用して通信できます。高速の SCI プロトコルを使用することもできます。ただし、SCI を使用するには、特殊なネットワークハードウェアおよびソフトウェアが必要となります (<a class="xref" href="mysql-cluster.html#mysql-cluster-interconnects" title="18.3.5 MySQL Cluster での高速インターコネクトの使用">セクション18.3.5「MySQL Cluster での高速インターコネクトの使用」</a>を参照してください)。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995331968"></a><a name="idm139978995331840"></a><p><b>A.10.10.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を使用するために必要な RAM のサイズはどれくらいですか。ディスクメモリーを使用することはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        以前は、MySQL Cluster はインメモリーのみを使用していました。MySQL 5.1 以降では、MySQL Cluster をディスクに格納する機能も提供されています。(この機能を以前のリリースにバックポートする計画はありません。)詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="18.5.12 MySQL Cluster ディスクデータテーブル">セクション18.5.12「MySQL Cluster ディスクデータテーブル」</a>を参照してください。
      </p><p>
        インメモリーの <code class="literal">NDB</code> テーブルの場合は、クラスタ内の各データノードで必要となる RAM の容量のおおよその見積もりを取得するために次の式を使用できます。
      </p><pre class="programlisting">
(SizeofDatabase × NumberOfReplicas × 1.1 ) / NumberOfDataNodes
</pre><p>
        メモリー要件をより正確に計算するには、クラスタデータベースの各テーブルで行ごとに必要となる格納領域 (詳細は、<a class="xref" href="data-types.html#storage-requirements" title="11.7 データ型のストレージ要件">セクション11.7「データ型のストレージ要件」</a>を参照してください) を判別して、それを行数で乗算する必要があります。カラムインデックスについては、次のことを考慮する必要もあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">NDBCLUSTER</code> テーブルに作成される各主キーまたはハッシュインデックスには、レコードごとに 21−25 バイトが必要となります。これらのインデックスは <code class="literal">IndexMemory</code> を使用します。
          </p></li><li class="listitem"><p>
            順序付けされた各インデックスでは、<code class="literal">DataMemory</code> を使用して、レコードごとに 10 バイトのストレージが必要となります。
          </p></li><li class="listitem"><p>
            また、主キーまたは一意のインデックスを作成すると、このインデックスが <code class="literal">USING HASH</code> を指定して作成された場合を除き、順序付けされたインデックスが作成されます。言い換えると、次のようになります。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                通常、クラスタテーブルの主キーまたは一意のインデックスには、レコードごとに 31 - 35 バイトが使用されます。
              </p></li><li class="listitem"><p>
                ただし、主キーまたは一意のインデックスが <code class="literal">USING HASH</code> を指定して作成されている場合は、レコードごとに 21 バイトから 25 バイトのみが必要となります。
              </p></li></ul></div></li></ul></div><p>
        すべての主キーおよび一意のインデックスに <code class="literal">USING HASH</code> を指定して MySQL Cluster のテーブルを作成すると、通常、テーブルの更新がより迅速に実行されます。主キーおよびユニークキーの作成に <code class="literal">USING HASH</code> が使用されなかったテーブルへの更新より 20 - 30% 速いことがあります。これは、必要なメモリーが少なくなり (順序付けされたインデックスが作成されないため)、使用される CPU が少なくなる (読み取りおよび (場合によっては) 更新する必要があるインデックスが少なくなるため) ためです。ただし、これは、本来範囲スキャンを使用するクエリーをほかの方法で実行する必要があることも意味し、選択が低速になることがあります。
      </p><p>
        クラスタのメモリー要件を計算するときに、最新の MySQL 5.6 リリースに付属している <span class="command"><strong>ndb_size.pl</strong></span> ユーティリティーが役に立つことがあります。この Perl スクリプトは、現在の (クラスタではない) MySQL データベースに接続して、<code class="literal">NDBCLUSTER</code> ストレージエンジンを使用した場合にデータベースで必要となる容量に関する報告を作成します。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="18.4.25 ndb_size.pl — NDBCLUSTER サイズ要件エスティメータ">セクション18.4.25「<span class="command"><strong>ndb_size.pl</strong></span> — NDBCLUSTER サイズ要件エスティメータ」</a>を参照してください。
      </p><p>
        <span class="emphasis"><em>すべての MySQL Cluster テーブルには主キーがある必要がある</em></span>ことに留意することが非常に重要です。<code class="literal">NDB</code> ストレージエンジンは、主キーが定義されていない場合、主キーを自動的に作成します。この主キーは <code class="literal">USING HASH</code> を指定せずに作成されます。
      </p><p>
        ある時点で MySQL Cluster のデータおよびインデックスの格納に使用されているメモリー量を判別するには、<span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">REPORT MEMORYUSAGE</code> コマンドを使用します。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="18.5.2 MySQL Cluster 管理クライアントのコマンド">セクション18.5.2「MySQL Cluster 管理クライアントのコマンド」</a>を参照してください。また、使用可能な <code class="literal">DataMemory</code> または <code class="literal">IndexMemory</code> の 80% が使用されている場合、および使用率が 85%、90% などに達した場合に、警告がクラスタのログに書き込まれます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995299456"></a><a name="idm139978995299328"></a><p><b>A.10.11.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster に使用できるファイルシステムは何ですか。ネットワークファイルシステムまたはネットワーク共有は使用できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        通常、ホストのオペレーティングシステムにネイティブなファイルシステムは、MySQL Cluster で動作します。特定のファイルシステムが MySQL Cluster と特に良好に動作する (またはそれほどよくない) ことがわかった場合は、その知見を<a class="ulink" href="http://forums.mysql.com/list.php?25" target="_top">MySQL Cluster フォーラム</a>で共有してください。
      </p><p>
        Windows の場合は、通常の MySQL と同様に、MySQL Cluster に <code class="literal">NTFS</code> ファイルシステムを使用することをお勧めします。<code class="literal">FAT</code> ファイルシステムまたは <code class="literal">VFAT</code> ファイルシステムでは、MySQL Cluster はテストされていません。このため、それらを MySQL または MySQL Cluster に使用することはお勧めしません。
      </p><p>
        MySQL Cluster はシェアードナッシングソリューションとして実装されています。この背景にある考え方は、1 つのハードウェアの障害によって、複数のクラスタノードの障害、または場合によってはクラスタ全体の障害が引き起こされないようにすることです。このため、ネットワーク共有またはネットワークファイルシステムの使用は、MySQL Cluster ではサポートされません。これは、SAN などの共有ストレージデバイスにも当てはまります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995291904"></a><a name="idm139978995291776"></a><p><b>A.10.12.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster のノードは、仮想マシン (VMWare、Parallels、Xen によって作成された仮想マシンなど) 内で実行できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は MySQL Cluster NDB 7.2 以降で仮想マシンでの使用がサポートされます。現在、<a class="ulink" href="http://www.oracle.com/technetwork/server-storage/vm/index.html" target="_top">Oracle VM</a> を使用してサポートおよびテストが行われています。
      </p><p>
        一部の MySQL Cluster ユーザーは、ほかの仮想化製品を使用して MySQL Cluster の配備に成功しました。そのような場合、オラクルは MySQL Cluster のサポートを提供できますが、仮想環境に固有の問題についてはその製品のベンダーに問い合わせる必要があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995287936"></a><a name="idm139978995287808"></a><p><b>A.10.13.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster データベースにデータを移入しようとしています。ロード処理が予期せずに終了し、次のようなエラーメッセージが表示されます。
      </p><p>
        <code class="literal"><span class="errortext">「ERROR 1114: The table 'my_cluster_table' is full」</span></code>
      </p><p>
        これが発生するのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        原因はすべてのテーブルデータおよびすべてのインデックス (<span class="emphasis"><em>テーブル定義に主キーの定義が含まれていない場合に自動的に作成される、<code class="literal">NDB</code> ストレージエンジンによって要求される主キーを含む</em></span>) のための十分な RAM が、使用しているセットアップで提供されていないことである可能性があります。
      </p><p>
        すべてのデータノードで同じ容量の RAM が使用されることにも注意してください。クラスタ内のデータノードは、データノードの中で使用可能なメモリーの容量がもっとも少ないノードより多いメモリーを使用することはできないためです。たとえば、クラスタのデータノードをホストしているコンピュータが 4 台あり、そのうちの 3 台がクラスタのデータの格納に 3G バイトの RAM を使用でき、残りのデータノードが 1G バイトの RAM のみを使用できる場合、各データノードは最大 1G バイトを MySQL Cluster のデータおよびインデックスに使用できます。
      </p><p>
        場合によっては、<span class="command"><strong>ndb_mgm -e "ALL REPORT MEMORYUSAGE"</strong></span> で <code class="literal">DataMemory</code> に大きい空き領域が示されていても、<span class="errortext">Table is full</span>というエラーが MySQL クライアントアプリケーションに表示されることがあります。<code class="literal">CREATE TABLE</code> に <code class="literal">MAX_ROWS</code> オプションを使用すると、MySQL Cluster のテーブルのために追加のパーティションを作成して、ハッシュインデックスに使用できるメモリーを増やすように <code class="literal">NDB</code> に強制できます。通常、テーブルに格納することが予期されている行数の 2 倍の数値を <code class="literal">MAX_ROWS</code> に設定すれば十分です。
      </p><p>
        同様の理由で、データが大量にロードされたノードで、データノードが再起動される問題が発生することもあります。MySQL Cluster NDB 7.1 以降では、<code class="literal">MinFreePct</code> パラメータが追加され、<code class="literal">DataMemory</code> および <code class="literal">IndexMemory</code> の一部 (デフォルトでは 5%) を再起動で使用するために予約することによって、この問題に対処しています。この予約されたメモリーは、<code class="literal">NDB</code> テーブルまたはデータの格納には使用できません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995268192"></a><a name="idm139978995268064"></a><p><b>A.10.14.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster は TCP/IP を使用しています。これは、1 つ以上のノードをリモートの場所に配置して、インターネット経由で実行できることを意味しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        そのような状況でクラスタが確実に実行される可能性は<span class="emphasis"><em>ほとんど</em></span>ありません。MySQL Cluster は、100M ビット/秒またはギガビット Ethernet (後者が望ましい) を使用した LAN 環境のような専用の高速接続が保証された状況で実行されることを想定して設計および実装されているためです。これより遅い環境で使用したときのパフォーマンスはテストされておらず保証されません。
      </p><p>
        また、MySQL Cluster のノード間の通信はセキュアではないことに注意することも重要です。それらは暗号化されておらず、ほかの保護メカニズムによる保護手段も講じられていません。クラスタのもっともセキュアな構成は、外部からクラスタのデータまたは管理ノードに直接アクセスされない、ファイアウォールの内側のプライベートネットワークです。(SQL ノードの場合は、MySQL サーバーのほかのインスタンスの場合と同様の予防措置を取るようにしてください。)詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-security" title="18.5.11 MySQL Cluster のセキュリティー上の問題">セクション18.5.11「MySQL Cluster のセキュリティー上の問題」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995262432"></a><a name="idm139978995262304"></a><p><b>A.10.15.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を使用するために、新しいプログラミング言語またはクエリー言語を学習する必要がありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="emphasis"><em>いいえ</em></span>。クラスタ自体の管理および構成にはいくつかの特殊なコマンドが使用されますが、次の操作には標準の (My)SQL ステートメントのみが必要となります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            テーブルの作成、変更、および削除
          </p></li><li class="listitem"><p>
            テーブルデータの挿入、更新、および削除
          </p></li><li class="listitem"><p>
            プライマリインデックスおよび一意のインデックスの作成、変更、および削除
          </p></li></ul></div><p>
        MySQL Cluster を設定するには、いくつかの特殊な構成パラメータおよびファイルが必要となります。これらの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="18.3.2 MySQL Cluster の構成ファイル">セクション18.3.2「MySQL Cluster の構成ファイル」</a>を参照してください。
      </p><p>
        クラスタノードの起動、停止などのタスクのために、いくつかの簡単なコマンドが MySQL Cluster 管理クライアント (<span class="command"><strong>ndb_mgm</strong></span>) で使用されます。<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="18.5.2 MySQL Cluster 管理クライアントのコマンド">セクション18.5.2「MySQL Cluster 管理クライアントのコマンド」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995253136"></a><a name="idm139978995253008"></a><p><b>A.10.16.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster によってサポートされるプログラミング言語および API は何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は、標準の MySQL サーバーと同じプログラミング API および言語 (ODBC、.Net、MySQL C API、および一般的なスクリプト言語 (PHP、Perl、Python など) のための多数のドライバを含む) をサポートしています。これらの API を使用して記述された MySQL Cluster アプリケーションは、ほかの MySQL アプリケーションと同様に動作します。SQL ステートメントを MySQL サーバー (MySQL Cluster の場合は SQL ノード) に送信して、データの行が含まれている応答を受け取ります。これらの API については、<a class="xref" href="connectors-apis.html" title="第 23 章 Connector および API">第23章「<i>Connector および API</i>」</a>を参照してください。
      </p><p>
        MySQL Cluster は、NDB API を使用したアプリケーションプログラミングもサポートしています。これは、MySQL サーバーにアクセスする必要のない、MySQL Cluster のデータへの低レベルの C++ インタフェースを提供します。<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/ndbapi.html" target="_top">The NDB API</a>を参照してください。また、多くの <code class="literal">NDBCLUSTER</code> 管理関数が C 言語の MGM API によって提供されています。詳細は、<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/mgm-api.html" target="_top">The MGM API</a>を参照してください。
      </p><p>
        MySQL Cluster (NDB 7.1 以降) は、ClusterJ を使用した Java アプリケーションプログラミングもサポートしています。これは、セッションおよびトランザクションを使用して、データのドメインオブジェクトモデルをサポートします。詳細は、<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/mccj-overview-java.html" target="_top">Java and MySQL Cluster</a>を参照してください。
      </p><p>
        MySQL Cluster (NDB 7.2 以降) には、<code class="literal">memcached</code> のサポートが追加され、開発者は <code class="literal">memcached</code> インタフェースを使用して MySQL Cluster に格納されているデータにアクセスできます。詳細は、<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/ndbmemcache.html" target="_top"><code class="literal">ndbmemcache</code>—Memcache API for MySQL Cluster</a>を参照してください。
      </p><p>
        MySQL Cluster NDB 7.3 には、MySQL Cluster をデータストアとして使用する、<code class="literal">Node.js</code> に対して記述された NoSQL アプリケーションをサポートするアダプタが追加されました。詳細は、<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/ndb-nodejs.html" target="_top">MySQL NoSQL Connector for JavaScript</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995237984"></a><a name="idm139978995237856"></a><p><b>A.10.17.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster には管理ツールが含まれていますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster には、基本的な管理機能を実行するためのコマンド行クライアントが含まれています。<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="18.4.5 ndb_mgm — MySQL Cluster 管理クライアント">セクション18.4.5「<span class="command"><strong>ndb_mgm</strong></span> — MySQL Cluster 管理クライアント」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="18.5.2 MySQL Cluster 管理クライアントのコマンド">セクション18.5.2「MySQL Cluster 管理クライアントのコマンド」</a>を参照してください。
      </p><p>
        MySQL Cluster NDB 7.0 以降は MySQL Cluster Manager によってもサポートされます。これは別個の製品であり、ローリング再起動、構成の変更などの MySQL Cluster の多くの管理タスクを自動化できる拡張されたコマンド行インタフェースが提供されます。MySQL Cluster Manager については、<a class="ulink" href="http://dev.mysql.com/doc/mysql-cluster-manager/1.3/en/index.html" target="_top">MySQL™ Cluster Manager 1.3.6 User Manual</a>を参照してください。
      </p><p>
        MySQL Cluster NDB 7.3 では、MySQL Cluster ソフトウェア配布の一部として、MySQL Cluster を設定および配備するためのブラウザベースのグラフィカルな Auto-Installer が導入されました。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-auto" title="18.2.1 MySQL Cluster Auto-Installer">セクション18.2.1「MySQL Cluster Auto-Installer」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995231136"></a><a name="idm139978995231008"></a><p><b>A.10.18.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を使用しているときに、エラーメッセージまたは警告メッセージの意味を確認するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        これを行うことができる方法は 2 つあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            エラー状態または警告状態を通知された直後に、<span class="command"><strong>mysql</strong></span> クライアント内で <span class="command"><strong>SHOW ERRORS</strong></span> または <span class="command"><strong>SHOW WARNINGS</strong></span> を使用します。
          </p></li><li class="listitem"><p>
            システムのシェルプロンプトで、<span class="command"><strong>perror --ndb <em class="replaceable"><code>error_code</code></em></strong></span> を使用します。
          </p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995223648"></a><a name="idm139978995223520"></a><p><b>A.10.19.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster はトランザクションセーフですか。どのような分離レベルがサポートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="emphasis"><em>はい</em></span>。<code class="literal">NDB</code> ストレージエンジンを指定して作成されたテーブルの場合は、トランザクションがサポートされます。現在、MySQL Cluster では <code class="literal">READ COMMITTED</code> トランザクション分離レベルのみがサポートされます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995219104"></a><a name="idm139978995218976"></a><p><b>A.10.20.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster によってサポートされるストレージエンジンは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL でのクラスタリングは、<code class="literal">NDB</code> ストレージエンジンによってのみサポートされます。つまり、MySQL Cluster のノード間でテーブルを共有するには、<code class="literal">ENGINE=NDB</code> (または同等のオプション <code class="literal">ENGINE=NDBCLUSTER</code>) を使用してテーブルを作成する必要があります。
      </p><p>
        MySQL Cluster で使用されている MySQL サーバーに、ほかのストレージエンジン (<code class="literal">InnoDB</code>、<code class="literal">MyISAM</code> など) を使用するテーブルを作成することはできますが、それらのテーブルは <code class="literal">NDB</code> を使用していないため、クラスタリングに参加しません。そのような各テーブルはそれが作成された MySQL サーバーインスタンスに厳密にローカルなテーブルとなります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995210368"></a><a name="idm139978995210240"></a><p><b>A.10.21.</b></p></td><td align="left" valign="top"><p>
        壊滅的な障害が発生した場合 (たとえば、街全体が停電<span class="emphasis"><em>かつ</em></span>UPS の障害が発生した場合)、すべてのデータが失われますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        コミットされたすべてのトランザクションはログ記録されます。このため、大災害が起こった場合に一部のデータが失われることはありますが、それはごく限定的なものとなります。データの損失は、トランザクションごとの操作の数を最小限にすることによって、さらに減らすことができます。(どのような場合でも、1 つのトランザクションで多数の操作を実行するのはよい考えではありません。)
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995207536"></a><a name="idm139978995207408"></a><p><b>A.10.22.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster では <code class="literal">FULLTEXT</code> インデックスを使用できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        現在、<code class="literal">FULLTEXT</code> インデックスは、<code class="literal">InnoDB</code> ストレージエンジン (MySQL 5.6.4 以降) および <code class="literal">MyISAM</code> ストレージエンジンのみによってサポートされています。詳細は、<a class="xref" href="functions.html#fulltext-search" title="12.9 全文検索関数">セクション12.9「全文検索関数」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995201520"></a><a name="idm139978995201392"></a><p><b>A.10.23.</b></p></td><td align="left" valign="top"><p>
        単一のコンピュータ上で複数のノードを実行できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        実行できますが常に推奨できるとは限りません。クラスタを実行する主な理由の 1 つは冗長性を持たせるためです。この冗長性の利点を完全に享受するには、各ノードを別個のマシン上に配置してください。単一のマシンに複数のノードを配置した場合、そのマシンで障害が発生したときに、それらのすべてのノードが失われます。このため、単一のマシンで複数のデータノードを実行する場合は、そのマシンの障害によってノードグループのすべてのデータノードが失われることがないように設定することが<span class="emphasis"><em>非常に</em></span>重要です。
      </p><p>
        MySQL Cluster は低コスト (または無料) のオペレーティングシステムがロードされた一般的なハードウェアで実行できるため、追加のマシンを 1 台または 2 台購入する出費は、ミッションクリティカルなデータを保護するためには十分に価値があります。管理ノードを実行するクラスタホストの要件は最低限のものであることにも注意してください。このタスクは、300 MHz の Pentium または同等の CPU、オペレーティングシステムのための十分な RAM、および <span class="command"><strong>ndb_mgmd</strong></span> プロセスと <span class="command"><strong>ndb_mgm</strong></span> プロセスのための少量のオーバーヘッドに対応した装備があれば実行できます。
      </p><p>
        複数の CPU、コア、またはその両方を持つ単一のホストで、複数のクラスタデータノードを実行することは容認できます。MySQL Cluster NDB 7.0 以降では、そのようなシステムで使用することが意図された、マルチスレッドバージョンのデータノードのバイナリも提供されています。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="18.4.3 ndbmtd — MySQL Cluster データノードデーモン (マルチスレッド)">セクション18.4.3「<span class="command"><strong>ndbmtd</strong></span> — MySQL Cluster データノードデーモン (マルチスレッド)」</a>を参照してください。
      </p><p>
        同じマシン上でデータノードと SQL ノードを同時に実行できる場合もあります。そのような配置での実行状態は、さまざまな要因 (コアおよび CPU の数、データノードおよび SQL ノードのプロセスが使用できるディスクおよびメモリーの容量など) によって異なります。そのような構成を計画する場合は、これらの要因を考慮する必要があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995192560"></a><a name="idm139978995192432"></a><p><b>A.10.24.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を使用するときに、注意するべき制限はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster NDB 7.3 以降の <code class="literal">NDB</code> テーブルの制限には次のものがあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            一時テーブルはサポートされません。<code class="literal">ENGINE=NDB</code> または <code class="literal">ENGINE=NDBCLUSTER</code> を使用した <code class="literal">CREATE TEMPORARY TABLE</code> ステートメントは、エラーが発生して失敗します。
          </p></li><li class="listitem"><p>
            <code class="literal">NDBCLUSTER</code> テーブルでサポートされるユーザー定義のパーティション化のタイプは、<code class="literal">KEY</code> および <code class="literal">LINEAR KEY</code> のみです。ほかのパーティショニングタイプを使用して <code class="literal">NDB</code> テーブルを作成しようとすると、エラーが発生して失敗します。
          </p></li><li class="listitem"><p>
            <code class="literal">FULLTEXT</code> インデックスはサポートされません。
          </p></li><li class="listitem"><p>
            インデックスのプリフィクスはサポートされません。インデックスを作成できるのは完全なカラムのみです。
          </p></li><li class="listitem"><p>
            空間インデックスはサポートされません (空間カラムは使用できます)。<a class="xref" href="data-types.html#spatial-extensions" title="11.5 空間データの拡張">セクション11.5「空間データの拡張」</a>を参照してください。
          </p></li><li class="listitem"><p>
            部分的なトランザクションおよび部分的なロールバックのサポートは、ほかのトランザクションストレージエンジン (個別のステートメントをロールバックできる <code class="literal">InnoDB</code> など) と同等です。
          </p></li><li class="listitem"><p>
            テーブルごとに許可される属性の最大数は 512 個です。属性名は 31 文字以内である必要があります。各テーブルで、テーブル名とデータベース名を合わせた最大長は 122 文字です。
          </p></li><li class="listitem"><p>
            テーブルの行の最大サイズは、<code class="literal">BLOB</code> 値をカウントせずに 14K バイトです。
          </p><p>
            <code class="literal">NDB</code> テーブルごとの行数の制限はありません。テーブルサイズの制限は多くの要因によって異なり、各データノードで使用できる RAM の容量に特に関係しています。
          </p></li></ul></div><p>
        MySQL Cluster の制限の完全なリストについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="18.1.6 MySQL Cluster の既知の制限">セクション18.1.6「MySQL Cluster の既知の制限」</a>を参照してください。<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-resolved" title="18.1.6.11 MySQL Cluster NDB 7.3 で解決された以前の MySQL Cluster の問題">セクション18.1.6.11「MySQL Cluster NDB 7.3 で解決された以前の MySQL Cluster の問題」</a>も参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995167792"></a><a name="idm139978995167664"></a><p><b>A.10.25.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster では外部キーはサポートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster NDB 7.3 では、<code class="literal">InnoDB</code> ストレージエンジンと同等の外部キー制約のサポートが追加されました。詳細は、<a class="xref" href="introduction.html#constraint-foreign-key" title="1.8.3.2 FOREIGN KEY の制約">セクション1.8.3.2「FOREIGN KEY の制約」</a>および<a class="xref" href="sql-syntax.html#create-table-foreign-keys" title="13.1.17.2 外部キー制約の使用">セクション13.1.17.2「外部キー制約の使用」</a>を参照してください。外部キーのサポートが必要なアプリケーションの場合は、MySQL Cluster NDB 7.3 以降を使用してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995163360"></a><a name="idm139978995163232"></a><p><b>A.10.26.</b></p></td><td align="left" valign="top"><p>
        既存の MySQL データベースを MySQL Cluster にインポートするにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        ほかのバージョンの MySQL の場合と同様に、データベースを MySQL Cluster にインポートできます。この FAQ の各所で説明されている制限以外の唯一の特別な要件は、クラスタに含まれるテーブルが <code class="literal">NDB</code> ストレージエンジンを使用する必要があることです。これは、<code class="literal">ENGINE=NDB</code> または <code class="literal">ENGINE=NDBCLUSTER</code> を指定してテーブルを作成する必要があることを意味します。
      </p><p>
        ほかのストレージエンジンを使用しているテーブルを、1 つ以上の <code class="literal">ALTER TABLE</code> ステートメントを使用して、<code class="literal">NDBCLUSTER</code> に変更することもできます。ただし、変更を行う前に、テーブルの定義が <code class="literal">NDBCLUSTER</code> ストレージエンジンと互換性がある必要があります。MySQL 5.6 では、追加の回避策も必要となります。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="18.1.6 MySQL Cluster の既知の制限">セクション18.1.6「MySQL Cluster の既知の制限」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995153696"></a><a name="idm139978995153568"></a><p><b>A.10.27.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster のノードはどのようにして相互にやり取りしますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        クラスタのノードは、3 種類の転送メカニズム (TCP/IP、SHM (共有メモリー)、および SCI (スケーラブルコヒーラントインタフェース)) を使用して通信できます。使用可能な場合、同じクラスタホスト上にあるノード間では SHM がデフォルトで使用されます。ただし、これは実験的とみなされます。SCI は、スケーラブルなマルチプロセッサシステムを構築するために使用される高速 (1 Gbps 以上) で高可用性のプロトコルであり、特殊なハードウェアおよびドライバが必要となります。MySQL Cluster の転送メカニズムとして SCI を使用する方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-interconnects" title="18.3.5 MySQL Cluster での高速インターコネクトの使用">セクション18.3.5「MySQL Cluster での高速インターコネクトの使用」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995149824"></a><a name="idm139978995149696"></a><p><b>A.10.28.</b></p></td><td align="left" valign="top"><p>
        <em class="firstterm">アービトレータ</em>とは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        クラスタ内の 1 つ以上のデータノードで障害が発生した場合、相互に<span class="quote">「<span class="quote">認識</span>」</span>できないクラスタデータノードが発生することがあります。実際に、2 つのセットのデータノードがネットワークのパーティション化で別々に分離されることがあります (<span class="quote">「<span class="quote">スプリットブレイン</span>」</span>シナリオとも呼ばれます)。各セットのデータノードがクラスタ全体のように動作しようとするため、このタイプの状況は好ましくありません。競合するデータノードのセットのいずれかを選択するために、アービトレータが必要となります。
      </p><p>
        少なくとも 1 つのノードグループのすべてのデータノードが存続して場合、クラスタの単一のサブセットが独自に機能するクラスタを形成できないため、ネットワークのパーティション化は問題とはなりません。本当の問題はすべてのノードが存続している単一のノードグループがない場合に発生し、その場合はネットワークのパーティション化 (<span class="quote">「<span class="quote">スプリットブレイン</span>」</span>シナリオ) が発生する可能性があります。そしてアービトレータが必要となります。すべてのクラスタノードは、同じノードをアービトレータとして認識しますが、通常、これは管理サーバーです。ただし、クラスタ内の MySQL サーバーのいずれかを代わりにアービトレータとして動作するように構成できます。アービトレータは、クラスタノードの最初のセットがアクセスすることを受け入れ、残りのセットにシャットダウンするように指示します。アービトレータの選択は、MySQL サーバーおよび管理サーバーノードの <code class="literal">ArbitrationRank</code> 構成パラメータによって制御されます。MySQL Cluster NDB 7.0.7 以降では、<code class="literal">ArbitrationRank</code> 構成パラメータを使用してアービトレータの選択処理を制御することもできます。これらのパラメータについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="18.3.2.5 MySQL Cluster 管理サーバーの定義">セクション18.3.2.5「MySQL Cluster 管理サーバーの定義」</a>を参照してください。
      </p><p>
        アービトレータの役割によって、指定されたホストに重い要求が課されることはないため、アービトレータのホストはこの目的のために特別に処理が速いマシン、または追加のメモリーがあるマシンである必要はありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995139616"></a><a name="idm139978995139488"></a><p><b>A.10.29.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster によってサポートされるデータ型を何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は MySQL の通常のデータ型 (MySQL の空間拡張に関連付けられている型を含む) をすべてサポートしています。ただし、<code class="literal">NDB</code> ストレージエンジンは空間インデックスをサポートしていません。(空間インデックスは <code class="literal">MyISAM</code> によってのみサポートされます。詳細は、<a class="xref" href="data-types.html#spatial-extensions" title="11.5 空間データの拡張">セクション11.5「空間データの拡張」</a>を参照してください。)また、<code class="literal">NDB</code> テーブルとともに使用された場合、インデックスに関していくつかの違いがあります。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          MySQL Cluster のディスクデータテーブル (つまり、<code class="literal">TABLESPACE ... STORAGE DISK ENGINE=NDB</code> または <code class="literal">TABLESPACE ... STORAGE DISK ENGINE=NDBCLUSTER</code> を指定して作成されたテーブル) には固定長の行のみが格納されています。これは、(たとえば) <code class="literal">VARCHAR(255)</code> カラムが含まれている各ディスクデータテーブルレコードで、実際に格納される文字数に関係なく、255 文字 (テーブルに使用されている文字セットおよび照合順序に必要となります) の領域が必要となることを意味します。
        </p></div><p>
        これらの問題については、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="18.1.6 MySQL Cluster の既知の制限">セクション18.1.6「MySQL Cluster の既知の制限」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995127824"></a><a name="idm139978995127696"></a><p><b>A.10.30.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster を起動および停止するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        クラスタ内の各ノードを次の順序で個別に起動する必要があります。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <span class="command"><strong>ndb_mgmd</strong></span> コマンドを使用して、管理ノードを起動します。
          </p><p>
            <code class="option">-f</code> オプションまたは <code class="option">--config-file</code> オプションを指定して、構成ファイルのある場所を管理ノードに通知する必要があります。
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndbd</strong></span> コマンドを使用して、各データノードを起動します。
          </p><p>
            データノードが管理サーバーに接続する方法を認識するように、<code class="option">-c</code> オプションまたは <code class="option">--ndb-connectstring</code> オプションを指定して各データノードを起動する必要があります。
          </p></li><li class="listitem"><p>
            任意の起動スクリプト (<span class="command"><strong>mysqld_safe</strong></span> など) を使用して各 MySQL サーバー (SQL ノード) を起動します。
          </p><p>
            各 MySQL サーバーは、<code class="option">--ndbcluster</code> オプションおよび <code class="option">--ndb-connectstring</code> オプションを指定して起動する必要があります。これらのオプションによって、<code class="literal">NDBCLUSTER</code> ストレージエンジンのサポート、および管理サーバーに接続する方法が mysqld で有効になります。
          </p></li></ol></div><p>
        影響を受けるノードがあるマシンのシステムシェルで、これらの各コマンドを実行する必要があります。(そのマシンを物理的にその場で操作する必要はありません。リモートログインシェルをこの目的に使用できます。)クラスタが実行されていることを確認するには、管理ノードが収容されているマシンで <code class="literal">NDB</code> 管理クライアント <span class="command"><strong>ndb_mgm</strong></span> を起動して、<code class="literal">SHOW</code> コマンドまたは <code class="literal">ALL STATUS</code> コマンドを発行します。
      </p><p>
        実行されているクラスタをシャットダウンするには、管理クライアントで <code class="literal">SHUTDOWN</code> コマンドを発行します。または、システムシェルに次のコマンドを入力できます。
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>ndb_mgm -e "SHUTDOWN"</code></strong>
</pre><p>
        (この例の引用符はオプションです。<code class="option">-e</code> オプションの後ろのコマンド文字列にスペースがないためです。また、管理クライアントのほかのコマンドと同様に、<code class="literal">SHUTDOWN</code> コマンドでは大文字/小文字が区別されません。)
      </p><p>
        これらのコマンドのいずれかによって、<span class="command"><strong>ndb_mgm</strong></span>、<span class="command"><strong>ndb_mgm</strong></span>、および <span class="command"><strong>ndbd</strong></span> プロセスが正常に終了します。SQL ノードとして実行されている MySQL サーバーは、<span class="command"><strong>mysqladmin shutdown</strong></span> を使用して停止できます。
      </p><p>
        詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="18.5.2 MySQL Cluster 管理クライアントのコマンド">セクション18.5.2「MySQL Cluster 管理クライアントのコマンド」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-install-shutdown-restart" title="18.2.7 MySQL Cluster の安全なシャットダウンと再起動">セクション18.2.7「MySQL Cluster の安全なシャットダウンと再起動」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995096816"></a><a name="idm139978995096688"></a><p><b>A.10.31.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster をシャットダウンすると、MySQL Cluster のデータはどうなりますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        クラスタのデータノードによってメモリーに保持されていたデータがディスクに書き込まれ、次回クラスタが起動されたときにメモリーにリロードされます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995094672"></a><a name="idm139978995094544"></a><p><b>A.10.32.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster に複数の管理ノードを使用することはよい考えですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        フェイルセーフとして役に立つことがあります。特定の時点でクラスタを制御しているのは 1 つの管理ノードのみですが、1 つの管理ノードをプライマリとして構成し、プライマリ管理ノードで障害が発生した場合に、1 つ以上の追加の管理ノードが引き継ぐようにすることができます。
      </p><p>
        MySQL Cluster の管理ノードを構成する方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="18.3.2 MySQL Cluster の構成ファイル">セクション18.3.2「MySQL Cluster の構成ファイル」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995091120"></a><a name="idm139978995090992"></a><p><b>A.10.33.</b></p></td><td align="left" valign="top"><p>
        単一の MySQL Cluster に、異なる種類のハードウェアおよびオペレーティングシステムを混在させることはできますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。すべてのマシンおよびオペレーティングシステムが同じ<span class="quote">「<span class="quote">エンディアン</span>」</span> (すべてがビッグエンディアンまたはすべてがリトルエンディアン) であれば可能です。
      </p><p>
        異なる MySQL Cluster リリースのソフトウェアを各ノードに使用することもできます。ただし、ローリングアップグレードの手順の一部としてのみこれをサポートしています (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="18.5.5 MySQL Cluster のローリング再起動の実行">セクション18.5.5「MySQL Cluster のローリング再起動の実行」</a>を参照してください)。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995086848"></a><a name="idm139978995086720"></a><p><b>A.10.34.</b></p></td><td align="left" valign="top"><p>
        単一のホスト上で 2 つのデータノードを実行できますか。2 つの SQL ノードは実行できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。実行できます。複数のデータノードの場合は、各ノードで別のデータディレクトリを使用することをお勧めします (必須ではありません)。単一のマシン上で複数の SQL ノードを実行する場合は、<span class="command"><strong>mysqld</strong></span> の各インスタンスで別の TCP/IP ポートを使用する必要があります。ただし、MySQL 5.6 では、1 台のマシンで特定のタイプの複数のクラスタノードを実行することは推奨されず、本番での使用はサポートされません。
      </p><p>
        また、<span class="command"><strong>ndbd</strong></span> プロセスおよび <span class="command"><strong>mysqld</strong></span> プロセスはメモリーで競合することがあるため、同じホスト上でデータノードおよび SQL ノードを一緒に実行しないことをお勧めします。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995080992"></a><a name="idm139978995080864"></a><p><b>A.10.35.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster ではホスト名を使用できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。クラスタのホストに DNS および DHCP を使用できます。ただし、アプリケーションが<span class="quote">「<span class="quote">ファイブナイン</span>」</span>可用性を要求する場合は、固定 (数値) IP アドレスを使用してください。クラスタホスト間通信を DNS、DHCP などのサービスに依存させると、潜在的な障害点が増えるためです。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995078480"></a><a name="idm139978995078352"></a><p><b>A.10.36.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster では IPv6 はサポートされますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        IPv6 は SQL ノード (MySQL サーバー) 間の接続ではサポートされますが、ほかのすべてのタイプの MySQL Cluster ノード間の接続には IPv4 を使用する必要があります。
      </p><p>
        具体的には、これは、MySQL Cluster 間のレプリケーションには IPv6 を使用できるが、同じ MySQL Cluster 内のノード間の接続には IPv4 を使用する必要があることを意味します。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues" title="18.6.3 MySQL Cluster レプリケーションの既知の問題">セクション18.6.3「MySQL Cluster レプリケーションの既知の問題」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995074816"></a><a name="idm139978995074688"></a><p><b>A.10.37.</b></p></td><td align="left" valign="top"><p>
        複数の MySQL サーバーを持つ MySQL Cluster で MySQL ユーザーを管理するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        通常、MySQL のユーザーアカウントおよび権限は、同じ MySQL Cluster にアクセスする異なる MySQL サーバー間で自動的に伝播されません。MySQL Cluster NDB 7.2 以降では、MySQL Cluster は権限の配布のサポートを提供しています。権限の配布は自動的に有効になりませんが、MySQL Cluster のドキュメントで説明されている次の手順を使用して有効にできます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="18.5.14 MySQL Cluster の配布された MySQL 権限">セクション18.5.14「MySQL Cluster の配布された MySQL 権限」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995071744"></a><a name="idm139978995071616"></a><p><b>A.10.38.</b></p></td><td align="left" valign="top"><p>
        SQL ノードの 1 つで障害が発生した場合に、クエリーの送信を続けるにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster は SQL ノード間でどのような種類の自動フェイルオーバーも提供していません。SQL ノードを失ったときの処理、およびそれらの間のフェイルオーバーを行うように、アプリケーションで準備している必要があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995069376"></a><a name="idm139978995069248"></a><p><b>A.10.39.</b></p></td><td align="left" valign="top"><p>
        MySQL Cluster をバックアップおよびリストアするにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL Cluster 管理クライアントおよび <span class="command"><strong>ndb_restore</strong></span> プログラムの NDB にネイティブなバックアップおよびリストア機能を使用できます。<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="18.5.3 MySQL Cluster のオンラインバックアップ">セクション18.5.3「MySQL Cluster のオンラインバックアップ」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="18.4.20 ndb_restore — MySQL Cluster バックアップのリストア">セクション18.4.20「<span class="command"><strong>ndb_restore</strong></span> — MySQL Cluster バックアップのリストア」</a>を参照してください。
      </p><p>
        このために <span class="command"><strong>mysqldump</strong></span> および MySQL サーバーで提供されている従来の機能を使用することもできます。詳細は、<a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — データベースバックアッププログラム">セクション4.5.4「<span class="command"><strong>mysqldump</strong></span> — データベースバックアッププログラム」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978995063152"></a><a name="idm139978995063024"></a><p><b>A.10.40.</b></p></td><td align="left" valign="top"><p>
        <span class="quote">「<span class="quote">エンジェルプロセス</span>」</span>とは何ですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        このプロセスは、データノードプロセスをモニターし、必要に応じて再起動を試みます。<span class="command"><strong>ndbd</strong></span> を起動したあとに、システムでアクティブなプロセスのリストをチェックすると、その名前で実行されているプロセスが実際には 2 つあることを確認できます (簡潔にするために、出力では <span class="command"><strong>ndb_mgmd</strong></span> および <span class="command"><strong>ndbd</strong></span> を省略しました)。
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>./ndb_mgmd</code></strong>

shell&gt; <strong class="userinput"><code>ps aux | grep ndb</code></strong>
me      23002  0.0  0.0 122948  3104 ?        Ssl  14:14   0:00 ./ndb_mgmd
me      23025  0.0  0.0   5284   820 pts/2    S+   14:14   0:00 grep ndb

shell&gt; <strong class="userinput"><code>./ndbd -c 127.0.0.1 --initial</code></strong>

shell&gt; <strong class="userinput"><code>ps aux | grep ndb</code></strong>
me      23002  0.0  0.0 123080  3356 ?        Ssl  14:14   0:00 ./ndb_mgmd
me      23096  0.0  0.0  35876  2036 ?        Ss   14:14   0:00 ./ndbd -c 127.0.0.1 --initial
me      23097  1.0  2.4 524116 91096 ?        Sl   14:14   0:00 ./ndbd -c 127.0.0.1 --initial
me      23168  0.0  0.0   5284   812 pts/2    R+   14:15   0:00 grep ndb
</pre><p>
        メモリーおよび CPU の使用量が 0 と表示されている <span class="command"><strong>ndbd</strong></span> プロセスがエンジェルプロセスです。実際には、もちろんそれぞれにごく少量が使用されます。これは、メインの <span class="command"><strong>ndbd</strong></span> プロセス (データを実際に処理するプライマリデータノードプロセス) が実行されているかどうかを単純にチェックします。許可されている場合 (たとえば、<code class="literal">StopOnError</code> 構成パラメータが false に設定されている場合。<a class="xref" href="mysql-cluster.html#mysql-cluster-params-ndbd" title="18.3.3.1 MySQL Cluster データノードの構成パラメータ">セクション18.3.3.1「MySQL Cluster データノードの構成パラメータ」</a>を参照してください)、エンジェルプロセスはプライマリデータノードプロセスを再起動しようとします。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-cjk"></a>A.11 MySQL 5.6 FAQ: MySQL の中国語、日本語、および韓国語の文字セット</h2></div></div></div><a class="indexterm" name="idm139978995048224"></a><a class="indexterm" name="idm139978995046192"></a><a class="indexterm" name="idm139978995044000"></a><a class="indexterm" name="idm139978995041872"></a><a class="indexterm" name="idm139978995039712"></a><a class="indexterm" name="idm139978995037488"></a><a class="indexterm" name="idm139978995035456"></a><a class="indexterm" name="idm139978995034096"></a><a class="indexterm" name="idm139978995031808"></a><a class="indexterm" name="idm139978995029584"></a><a class="indexterm" name="idm139978995027568"></a><a class="indexterm" name="idm139978995026224"></a><a class="indexterm" name="idm139978995023904"></a><a class="indexterm" name="idm139978995021744"></a><a class="indexterm" name="idm139978995019680"></a><a class="indexterm" name="idm139978995017504"></a><a class="indexterm" name="idm139978995015376"></a><a class="indexterm" name="idm139978995014016"></a><a class="indexterm" name="idm139978995011792"></a><a class="indexterm" name="idm139978995009632"></a><a class="indexterm" name="idm139978995008288"></a><a class="indexterm" name="idm139978995006128"></a><a class="indexterm" name="idm139978995003968"></a><a class="indexterm" name="idm139978995002544"></a><a class="indexterm" name="idm139978995000352"></a><a class="indexterm" name="idm139978994998208"></a><a class="indexterm" name="idm139978994996064"></a><a class="indexterm" name="idm139978994993872"></a><a class="indexterm" name="idm139978994991712"></a><a class="indexterm" name="idm139978994989536"></a><a class="indexterm" name="idm139978994987344"></a><a class="indexterm" name="idm139978994985200"></a><a class="indexterm" name="idm139978994983056"></a><a class="indexterm" name="idm139978994980912"></a><a class="indexterm" name="idm139978994978768"></a><a class="indexterm" name="idm139978994976624"></a><a class="indexterm" name="idm139978994974480"></a><a class="indexterm" name="idm139978994972336"></a><a class="indexterm" name="idm139978994970192"></a><a class="indexterm" name="idm139978994968000"></a><a class="indexterm" name="idm139978994965840"></a><a class="indexterm" name="idm139978994963824"></a><a class="indexterm" name="idm139978994961584"></a><a class="indexterm" name="idm139978994960240"></a><a class="indexterm" name="idm139978994958064"></a><a class="indexterm" name="idm139978994955904"></a><a class="indexterm" name="idm139978994953744"></a><a class="indexterm" name="idm139978994951584"></a><a class="indexterm" name="idm139978994949552"></a><a class="indexterm" name="idm139978994947520"></a><p>
      この一連のよくある質問は、CJK (中国語、日本語、韓国語) の問題に関する多くの問い合わせに対応している MySQL のサポートグループおよび開発グループの経験から得られたものです。
    </p><div class="qandaset"><a name="idm139978994944560"></a><dl><dt>A.11.1. <a href="faqs.html#idm139978994944432">
        MySQL で使用できる CJK 文字セットはどの文字セットですか。
      </a></dt><dt>A.11.2. <a href="faqs.html#idm139978994906352">
        CJK 文字をテーブルに挿入しました。SELECT でそれらが「?」文字として表示されるのはなぜですか。
      </a></dt><dt>A.11.3. <a href="faqs.html#idm139978994849776">
        Big5 中国語文字セットを使用する場合は、どのような問題に注意するべきですか。
      </a></dt><dt>A.11.4. <a href="faqs.html#idm139978994840144">
        日本語文字セットの変換が失敗するのはなぜですか。
      </a></dt><dt>A.11.5. <a href="faqs.html#idm139978994734512">
        SJIS の 81CA を cp932 に変換する場合はどうすればよいですか。
      </a></dt><dt>A.11.6. <a href="faqs.html#idm139978994727520">
        MySQL では円 (¥) 記号をどのように表しますか。
      </a></dt><dt>A.11.7. <a href="faqs.html#idm139978994718464">
        MySQL には、5C が円記号である別の文字セットを作成する計画はありますか。ほかの主要な DBMS の少なくとも 1 つにはそれがあります。
      </a></dt><dt>A.11.8. <a href="faqs.html#idm139978994715616">
        MySQL で韓国語文字セットを使用する場合に注意する問題はありますか。
      </a></dt><dt>A.11.9. <a href="faqs.html#idm139978994700592">
        なぜ「Incorrect string value」というエラーメッセージが表示されるのですか。
      </a></dt><dt>A.11.10. <a href="faqs.html#idm139978994677952">
        Access、PHP、またはその他の API を使用したアプリケーションの GUI フロントエンドまたはブラウザで、CJK 文字が正しく表示されないのはなぜですか。
      </a></dt><dt>A.11.11. <a href="faqs.html#idm139978994647008">
        MySQL 5.6 にアップグレードしました。文字セットに関して、MySQL 4.0 の動作に戻すにはどうすればよいですか。
      </a></dt><dt>A.11.12. <a href="faqs.html#idm139978994611376">
        CJK 文字での LIKE 検索および FULLTEXT 検索が失敗することがあるのはなぜですか。
      </a></dt><dt>A.11.13. <a href="faqs.html#idm139978994594944">
        文字 X がすべての文字セットで使用可能であるかどうかを判別するにはどうすればよいですか。
      </a></dt><dt>A.11.14. <a href="faqs.html#idm139978994580496">
        CJK 文字列が Unicode で間違ってソートされるのはなぜですか。(I)
      </a></dt><dt>A.11.15. <a href="faqs.html#idm139978994549808">
        CJK 文字列が Unicode で間違ってソートされるのはなぜですか。(II)
      </a></dt><dt>A.11.16. <a href="faqs.html#idm139978994529552">
        補助文字が MySQL で拒否されるのはなぜですか。
      </a></dt><dt>A.11.17. <a href="faqs.html#idm139978994516672">
        「CJKV」にするべきではありませんか。
      </a></dt><dt>A.11.18. <a href="faqs.html#idm139978994511968">
        MySQL では CJK 文字をデータベース名およびテーブル名に使用できますか。
      </a></dt><dt>A.11.19. <a href="faqs.html#idm139978994504320">
        MySQL マニュアルの中国語版、日本語版、および韓国語版はどこにありますか。
      </a></dt><dt>A.11.20. <a href="faqs.html#idm139978994501216">
        MySQL での CJK および関連する問題についての支援はどこで受けることができますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978994944432"></a><a name="idm139978994944304"></a><p><b>A.11.1.</b></p></td><td align="left" valign="top"><p>
        MySQL で使用できる CJK 文字セットはどの文字セットですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        CJK 文字セットのリストは、MySQL のバージョンによって異なることがあります。たとえば、<code class="literal">gb18030</code> 文字セットは MySQL 5.7.4 より前はサポートされていませんでした。ただし、<code class="literal">INFORMATION_SCHEMA.CHARACTER_SETS</code> 表のすべてのエントリの <code class="literal">DESCRIPTION</code> カラムには適用可能な言語の名前が表示されるため、次のクエリーを使用して Unicode 以外のすべての CJK 文字セットの最新のリストを取得できます。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT CHARACTER_SET_NAME, DESCRIPTION</code></strong>
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.CHARACTER_SETS</code></strong>
    -&gt; <strong class="userinput"><code>WHERE DESCRIPTION LIKE '%Chin%'</code></strong>
    -&gt; <strong class="userinput"><code>OR DESCRIPTION LIKE '%Japanese%'</code></strong>
    -&gt; <strong class="userinput"><code>OR DESCRIPTION LIKE '%Korean%'</code></strong>
    -&gt; <strong class="userinput"><code>ORDER BY CHARACTER_SET_NAME;</code></strong>
+--------------------+---------------------------------+
| CHARACTER_SET_NAME | DESCRIPTION                     |
+--------------------+---------------------------------+
| big5               | Big5 Traditional Chinese        |
| cp932              | SJIS for Windows Japanese       |
| eucjpms            | UJIS for Windows Japanese       |
| euckr              | EUC-KR Korean                   |
| gb18030            | China National Standard GB18030 |
| gb2312             | GB2312 Simplified Chinese       |
| gbk                | GBK Simplified Chinese          |
| sjis               | Shift-JIS Japanese              |
| ujis               | EUC-JP Japanese                 |
+--------------------+---------------------------------+
9 rows in set (0.01 sec)
</pre><p>
        (詳細は、<a class="xref" href="information-schema.html#character-sets-table" title="21.1 INFORMATION_SCHEMA CHARACTER_SETS テーブル">セクション21.1「INFORMATION_SCHEMA CHARACTER_SETS テーブル」</a>を参照してください。)
      </p><p>
        MySQL は中華人民共和国の正式な文字セットである <em class="firstterm">GB</em> 文字セット (<span class="foreignphrase"><em class="foreignphrase">Guojia Biaozhun</em></span>、<span class="emphasis"><em>National Standard</em></span>、または <span class="emphasis"><em>Simplified Chinese</em></span>) の 3 つのバリアント (<code class="literal">gb2312</code>、<code class="literal">gbk</code>、および <code class="literal">gb18030</code> (MySQL 5.7.4 で追加されました)) をサポートしています。
      </p><p>
        ユーザーが <code class="literal">gbk</code> の文字を <code class="literal">gb2312</code> に挿入しようとすることがありますが、これはほとんどの場合動作します。<code class="literal">gbk</code> は <code class="literal">gb2312</code> のスーパーセットであるためです。ただし、より珍しい漢字を挿入しようとすると動作しません。(例については、Bug #16072 を参照してください)。
      </p><p>
        ここでは、<code class="literal">gb2312</code> または <code class="literal">gbk</code> で正当な文字を明らかにして、正式なドキュメントへの参照を示します。<code class="literal">gb2312</code> または <code class="literal">gbk</code> のバグを報告する前に、これらのリファレンスを確認してください。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">gb2312_chinese_ci</code> 照合順序に従って並べられた <code class="literal">gb2312</code> 文字の完全なリストについては、<a class="ulink" href="http://www.collation-charts.org/mysql60/by-charset.html#gb2312" target="_top">gb2312</a> を参照してください。
          </p></li><li class="listitem"><p>
            MySQL の <code class="literal">gbk</code> は、実際には<span class="quote">「<span class="quote">Microsoft コードページ 936</span>」</span>です。これは、正式な <code class="literal">gbk</code> とは文字 <code class="literal">A1A4</code> (中黒)、<code class="literal">A1AA</code> (エムダッシュ)、<code class="literal">A6E0-A6F5</code>、および <code class="literal">A8BB-A8C0</code> が異なります。
          </p></li><li class="listitem"><p>
            <code class="literal">gbk</code>/Unicode マッピングのリストについては、<a class="ulink" href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP936.TXT" target="_top">http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP936.TXT</a> を参照してください。
          </p></li><li class="listitem"><p>
            MySQL の <code class="literal">gbk</code> 文字のリストについては、<a class="ulink" href="http://www.collation-charts.org/mysql60/by-charset.html#gbk" target="_top">gbk</a> を参照してください。
          </p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994906352"></a><a name="idm139978994906224"></a><p><b>A.11.2.</b></p></td><td align="left" valign="top"><p>
        CJK 文字をテーブルに挿入しました。<code class="literal">SELECT</code> でそれらが<span class="quote">「<span class="quote">?</span>」</span>文字として表示されるのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        この問題は、通常、アプリケーションプログラムまたはオペレーティングシステムの設定と MySQL の設定が一致していないことが原因です。これらのタイプの問題を修正するための一般的な手順を次に示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="emphasis"><em>使用している MySQL のバージョンを確認します</em></span>。
          </p><p>
            これを判別するには、<code class="literal">SELECT VERSION();</code> ステートメントを使用します。
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>意図した文字セットがデータベースで実際に使用されていることを確認します</em></span>。
          </p><p>
            ユーザーは多くの場合、クライアントの文字セットはサーバーの文字セットまたは表示のために使用される文字セットと常に同じであると考えます。ただし、これらは両方とも間違った想定です。<code class="literal">SHOW CREATE TABLE <em class="replaceable"><code>tablename</code></em></code> の結果をチェックするか、次のステートメントを使用することによって確認できます。
          </p><pre class="programlisting">
SELECT character_set_name, collation_name
    FROM information_schema.columns
    WHERE table_schema = your_database_name
        AND table_name = your_table_name
        AND column_name = your_column_name;
</pre></li><li class="listitem"><p>
            <span class="emphasis"><em>正しく表示されない文字の 16 進値を判別します</em></span>。
          </p><p>
            テーブル <em class="replaceable"><code>table_name</code></em> のカラム <em class="replaceable"><code>column_name</code></em> のこの情報を取得するには、次のクエリーを使用します。
          </p><pre class="programlisting">
SELECT HEX(<em class="replaceable"><code>column_name</code></em>)
FROM <em class="replaceable"><code>table_name</code></em>;
</pre><p>
            <code class="literal">3F</code> は <code class="literal">?</code> 文字のエンコードです。これは、<code class="literal">?</code> が実際にカラムに格納される文字であることを意味します。これは、ほとんどの場合、特定の文字をクライアントの文字セットからターゲットの文字セットに変換するときの問題のために発生します。
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>ラウンドトリップが可能であることを確認します (つまり、<em class="replaceable"><code>literal</code></em> (または <em class="replaceable"><code>_introducer hexadecimal-value</code></em>) を選択すると、結果として <em class="replaceable"><code>literal</code></em> が取得される)</em></span>。
          </p><p>
            たとえば、日本語のカタカナ文字 <span class="foreignphrase"><em class="foreignphrase">Pe</em></span> (<code class="literal">ペ</code>) はすべての CJK 文字セットに存在し、コードポイント値 (16 進コーディング) は <code class="literal">0x30da</code> です。この文字のラウンドトリップをテストするには、次のクエリーを使用します。
          </p><pre class="programlisting">
SELECT 'ペ' AS `ペ`;         /* or SELECT _ucs2 0x30da; */
</pre><p>
            結果も<code class="literal">「ペ」</code>ではない場合、ラウンドトリップは失敗しました。
          </p><p>
            そのような失敗に関するバグレポートの場合は、<code class="literal">SELECT HEX('ペ');</code> も試すように要請されることがあります。これにより、クライアントのエンコードが正しいかどうかを判断できます。
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>問題が MySQL 以外のブラウザまたはほかのアプリケーションの問題ではないことを確認します</em></span>。
          </p><p>
            このタスクを行うには、<span class="command"><strong>mysql</strong></span> クライアントプログラム (Windows の場合: <span class="command"><strong>mysql.exe</strong></span>) を使用します。<span class="command"><strong>mysql</strong></span> では正しく表示されるが、アプリケーションでは表示されない場合、問題はシステム設定が原因である可能性があります。
          </p><p>
            設定を確認するには、次のような出力が表示される <code class="literal">SHOW VARIABLES</code> ステートメントを使用します。
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'char%';</code></strong>
+--------------------------+----------------------------------------+
| Variable_name            | Value                                  |
+--------------------------+----------------------------------------+
| character_set_client     | utf8                                   |
| character_set_connection | utf8                                   |
| character_set_database   | latin1                                 |
| character_set_filesystem | binary                                 |
| character_set_results    | utf8                                   |
| character_set_server     | latin1                                 |
| character_set_system     | utf8                                   |
| character_sets_dir       | /usr/local/mysql/share/mysql/charsets/ |
+--------------------------+----------------------------------------+
8 rows in set (0.03 sec)
</pre><p>
            これらは、西洋諸国のサーバー (<code class="literal">latin1</code> は西ヨーロッパ文字セットであり、MySQL のデフォルトです) に接続される国際業務用のクライアントの典型的な文字セット設定です (<code class="literal">utf8</code> Unicode が使用されています)。
          </p><p>
            Latin よりも Unicode (通常、Unix での <code class="literal">utf8</code> バリアント、および Windows での <code class="literal">ucs2</code> バリアント) の方が望ましいですが、オペレーティングシステムのユーティリティーで最適にサポートされる文字セットではないことがあります。多くの Windows ユーザーは、Microsoft の文字セット (日本語 Windows 用の <code class="literal">cp932</code> など) が適当であると判断します。
          </p><p>
            サーバーの設定を制御できず、基盤となっているコンピュータがわからない場合は、自分の国の一般的な文字セットに変更することを試してください (<code class="literal">euckr</code> = 韓国、<code class="literal">gb18030</code>、<code class="literal">gb2312</code>、または <code class="literal">gbk</code> = 中華人民共和国、<code class="literal">big5</code> = 台湾、<code class="literal">sjis</code>、<code class="literal">ujis</code>、<code class="literal">cp932</code>、または <code class="literal">eucjpms</code> = 日本、<code class="literal">ucs2</code> または <code class="literal">utf8</code> = すべての国)。通常、クライアント、接続、および結果の設定のみを変更する必要があります。この 3 つを一度にすべて変更する簡単なステートメントが<code class="literal">SET NAMES</code> です。例:
          </p><pre class="programlisting">
SET NAMES 'big5';
</pre><p>
            設定が正しい場合は、<code class="filename">my.cnf</code> または <code class="filename">my.ini</code> を編集することによってそれを永続的なものにできます。たとえば、次のような行を追加できます。
          </p><pre class="programlisting">
[mysqld]
character-set-server=big5
[client]
default-character-set=big5
</pre><p>
            アプリケーションで使用されている API 構成の設定に問題があることもあります。詳細は、<em class="citetitle">「GUI フロントエンドまたはブラウザで CJK 文字が正しく表示されないのはなぜですか」</em>を参照してください。
          </p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994849776"></a><a name="idm139978994849648"></a><p><b>A.11.3.</b></p></td><td align="left" valign="top"><p>
        Big5 中国語文字セットを使用する場合は、どのような問題に注意するべきですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL は、香港および台湾 (中華民国) で一般的な Big5 文字セットをサポートしています。MySQL の <code class="literal">big5</code> は、実際には、本来の <code class="literal">big5</code> 文字セットと非常に似ている Microsoft コードページ 950 です。この文字セットは
        
         MySQL バージョン 4.1.16 / 5.0.16 以降で変更されています (Bug #12476 のため)。たとえば、次のステートメントは最新のバージョンの MySQL では動作しますが、古いバージョンでは動作しません。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE big5 (BIG5 CHAR(1) CHARACTER SET BIG5);</code></strong>
Query OK, 0 rows affected (0.13 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO big5 VALUES (0xf9dc);</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM big5;</code></strong>
+------+
| big5 |
+------+
| 嫺  |
+------+
1 row in set (0.02 sec)
</pre><p>
        <code class="literal">HKSCS</code> 拡張を追加する機能要求は申請されています。この拡張を必要とするユーザーの場合、Bug #13577 のための推奨パッチが役に立つことがあります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994840144"></a><a name="idm139978994840016"></a><p><b>A.11.4.</b></p></td><td align="left" valign="top"><p>
        日本語文字セットの変換が失敗するのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL は、<code class="literal">sjis</code>、<code class="literal">ujis</code>、<code class="literal">cp932</code>、および <code class="literal">eucjpms</code> 文字セットと Unicode をサポートしています。一般的なニーズは文字セット間で変換を行うことです。たとえば、Unix のサーバー (通常は <code class="literal">sjis</code> または <code class="literal">ujis</code> が使用されます) と Windows のクライアント (通常は <code class="literal">cp932</code> が使用されます) を使用している場合があります。
      </p><p>
        次の変換表で、<code class="literal">ucs2</code> カラムは変換前を表し、<code class="literal">sjis</code>、<code class="literal">cp932</code>、<code class="literal">ujis</code>、および <code class="literal">eucjpms</code> カラムは変換後を表しています。つまり、後ろの 4 つのカラムは、<code class="literal">CONVERT(ucs2)</code> を使用するか、値が含まれている <code class="literal">ucs2</code> カラムを <code class="literal">sjis</code>、<code class="literal">cp932</code>、<code class="literal">ujis</code>、または <code class="literal">eucjpms</code> カラムに割り当てたときの 16 進数の結果を示しています。
      </p><div class="informaltable"><table border="1"><colgroup><col><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th scope="col">文字名</th><th scope="col" align="left">ucs2</th><th scope="col" align="left">sjis</th><th scope="col" align="left">cp932</th><th scope="col" align="left">ujis</th><th scope="col" align="left">eucjpms</th></tr></thead><tbody><tr><td scope="row">BROKEN BAR (破断線)</td><td align="left">00A6</td><td align="left">3F</td><td align="left">3F</td><td align="left">8FA2C3</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH BROKEN BAR (全角破断線)</td><td align="left">FFE4</td><td align="left">3F</td><td align="left">FA55</td><td align="left">3F</td><td align="left">8FA2</td></tr><tr><td scope="row">YEN SIGN (円記号)</td><td align="left">00A5</td><td align="left">3F</td><td align="left">3F</td><td align="left">20</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH YEN SIGN (全角円記号)</td><td align="left">FFE5</td><td align="left">818F</td><td align="left">818F</td><td align="left">A1EF</td><td align="left">3F</td></tr><tr><td scope="row">TILDE (チルダ)</td><td align="left">007E</td><td align="left">7E</td><td align="left">7E</td><td align="left">7E</td><td align="left">7E</td></tr><tr><td scope="row">OVERLINE (オーバーライン)</td><td align="left">203E</td><td align="left">3F</td><td align="left">3F</td><td align="left">20</td><td align="left">3F</td></tr><tr><td scope="row">HORIZONTAL BAR (水平線)</td><td align="left">2015</td><td align="left">815C</td><td align="left">815C</td><td align="left">A1BD</td><td align="left">A1BD</td></tr><tr><td scope="row">EM DASH (エムダッシュ)</td><td align="left">2014</td><td align="left">3F</td><td align="left">3F</td><td align="left">3F</td><td align="left">3F</td></tr><tr><td scope="row">REVERSE SOLIDUS (リバースソリダス)</td><td align="left">005C</td><td align="left">815F</td><td align="left">5C</td><td align="left">5C</td><td align="left">5C</td></tr><tr><td scope="row">FULLWIDTH "" (全角リバースソリダス)</td><td align="left">FF3C</td><td align="left">3F</td><td align="left">815F</td><td align="left">3F</td><td align="left">A1C0</td></tr><tr><td scope="row">WAVE DASH (波ダッシュ)</td><td align="left">301C</td><td align="left">8160</td><td align="left">3F</td><td align="left">A1C1</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH TILDE (全角チルダ)</td><td align="left">FF5E</td><td align="left">3F</td><td align="left">8160</td><td align="left">3F</td><td align="left">A1C1</td></tr><tr><td scope="row">DOUBLE VERTICAL LINE (双柱)</td><td align="left">2016</td><td align="left">8161</td><td align="left">3F</td><td align="left">A1C2</td><td align="left">3F</td></tr><tr><td scope="row">PARALLEL TO (平行)</td><td align="left">2225</td><td align="left">3F</td><td align="left">8161</td><td align="left">3F</td><td align="left">A1C2</td></tr><tr><td scope="row">MINUS SIGN (マイナス記号)</td><td align="left">2212</td><td align="left">817C</td><td align="left">3F</td><td align="left">A1DD</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH HYPHEN-MINUS (全角ハイフンマイナス)</td><td align="left">FF0D</td><td align="left">3F</td><td align="left">817C</td><td align="left">3F</td><td align="left">A1DD</td></tr><tr><td scope="row">CENT SIGN (セント記号)</td><td align="left">00A2</td><td align="left">8191</td><td align="left">3F</td><td align="left">A1F1</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH CENT SIGN (全角セント記号)</td><td align="left">FFE0</td><td align="left">3F</td><td align="left">8191</td><td align="left">3F</td><td align="left">A1F1</td></tr><tr><td scope="row">POUND SIGN (ポンド記号)</td><td align="left">00A3</td><td align="left">8192</td><td align="left">3F</td><td align="left">A1F2</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH POUND SIGN (全角ポンド記号)</td><td align="left">FFE1</td><td align="left">3F</td><td align="left">8192</td><td align="left">3F</td><td align="left">A1F2</td></tr><tr><td scope="row">NOT SIGN (否定記号)</td><td align="left">00AC</td><td align="left">81CA</td><td align="left">3F</td><td align="left">A2CC</td><td align="left">3F</td></tr><tr><td scope="row">FULLWIDTH NOT SIGN (全角否定記号)</td><td align="left">FFE2</td><td align="left">3F</td><td align="left">81CA</td><td align="left">3F</td><td align="left">A2CC</td></tr></tbody></table></div><p>
        では、この表の次の部分について考えてみましょう。
      </p><div class="informaltable"><table border="1"><colgroup><col><col align="right"><col align="right"><col align="right"></colgroup><thead><tr><th scope="col"> </th><th scope="col" align="right">ucs2</th><th scope="col" align="right">sjis</th><th scope="col" align="right">cp932</th></tr></thead><tbody><tr><td scope="row">NOT SIGN (否定記号)</td><td align="right">00AC</td><td align="right">81CA</td><td align="right">3F</td></tr><tr><td scope="row">FULLWIDTH NOT SIGN (全角否定記号)</td><td align="right">FFE2</td><td align="right">3F</td><td align="right">81CA</td></tr></tbody></table></div><p>
        これは、MySQL が <code class="literal">NOT SIGN</code> (Unicode の <code class="literal">U+00AC</code>) を <code class="literal">sjis</code> のコードポイント <code class="literal">0x81CA</code> および <code class="literal">cp932</code> のコードポイント <code class="literal">3F</code> に変換することを意味します (<code class="literal">3F</code> は疑問符 (<span class="quote">「<span class="quote">?</span>」</span>) であり、変換を実行できないときに常に使用される文字です)。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994734512"></a><a name="idm139978994734384"></a><p><b>A.11.5.</b></p></td><td align="left" valign="top"><p>
        SJIS の <code class="literal">81CA</code> を <code class="literal">cp932</code> に変換する場合はどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        答えは<span class="quote">「<span class="quote">?</span>」</span>です。これについては深刻な苦情が寄せられています。多くのユーザーは、<code class="literal">sjis</code> の <code class="literal">81CA (NOT SIGN)</code> が <code class="literal">cp932</code> の <code class="literal">81CA (FULLWIDTH NOT SIGN)</code> になるような<span class="quote">「<span class="quote">緩い</span>」</span>変換を望んでいます。この動作に変更することが検討されています。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994727520"></a><a name="idm139978994727392"></a><p><b>A.11.6.</b></p></td><td align="left" valign="top"><p>
        MySQL では円 (<code class="literal">¥</code>) 記号をどのように表しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いくつかのバージョンの日本語文字セット (<code class="literal">sjis</code> および <code class="literal">euc</code> の両方) では <code class="literal">5C</code> が<em class="firstterm">リバースソリダス</em> (<code class="literal">\</code>。バックスラッシュとも呼ばれます) として扱われ、ほかの文字セットでは円記号 (<code class="literal">¥</code>) として扱われるため、問題が発生します。
      </p><p>
        MySQL は JIS (Japanese Industrial Standards) 標準に記述されている 1 つのバージョンのみに従っています。MySQL では <span class="emphasis"><em><code class="literal">5C</code> は常にリバースソリダス (<code class="literal">\</code>)</em></span> です。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994718464"></a><a name="idm139978994718336"></a><p><b>A.11.7.</b></p></td><td align="left" valign="top"><p>
        MySQL には、<code class="literal">5C</code> が円記号である別の文字セットを作成する計画はありますか。ほかの主要な DBMS の少なくとも 1 つにはそれがあります。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        これは円記号の問題に対する考えられる解決策の 1 つです。ただし、MySQL 5.1 または 6.0 ではこれは対応されません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994715616"></a><a name="idm139978994715488"></a><p><b>A.11.8.</b></p></td><td align="left" valign="top"><p>
        MySQL で韓国語文字セットを使用する場合に注意する問題はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        理論的には、複数のバージョンの <code class="literal">euckr</code> (<em class="firstterm">Extended Unix Code Korea</em>) 文字セットがありますが、認識されている問題は 1 つだけです。
      </p><p>
        コードポイント <code class="literal">0x5c</code> が<code class="literal">ウォン記号</code> (<code class="literal">₩</code>) である EUC-KR の<span class="quote">「<span class="quote">KS-Roman</span>」</span>バリアントではなく、コードポイント <code class="literal">0x5c</code> がリバースソリダス (つまり、<code class="literal">\</code>) である EUC-KR の<span class="quote">「<span class="quote">ASCII</span>」</span>バリアントが使用されています。これは、Unicode の <code class="literal">U+20A9</code> を <code class="literal">euckr</code> に変換できないことを意味します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt;     <strong class="userinput"><code>CONVERT('₩' USING euckr) AS euckr,</code></strong>
    -&gt;     <strong class="userinput"><code>HEX(CONVERT('₩' USING euckr)) AS hexeuckr;</code></strong>
+-------+----------+
| euckr | hexeuckr |
+-------+----------+
| ?     | 3F       |
+-------+----------+
1 row in set (0.00 sec)
</pre><p>
        MySQL のグラフィカルな韓国語チャートについては、<a class="ulink" href="http://www.collation-charts.org/mysql60/by-charset.html#euckr" target="_top">euckr</a> を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994700592"></a><a name="idm139978994700464"></a><p><b>A.11.9.</b></p></td><td align="left" valign="top"><p>
        なぜ<span class="errortext">「Incorrect string value」</span>というエラーメッセージが表示されるのですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        説明のために、1 つの Unicode (<code class="literal">ucs2</code>) カラムおよび 1 つの中国語 (<code class="literal">gb2312</code>) カラムを持つテーブルを作成します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE ch</code></strong>
    -&gt; <strong class="userinput"><code>(ucs2 CHAR(3) CHARACTER SET ucs2,</code></strong>
    -&gt; <strong class="userinput"><code>gb2312 CHAR(3) CHARACTER SET gb2312);</code></strong>
Query OK, 0 rows affected (0.05 sec)
</pre><p>
        両方のカラムに珍しい文字<code class="literal">「汌」</code>を挿入することを試みます。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>INSERT INTO ch VALUES ('A汌B','A汌B');</code></strong>
Query OK, 1 row affected, 1 warning (0.00 sec)
</pre><p>
        警告が報告されました。次のステートメントを使用してその内容を確認します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1366
Message: Incorrect string value: '\xE6\xB1\x8CB' for column 'gb2312' at row 1
1 row in set (0.00 sec)
</pre><p>
        <code class="literal">gb2312</code> カラムのみに関する警告でした。
      </p><pre class="programlisting">
mysql&gt; SELECT ucs2,HEX(ucs2),gb2312,HEX(gb2312) FROM ch;
+-------+--------------+--------+-------------+
| ucs2  | HEX(ucs2)    | gb2312 | HEX(gb2312) |
+-------+--------------+--------+-------------+
| A汌B | 00416C4C0042 | A?B    | 413F42      |
+-------+--------------+--------+-------------+
1 row in set (0.00 sec)
</pre><p>
        いくつかのことを説明する必要があります。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <span class="quote">「<span class="quote">エラー</span>」</span>ではなく<span class="quote">「<span class="quote">警告</span>」</span>であることが MySQL の特徴です。あきらめずにできることをして最善の結果を得ることが試みられます。
          </p></li><li class="listitem"><p>
            <code class="literal">「汌」</code>という文字は <code class="literal">gb2312</code> 文字セットにありません。この問題については前に説明しました。
          </p></li><li class="listitem"><p>
            古いバージョンの MySQL を使用している場合は、別のメッセージが表示される可能性があります。
          </p></li><li class="listitem"><p>
            <code class="literal">sql_mode=TRADITIONAL</code> を設定している場合は、警告ではなくエラーメッセージが表示されます。
          </p></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994677952"></a><a name="idm139978994677824"></a><p><b>A.11.10.</b></p></td><td align="left" valign="top"><p>
        Access、PHP、またはその他の API を使用したアプリケーションの GUI フロントエンドまたはブラウザで、CJK 文字が正しく表示されないのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <span class="command"><strong>mysql</strong></span> クライアント (Windows: <span class="command"><strong>mysql.exe</strong></span>) を使用してサーバーに直接接続し、同じクエリーをそこで試してください。<span class="command"><strong>mysql</strong></span> が正常に応答する場合、問題はアプリケーションインタフェースで初期化が必要であることである可能性があります。<span class="command"><strong>mysql</strong></span> で <code class="literal">SHOW VARIABLES LIKE 'char%';</code> ステートメント使用して、使用される文字セットを確認します。Access を使用している場合は、Connector/ODBC を使用して接続することがほとんどです。この場合は、<a class="ulink" href="http://dev.mysql.com/doc/connector-odbc/en/connector-odbc-configuration.html" target="_top">Configuring Connector/ODBC</a>を確認してください。たとえば、<code class="literal">big5</code> を使用している場合は、<code class="literal">SET NAMES 'big5'</code> と入力します。(この場合<code class="literal">「;」</code>は必要ありません)。ASP を使用している場合は、コードに <code class="literal">SET NAMES</code> を追加する必要があることがあります。過去に作成された例を次に示します。
      </p><pre class="programlisting">
&lt;%
Session.CodePage=0
Dim strConnection
Dim Conn
strConnection="driver={MySQL ODBC 3.51 Driver};server=<em class="replaceable"><code>server</code></em>;uid=<em class="replaceable"><code>username</code></em>;" \
               &amp; "pwd=<em class="replaceable"><code>password</code></em>;database=<em class="replaceable"><code>database</code></em>;stmt=SET NAMES 'big5';"
Set Conn = Server.CreateObject("ADODB.Connection")
Conn.Open strConnection
%&gt;
</pre><p>
        同様に、Connector/Net で <code class="literal">latin1</code> 以外の文字セットを使用している場合は、接続文字列に文字セットを指定する必要があります。詳細は、<a class="ulink" href="http://dev.mysql.com/doc/connector-net/en/connector-net-programming-connecting.html" target="_top">Connecting to MySQL Using Connector/Net</a>を参照してください。
      </p><p>
        PHP を使用している場合は、次のコードを試してください。
      </p><pre class="programlisting">
&lt;?php
  $link = mysql_connect($host, $usr, $pwd);

  mysql_select_db($db);

  if( mysql_error() ) { print "Database ERROR: " . mysql_error(); }
  mysql_query("SET NAMES 'utf8'", $link);
?&gt;
</pre><p>
        この場合、<code class="literal">SET NAMES</code> を使用して <code class="literal">character_set_client</code>、<code class="literal">character_set_connection</code>、および <code class="literal">character_set_results</code> を変更しています。
      </p><p>
        <code class="literal">mysql</code> ではなく、新しい <code class="literal">mysqli</code> 拡張を使用することをお勧めします。<code class="literal">mysqli</code> を使用する場合は、前の例を次のように書き直すことができます。
      </p><pre class="programlisting">
&lt;?php
  $link = new mysqli($host, $usr, $pwd, $db);

  if( mysqli_connect_errno() )
  {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
  }

  $link-&gt;query("SET NAMES 'utf8'");
?&gt;
</pre><p>
        PHP アプリケーションで頻繁に発生する別の問題は、ブラウザによって行われる想定に関連しています。<code class="literal">&lt;meta&gt;</code> タグを追加または変更するだけでこの問題が修正されることがあります。たとえば、ユーザーエージェントがページの内容を <code class="literal">UTF-8</code> として解釈するようにするには、HTML ページの <code class="literal">&lt;head&gt;</code> に <code class="literal">&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;</code> を含めてください。
      </p><p>
        Connector/J を使用している場合は、<a class="ulink" href="http://dev.mysql.com/doc/connector-j/en/connector-j-reference-charsets.html" target="_top">Using Character Sets and Unicode</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994647008"></a><a name="idm139978994646880"></a><p><b>A.11.11.</b></p></td><td align="left" valign="top"><p>
        MySQL 5.6 にアップグレードしました。文字セットに関して、MySQL 4.0 の動作に戻すにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL バージョン 4.0 では、サーバーおよびクライアントの両方のための単一の<span class="quote">「<span class="quote">グローバル</span>」</span>文字セットがあり、使用する文字の決定はサーバー管理者が行なっていました。これは MySQL バージョン 4.1 以降で変更されました。現在行われるのは、<a class="xref" href="globalization.html#charset-connection" title="10.1.4 接続文字セットおよび照合順序">セクション10.1.4「接続文字セットおよび照合順序」</a>に説明されているように、<span class="quote">「<span class="quote">ハンドシェイク</span>」</span>です。
        </p><div class="blockquote"><blockquote class="blockquote"><p>
            クライアントが接続するときに、使用する文字セットの名前をサーバーに送信します。サーバーはこの名前を使用して、<code class="literal">character_set_client</code>、<code class="literal">character_set_results</code>、および <code class="literal">character_set_connection</code> システム変数を設定します。実際には、サーバーは文字セット名を使用して <code class="literal">SET NAMES</code> 操作を実行します。
          </p></blockquote></div><p>
        このことの影響は、<code class="option">--character-set-server=utf8</code> を指定して <span class="command"><strong>mysqld</strong></span> を開始することによって、クライアントの文字セットを制御できないことです。ただし、アジア地域には MySQL 4.0 の動作が望ましいという顧客がいます。この動作を維持できるように、<code class="option">--skip-character-set-client-handshake</code> を使用してオフにできる <span class="command"><strong>mysqld</strong></span> スイッチ <code class="option">--character-set-client-handshake</code> が追加されました。<code class="option">--skip-character-set-client-handshake</code> を指定して <span class="command"><strong>mysqld</strong></span> を起動すると、クライアントが接続するときに、使用する文字セットの名前がサーバーに送信されますが、<span class="emphasis"><em>サーバーはクライアントからのこの要求を無視します</em></span>。
      </p><p>
        例として、望ましいサーバーの文字セットが <code class="literal">latin1</code> であるとします (CJK 地域ではあまりないことですが、これはデフォルト値です)。クライアントのオペレーティングシステムでサポートされている文字セットであるため、クライアントが <code class="literal">utf8</code> を使用しているとします。<code class="literal">latin1</code> をデフォルトの文字セットとしてサーバーを起動します。
      </p><pre class="programlisting">
mysqld --character-set-server=latin1
</pre><p>
        そのあと、クライアントをデフォルトの文字セット <code class="literal">utf8</code> で起動します。
      </p><pre class="programlisting">
mysql --default-character-set=utf8
</pre><p>
        現在の設定は、<code class="literal">SHOW VARIABLES</code> の出力を表示することによって確認できます。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'char%';</code></strong>
+--------------------------+----------------------------------------+
| Variable_name            | Value                                  |
+--------------------------+----------------------------------------+
| character_set_client     | utf8                                   |
| character_set_connection | utf8                                   |
| character_set_database   | latin1                                 |
| character_set_filesystem | binary                                 |
| character_set_results    | utf8                                   |
| character_set_server     | latin1                                 |
| character_set_system     | utf8                                   |
| character_sets_dir       | /usr/local/mysql/share/mysql/charsets/ |
+--------------------------+----------------------------------------+
8 rows in set (0.01 sec)
</pre><p>
        クライアントを停止し、<span class="command"><strong>mysqladmin</strong></span> を使用してサーバーを停止します。今度はハンドシェイクをスキップするように通知して、サーバーをふたたび起動します。
      </p><pre class="programlisting">
mysqld --character-set-server=utf8 --skip-character-set-client-handshake
</pre><p>
        クライアントをデフォルトの文字セットとして <code class="literal">utf8</code> をふたたび指定して起動し、現在の設定を表示します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'char%';</code></strong>
+--------------------------+----------------------------------------+
| Variable_name            | Value                                  |
+--------------------------+----------------------------------------+
| character_set_client     | latin1                                 |
| character_set_connection | latin1                                 |
| character_set_database   | latin1                                 |
| character_set_filesystem | binary                                 |
| character_set_results    | latin1                                 |
| character_set_server     | latin1                                 |
| character_set_system     | utf8                                   |
| character_sets_dir       | /usr/local/mysql/share/mysql/charsets/ |
+--------------------------+----------------------------------------+
8 rows in set (0.01 sec)
</pre><p>
        <code class="literal">SHOW VARIABLES</code> の異なる結果を比較することによって確認できるように、<code class="option">--skip-character-set-client-handshake</code> が使用された場合、サーバーはクライアントの初期設定を無視します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994611376"></a><a name="idm139978994611248"></a><p><b>A.11.12.</b></p></td><td align="left" valign="top"><p>
        CJK 文字での <code class="literal">LIKE</code> 検索および <code class="literal">FULLTEXT</code> 検索が失敗することがあるのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">BINARY</code> カラムおよび <code class="literal">BLOB</code> カラムに対する <code class="literal">LIKE</code> 検索には非常に単純な問題があります。文字の終わりを判別する必要があることです。マルチバイト文字セットでは、各文字のオクテット長が異なることがあります。たとえば、<code class="literal">utf8</code> の場合、次に示すように <code class="literal">A</code> は 1 バイトを必要としますが、<code class="literal">ペ</code> は 3 バイトを必要とします。
      </p><pre class="programlisting">
+-------------------------+---------------------------+
| OCTET_LENGTH(_utf8 'A') | OCTET_LENGTH(_utf8 'ペ') |
+-------------------------+---------------------------+
|                       1 |                         3 |
+-------------------------+---------------------------+
1 row in set (0.00 sec)
</pre><p>
        最初の文字の終わりを判別できなければ、2 番目の文字が始まる位置を判別できません。この場合、<code class="literal">LIKE '_A%'</code> などの非常に単純な検索が失敗します。解決策は、通常の CJK 文字セットを最初から使用するか、比較する前に CJK 文字を変換することです。
      </p><p>
        これは、存在しない文字のエンコードを MySQL が許可できない理由の 1 つです。不正な入力を厳密に拒否しなければ、文字の終わりを判別する方法がありません。
      </p><p>
        <code class="literal">FULLTEXT</code> 検索の場合は、単語の始まりと終わりを判別する必要があります。西洋の言語の場合、それらのほとんど (すべてでなければ) が簡単に識別できる単語の境界 (スペース文字) を使用しているため、これが問題となることはほとんどありません。ただし、通常、アジアの言語ではこれは異なります。独自の判断で不完全な方法を使用して、すべての漢字が単語を表すと想定したり、(日本語の場合) 文法的な終わりに従ったカタカナからひらがなへの変化に応じるようにしたりすることもできます。ただし、唯一の確実な解決策では、包括的な単語のリストが必要となります。これは、サポートされる各アジア言語のサーバーに辞書を含める必要があることを意味します。これは簡単に言って実現可能ではありません。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994594944"></a><a name="idm139978994594816"></a><p><b>A.11.13.</b></p></td><td align="left" valign="top"><p>
        文字 <em class="replaceable"><code>X</code></em> がすべての文字セットで使用可能であるかどうかを判別するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        簡体字中国語および半角ではない基本的な日本語のかな文字のほとんどは、すべての CJK 文字セットで表示されます。次のストアドプロシージャーは、<code class="literal">UCS-2</code> Unicode 文字を受け入れて、それをほかのすべての文字セットに変換し、結果を 16 進数で表示します。
      </p><pre class="programlisting">
DELIMITER //

CREATE PROCEDURE p_convert(ucs2_char CHAR(1) CHARACTER SET ucs2)
BEGIN

CREATE TABLE tj
             (ucs2 CHAR(1) character set ucs2,
              utf8 CHAR(1) character set utf8,
              big5 CHAR(1) character set big5,
              cp932 CHAR(1) character set cp932,
              eucjpms CHAR(1) character set eucjpms,
              euckr CHAR(1) character set euckr,
              gb2312 CHAR(1) character set gb2312,
              gbk CHAR(1) character set gbk,
              sjis CHAR(1) character set sjis,
              ujis CHAR(1) character set ujis);

INSERT INTO tj (ucs2) VALUES (ucs2_char);

UPDATE tj SET utf8=ucs2,
              big5=ucs2,
              cp932=ucs2,
              eucjpms=ucs2,
              euckr=ucs2,
              gb2312=ucs2,
              gbk=ucs2,
              sjis=ucs2,
              ujis=ucs2;

/* If there is a conversion problem, UPDATE will produce a warning. */

SELECT hex(ucs2) AS ucs2,
       hex(utf8) AS utf8,
       hex(big5) AS big5,
       hex(cp932) AS cp932,
       hex(eucjpms) AS eucjpms,
       hex(euckr) AS euckr,
       hex(gb2312) AS gb2312,
       hex(gbk) AS gbk,
       hex(sjis) AS sjis,
       hex(ujis) AS ujis
FROM tj;

DROP TABLE tj;

END//
</pre><p>
        入力は、単一の <code class="literal">ucs2</code> 文字、またはその文字のコードポイント値 (16 進表記) です。たとえば、<code class="literal">ucs2</code> のエンコードおよび名前についての Unicode のリスト (<a class="ulink" href="http://www.unicode.org/Public/UNIDATA/UnicodeData.txt" target="_top">http://www.unicode.org/Public/UNIDATA/UnicodeData.txt</a>) から、カタカナ文字 <span class="foreignphrase"><em class="foreignphrase">Pe</em></span> はすべての CJK 文字セットにあり、コードポイント値が <code class="literal">0x30da</code> であることがわかります。この値を <code class="literal">p_convert()</code> の引数として使用すると、次のような結果となります。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CALL p_convert(0x30da)//</code></strong>
+------+--------+------+-------+---------+-------+--------+------+------+------+
| ucs2 | utf8   | big5 | cp932 | eucjpms | euckr | gb2312 | gbk  | sjis | ujis |
+------+--------+------+-------+---------+-------+--------+------+------+------+
| 30DA | E3839A | C772 | 8379  | A5DA    | ABDA  | A5DA   | A5DA | 8379 | A5DA |
+------+--------+------+-------+---------+-------+--------+------+------+------+
1 row in set (0.04 sec)
</pre><p>
        カラム値が <code class="literal">3F</code> (つまり、疑問符文字 (<code class="literal">?</code>)) であるカラムがないため、すべての変換が正常に行われたことがわかります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994580496"></a><a name="idm139978994580368"></a><p><b>A.11.14.</b></p></td><td align="left" valign="top"><p>
        CJK 文字列が Unicode で間違ってソートされるのはなぜですか。(I)
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">utf8_unicode_ci</code> 検索や <code class="literal">ucs2_unicode_ci</code> 検索、または <code class="literal">ORDER BY</code> ソートの結果が、母国語のユーザーが予期する結果ではないことがあります。バグである可能性を除外するわけではありませんが、多くのユーザーは Unicode Collation Algorithm の標準表のウェイトを正しく読んでいないことが過去に判明しました。MySQL は <a class="ulink" href="http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt" target="_top">http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt</a> にある表を使用しています。これは、<code class="literal">unicode.org</code> のホームページからナビゲートすることによって見つかる最初の表ではありません。MySQL はより新しい 4.1.0 の <span class="quote">「<span class="quote">allkeys</span>」</span> 表ではなく、古い 4.0.0 の表を使用しているためです。(MySQL 5.6 の新しい <code class="literal">'520'</code> 照合順序では、5.2 の <span class="quote">「<span class="quote">allkeys</span>」</span> 表が使用されています。)これは、次に示した Bug #16526 で報告されたような状況が発生しないように、インデックスに影響する順序付けの変更に非常に慎重であるためです。
      </p><pre class="programlisting">
mysql&lt; <strong class="userinput"><code>CREATE TABLE tj (s1 CHAR(1) CHARACTER SET utf8 COLLATE utf8_unicode_ci);</code></strong>
Query OK, 0 rows affected (0.05 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO tj VALUES ('が'),('か');</code></strong>
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM tj WHERE s1 = 'か';</code></strong>
+------+
| s1   |
+------+
| が  |
| か  |
+------+
2 rows in set (0.00 sec)
</pre><p>
        最初の結果行の文字は、検索した文字ではありません。MySQL でその文字が取得されたのはなぜでしょうか。まず、Unicode のコードポイント値を確認します。これを行うには、<code class="literal">ucs2</code> バージョンの文字の 16 進数を表示します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT s1, HEX(CONVERT(s1 USING ucs2)) FROM tj;</code></strong>
+------+-----------------------------+
| s1   | HEX(CONVERT(s1 USING ucs2)) |
+------+-----------------------------+
| が  | 304C                        |
| か  | 304B                        |
+------+-----------------------------+
2 rows in set (0.03 sec)
</pre><p>
        <code class="literal">4.0.0 allkeys</code> 表で <code class="literal">304B</code> および <code class="literal">304C</code> を探すと、これらの行が見つかります。
      </p><pre class="programlisting">
304B  ; [.1E57.0020.000E.304B] # HIRAGANA LETTER KA
304C  ; [.1E57.0020.000E.304B][.0000.0140.0002.3099] # HIRAGANA LETTER GA; QQCM
</pre><p>
        正式な Unicode 名 (<span class="quote">「<span class="quote">#</span>」</span> マークの後ろにあります) は、日本語の五十音 (ひらがな)、非公式な区分 (文字、数字、または句読点)、西洋言語での識別子 (<code class="literal">KA</code> または <code class="literal">GA</code>。これは、たまたま同じ文字のペアの有声音および無声音となっています) を示しています。さらに重要なのは、<em class="firstterm">プライマリウェイト</em> (角括弧の中の最初の 16 進数) が両方の行で <code class="literal">1E57</code> となっていることです。検索とソートの両方の比較で、MySQL はプライマリウェイトのみに注意を払って、ほかのすべての数値を無視します。これは、<code class="literal">「が」</code>および<code class="literal">「か」</code>が Unicode の仕様に従って正しくソートされていることを意味します。これらを区別するには、UCA (Unicode Collation Algorithm) 以外の照合順序 (<code class="literal">utf8_bin</code> または <code class="literal">utf8_general_ci</code>) を使用するか、<code class="literal">HEX()</code> 値を比較するか、<code class="literal">ORDER BY CONVERT(s1 USING sjis)</code> を使用する必要があります。もちろん、<span class="quote">「<span class="quote">Unicode に従えば</span>」</span>正しいだけでは十分ではなく、バグを報告したユーザーも同様に正しいと言えます。<code class="literal">KA</code>/<code class="literal">GA</code> のような有声音/無声音文字のペアを順序付けのために区別できる、JIS X 4061 標準に従った別の日本語の照合順序を追加する計画があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994549808"></a><a name="idm139978994549680"></a><p><b>A.11.15.</b></p></td><td align="left" valign="top"><p>
        CJK 文字列が Unicode で間違ってソートされるのはなぜですか。(II)
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        Unicode (<code class="literal">ucs2</code> または <code class="literal">utf8</code>) を使用していて、Unicode のソート順がわかっているが (<a class="xref" href="faqs.html#faqs-cjk" title="A.11 MySQL 5.6 FAQ: MySQL の中国語、日本語、および韓国語の文字セット">セクションA.11「MySQL 5.6 FAQ: MySQL の中国語、日本語、および韓国語の文字セット」</a>を参照してください)、MySQL でテーブルが間違ってソートされているように見える場合は、まずテーブルの文字セットを確認してください。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t\G</code></strong>
******************** 1. row ******************
Table: t
Create Table: CREATE TABLE `t` (
`s1` char(1) CHARACTER SET ucs2 DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre><p>
        文字セットは正しいように見えるため、このカラムに関して <code class="literal">INFORMATION_SCHEMA.COLUMNS</code> テーブルで表示できる情報を確認します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT COLUMN_NAME, CHARACTER_SET_NAME, COLLATION_NAME</code></strong>
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.COLUMNS</code></strong>
    -&gt; <strong class="userinput"><code>WHERE COLUMN_NAME = 's1'</code></strong>
    -&gt; <strong class="userinput"><code>AND TABLE_NAME = 't';</code></strong>
+-------------+--------------------+-----------------+
| COLUMN_NAME | CHARACTER_SET_NAME | COLLATION_NAME  |
+-------------+--------------------+-----------------+
| s1          | ucs2               | ucs2_general_ci |
+-------------+--------------------+-----------------+
1 row in set (0.01 sec)
</pre><p>
        (詳細は、<a class="xref" href="information-schema.html#columns-table" title="21.4 INFORMATION_SCHEMA COLUMNS テーブル">セクション21.4「INFORMATION_SCHEMA COLUMNS テーブル」</a>を参照してください。)
      </p><p>
        照合順序が <code class="literal">ucs2_unicode_ci</code> ではなく <code class="literal">ucs2_general_ci</code> であることがわかります。このようになる理由は、次のように <code class="literal">SHOW CHARSET</code> を使用して見つけることができます。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW CHARSET LIKE 'ucs2%';</code></strong>
+---------+---------------+-------------------+--------+
| Charset | Description   | Default collation | Maxlen |
+---------+---------------+-------------------+--------+
| ucs2    | UCS-2 Unicode | ucs2_general_ci   |      2 |
+---------+---------------+-------------------+--------+
1 row in set (0.00 sec)
</pre><p>
        <code class="literal">ucs2</code> および <code class="literal">utf8</code> の場合、デフォルトの照合順序は <span class="quote">「<span class="quote">general</span>」</span> です。Unicode の照合順序を指定するには、<code class="literal">COLLATE ucs2_unicode_ci</code> を使用します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994529552"></a><a name="idm139978994529424"></a><p><b>A.11.16.</b></p></td><td align="left" valign="top"><p>
        補助文字が MySQL で拒否されるのはなぜですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.5.3 より前では、MySQL は補助文字 (つまり、<code class="literal">UTF-8</code> で 3 バイトを超えるサイズを必要とする文字) をサポートしていません。Unicode で<span class="emphasis"><em>基本多言語面/第 0 面</em></span>と呼ばれているもののみがサポートされます。いくつかの非常に珍しい漢字のみが補助文字となっています。それらに対するサポートは一般的ではありません。このことが Bug #12600 などで報告され、<span class="quote">「<span class="quote">バグではありません</span>」</span>として拒否されました。<code class="literal">utf8</code> では、理解できないバイトが出現した場合に、入力文字列を切り捨てる必要があります。そうしないと、不正なマルチバイト文字の長さがわかりません。
      </p><p>
        考えられる 1 つの回避策は、<code class="literal">utf8</code> の代わりに <code class="literal">ucs2</code> を使用することです。この場合、<span class="quote">「<span class="quote">不正な</span>」</span>文字は疑問符に置き換えられますが、切り捨ては行われません。妥当性チェックが行われない <code class="literal">BLOB</code> または <code class="literal">BINARY</code> にデータ型を変更することもできます。
      </p><p>
        MySQL 5.5.3 の時点では、追加の Unicode 文字セット <code class="literal">utf16</code>、<code class="literal">utf32</code>、および 4 バイトの <code class="literal">utf8mb4</code> によって Unicode のサポートが拡張され、補助文字が含まれるようになりました。これらの文字セットでは、基本多言語面 (BMP) の外にある補助 Unicode 文字がサポートされます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994516672"></a><a name="idm139978994516544"></a><p><b>A.11.17.</b></p></td><td align="left" valign="top"><p>
        <span class="quote">「<span class="quote">CJKV</span>」</span>にするべきではありませんか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ。用語<span class="quote">「<span class="quote">CJKV</span>」</span>(<em class="firstterm">Chinese Japanese Korean Vietnamese</em>) は漢字 (もともとは中国語) が含まれているベトナム文字セットを指しています。MySQL では、漢字を使用した古いベトナム文字をサポートする計画はありません。MySQL では、西洋文字を使用する現代のベトナム文字はもちろんサポートされます。
      </p><p>
        MySQL 5.6 の時点では、<a class="xref" href="globalization.html#charset-unicode-sets" title="10.1.14.1 Unicode 文字セット">セクション10.1.14.1「Unicode 文字セット」</a>で説明しているように、Unicode 文字セットにベトナム語の照合順序があります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994511968"></a><a name="idm139978994511840"></a><p><b>A.11.18.</b></p></td><td align="left" valign="top"><p>
        MySQL では CJK 文字をデータベース名およびテーブル名に使用できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        この問題は、対応するディレクトリおよびファイルの名前を自動的に書き換えることによって、MySQL 5.1 で修正されました。
      </p><p>
        たとえば、オペレーティングシステムでディレクトリ名に CJK がサポートされないサーバーに<code class="literal">「楮」</code>という名前のデータベースを作成した場合、MySQL は <code class="literal">E6A5AE</code> (つまり、<code class="literal">「楮」</code>文字の Unicode の 16 進表現) を特殊な方法でエンコードした <code class="literal">@0w@00a5@00ae</code> という名前のディレクトリが作成されます。ただし、<code class="literal">SHOW DATABASES</code> ステートメントを実行すると、データベースが<code class="literal">「楮」</code>として示されます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994504320"></a><a name="idm139978994504192"></a><p><b>A.11.19.</b></p></td><td align="left" valign="top"><p>
        MySQL マニュアルの中国語版、日本語版、および韓国語版はどこにありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 5.1.12 の簡体字中国語版のマニュアルは、<a class="ulink" href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a>にあります。MySQL 4.1 マニュアルの日本語版は、<a class="ulink" href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a> からダウンロードできます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994501216"></a><a name="idm139978994501088"></a><p><b>A.11.20.</b></p></td><td align="left" valign="top"><p>
        MySQL での CJK および関連する問題についての支援はどこで受けることができますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        次のリソースを利用できます。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              MySQL ユーザーグループのリストは、<a class="ulink" href="https://wikis.oracle.com/display/mysql/List+of+MySQL+User+Groups" target="_top">https://wikis.oracle.com/display/mysql/List+of+MySQL+User+Groups</a> にあります。
            </p></li><li class="listitem"><p>
              文字セットの問題に関連する機能要求については、<a class="ulink" href="http://tinyurl.com/y6xcuf" target="_top">http://tinyurl.com/y6xcuf</a> を参照してください。
            </p></li><li class="listitem"><p>
              MySQL の <a class="ulink" href="http://forums.mysql.com/list.php?103" target="_top">Character Sets, Collation, Unicode Forum</a> にアクセスしてください。また、<a class="ulink" href="http://forums.mysql.com/" target="_top">http://forums.mysql.com/</a> に外国語フォーラムを追加する作業が行われています。
            </p></li></ul></div><p>
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-connectors-apis"></a>A.12 MySQL 5.6 FAQ: コネクタおよび API</h2></div></div></div><a class="indexterm" name="idm139978994491904"></a><p>
      MySQL Connector およびその他の API に関する一般的な質問、問題、および回答については、マニュアルの次の部分を参照してください。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="connectors-apis.html#c-api-problems" title="23.8.15 C API を使用する場合の一般的な質問と問題">セクション23.8.15「C API を使用する場合の一般的な質問と問題」</a>
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/apis-php/en/apis-php-problems.html" target="_top">Common Problems with MySQL and PHP</a>
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/connector-odbc/en/connector-odbc-usagenotes.html" target="_top">Connector/ODBC Notes and Tips</a>
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/connector-net/en/connector-net-programming.html" target="_top">Connector/Net Programming</a>
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/connector-j/en/index.html" target="_top">MySQL Connector/J Developer Guide</a>
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-replication"></a>A.13 MySQL 5.6 FAQ: レプリケーション</h2></div></div></div><a class="indexterm" name="idm139978994479872"></a><p>
      次のセクションでは、MySQL レプリケーションに関するよくある質問に回答しています。
    </p><div class="qandaset"><a name="idm139978994477136"></a><dl><dt>A.13.1. <a href="faqs.html#idm139978994477008">
        スレーブはマスターに常時接続されている必要がありますか。
      </a></dt><dt>A.13.2. <a href="faqs.html#idm139978994473712">
        レプリケーションを有効にするには、マスターとスレーブのネットワーク接続を有効にする必要がありますか。
      </a></dt><dt>A.13.3. <a href="faqs.html#idm139978994470576">
        マスターと比較してスレーブがどれくらい遅れているかを判別するにはどのようにすればよいですか。言い換えると、スレーブによってレプリケートされた最後のステートメントの日付はどのように判別できますか。
      </a></dt><dt>A.13.4. <a href="faqs.html#idm139978994458880">
        スレーブが追いつくまで、マスターで更新をブロックするにはどうすればよいですか。
      </a></dt><dt>A.13.5. <a href="faqs.html#idm139978994442592">
        二方向レプリケーションを設定する場合に注意する問題はありますか。
      </a></dt><dt>A.13.6. <a href="faqs.html#idm139978994438064">
        レプリケーションを使用してシステムのパフォーマンスを改善するにはどうすればよいですか。
      </a></dt><dt>A.13.7. <a href="faqs.html#idm139978994431312">
        パフォーマンスがより高いレプリケーションを使用するには、アプリケーションのクライアントコードを準備するときに何を行えばよいですか。
      </a></dt><dt>A.13.8. <a href="faqs.html#idm139978994428464">
        MySQL レプリケーションによってシステムのパフォーマンスが向上するのは、どのような場合でどの程度向上しますか。
      </a></dt><dt>A.13.9. <a href="faqs.html#idm139978994397136">
        冗長性または高可用性を持たせるには、レプリケーションをどのように使用すればよいですか。
      </a></dt><dt>A.13.10. <a href="faqs.html#idm139978994392496">
        マスターサーバーがステートメントベースのバイナリロギング形式または行ベースのバイナリロギング形式のどちらを使用しているかを判別するにはどうすればよいですか。
      </a></dt><dt>A.13.11. <a href="faqs.html#idm139978994383536">
        行ベースのレプリケーションを使用するようにスレーブに指示するにはどうすればよいですか。
      </a></dt><dt>A.13.12. <a href="faqs.html#idm139978994381648">
        GRANT ステートメントおよび REVOKE ステートメントがスレーブマシンにレプリケートされないようにするにはどうすればよいですか。
      </a></dt><dt>A.13.13. <a href="faqs.html#idm139978994376224">
        オペレーティングシステムが混在している場合、レプリケーションは動作しますか (たとえば、マスターは Linux で実行され、スレーブは OS X および Windows で実行されている場合)。
      </a></dt><dt>A.13.14. <a href="faqs.html#idm139978994374224">
        ハードウェアのアーキテクチャーが混在している場合、レプリケーションは動作しますか (たとえば、マスターは 64 ビットマシンで実行され、スレーブは 32 ビットマシンで実行されている場合)。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978994477008"></a><a name="idm139978994476880"></a><p><b>A.13.1.</b></p></td><td align="left" valign="top"><p>
        スレーブはマスターに常時接続されている必要がありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        いいえ、その必要はありません。スレーブは、シャットダウンされるか、数時間または数日間切断されても、再接続してマスターの更新に追いつくことができます。たとえば、リンクが散発的に短時間接続されるダイヤルアップリンクを使用して、マスターとスレーブの関係を設定できます。これは、特殊な対応が行われていないかぎり、特定の時点でスレーブがマスターと同期されていることは保証されないことを意味します。
      </p><p>
        切断されているスレーブが追いつくことができるようにするには、スレーブにまだレプリケートされていない情報が含まれているマスターからのバイナリログファイルを削除しないでください。非同期レプリケーションは、スレーブが最後にイベントを読み取った位置からバイナリログを継続して読み取ることができる場合にのみ動作できます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994473712"></a><a name="idm139978994473584"></a><p><b>A.13.2.</b></p></td><td align="left" valign="top"><p>
        レプリケーションを有効にするには、マスターとスレーブのネットワーク接続を有効にする必要がありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。マスターとスレーブのネットワーク接続を有効にする必要があります。ネットワーク接続を有効にしないと、スレーブはマスターに接続できず、バイナリログを転送できません。両方のサーバーの構成ファイルで <code class="option">skip-networking</code> オプションが有効にされていないことを確認します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994470576"></a><a name="idm139978994470448"></a><p><b>A.13.3.</b></p></td><td align="left" valign="top"><p>
        マスターと比較してスレーブがどれくらい遅れているかを判別するにはどのようにすればよいですか。言い換えると、スレーブによってレプリケートされた最後のステートメントの日付はどのように判別できますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">SHOW SLAVE STATUS</code> の出力の <code class="literal">Seconds_Behind_Master</code> カラムを確認してください。<a class="xref" href="replication.html#replication-administration-status" title="17.1.5.1 レプリケーションステータスの確認">セクション17.1.5.1「レプリケーションステータスの確認」</a>を参照してください。
      </p><p>
        スレーブの SQL スレッドでマスターから読み取ったイベントを実行するときに、このスレッドは実行時の時間をイベントのタイムスタンプに変更します。(これにより、<code class="literal">TIMESTAMP</code> が正常にレプリケートされます。)<code class="literal">SHOW PROCESSLIST</code> の出力で、スレーブの SQL スレッドの <code class="literal">Time</code> カラムに表示される秒数は、最後にレプリケートされたイベントのタイムスタンプとスレーブマシンの実際の時間の差異の秒数です。これを使用して、最後にレプリケートされたイベントの日付を判別できます。スレーブがマスターから切断されて 1 時間たってから再接続された直後の場合は、<code class="literal">SHOW PROCESSLIST</code> のスレーブ SQL スレッドに大きい <code class="literal">Time</code> 値 (3600 など) が表示されることがあります。これは、スレーブが 1 時間前のステートメントを実行しているためです。<a class="xref" href="replication.html#replication-implementation-details" title="17.2.1 レプリケーション実装の詳細">セクション17.2.1「レプリケーション実装の詳細」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994458880"></a><a name="idm139978994458752"></a><p><b>A.13.4.</b></p></td><td align="left" valign="top"><p>
        スレーブが追いつくまで、マスターで更新をブロックするにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        次の手順を使用します。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            マスターで次のステートメントを実行します。
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>FLUSH TABLES WITH READ LOCK;</code></strong>
mysql&gt; <strong class="userinput"><code>SHOW MASTER STATUS;</code></strong>
</pre><p>
            <code class="literal">SHOW</code> ステートメントの出力から、レプリケーション座標 (現在のバイナリログファイル名および位置) を記録します。
          </p></li><li class="listitem"><p>
            スレーブで次のステートメントを発行します。ここで、<code class="literal">MASTER_POS_WAIT()</code> 関数への引数は、前のステップで取得したレプリケーション座標値です。
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT MASTER_POS_WAIT('<em class="replaceable"><code>log_name</code></em>', <em class="replaceable"><code>log_pos</code></em>);</code></strong>
</pre><p>
            この <code class="literal">SELECT</code> ステートメントは、スレーブが指定されたログファイルおよび位置に達するまで更新をブロックします。その時点で、スレーブがマスターと同期され、ステートメントが戻ります。
          </p></li><li class="listitem"><p>
            マスターで次のステートメントを発行して、更新処理がマスターでふたたび開始されるようにします。
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>UNLOCK TABLES;</code></strong>
</pre></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994442592"></a><a name="idm139978994442464"></a><p><b>A.13.5.</b></p></td><td align="left" valign="top"><p>
        二方向レプリケーションを設定する場合に注意する問題はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        現在、MySQL レプリケーションでは、分散 (サーバー間) 更新の原子性を保証するためのマスターおよびスレーブ間のロックプロトコルはサポートされていません。言い換えると、クライアント A が co-master 1 を更新し、それを co-master 2 に伝播する前にクライアント B が co-master 2 を更新した場合、クライアント A の更新が co-master 1 への更新と異なる更新になる可能性があります。このため、クライアント A の更新が co-master 2 に行われたときに、co-master 2 からの更新がすべて伝播されたあとでも、co-master 1 とは異なるテーブルとなります。これは、どのような順序でも更新が安全に行われるという確証がある場合、またはクライアントコードで更新順序の間違いに対処できる場合を除いて、2 つのサーバーを二方向レプリケーション関係にするべきではないことを意味します。
      </p><p>
        二方向レプリケーションでは、実際には、更新に関してパフォーマンスはそれほど向上しません。各サーバーは、単一のサーバーで更新を行うときと同量の更新を行う必要があります。唯一の違いは、別のサーバーで発生した更新が 1 つのスレーブスレッドに直列化されるため、ロック競合がやや少ないことです。この利点さえも、ネットワーク遅延によって相殺されてしまうことがあります。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994438064"></a><a name="idm139978994437936"></a><p><b>A.13.6.</b></p></td><td align="left" valign="top"><p>
        レプリケーションを使用してシステムのパフォーマンスを改善するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        1 つのサーバーをマスターとして設定し、すべての書き込みをそれに指示します。そして、予算とラックスペースが許すかぎり多くのスレーブを構成し、マスターと複数のスレーブに読み取りを分散します。スレーブ側の速度を改善するには、<code class="option">--skip-innodb</code>、<code class="option">--low-priority-updates</code>、および <code class="option">--delay-key-write=ALL</code> オプションを指定してスレーブを起動することもできます。この場合、スレーブは <code class="literal">InnoDB</code> テーブルの代わりに非トランザクションの <code class="literal">MyISAM</code> テーブルを使用し、トランザクションのオーバーヘッドを排除して速度を上げます。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994431312"></a><a name="idm139978994431184"></a><p><b>A.13.7.</b></p></td><td align="left" valign="top"><p>
        パフォーマンスがより高いレプリケーションを使用するには、アプリケーションのクライアントコードを準備するときに何を行えばよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        スケールアウトソリューションとしてレプリケーションを使用するためのガイドについては、<a class="xref" href="replication.html#replication-solutions-scaleout" title="17.3.3 スケールアウトのためにレプリケーションを使用する">セクション17.3.3「スケールアウトのためにレプリケーションを使用する」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994428464"></a><a name="idm139978994428336"></a><p><b>A.13.8.</b></p></td><td align="left" valign="top"><p>
        MySQL レプリケーションによってシステムのパフォーマンスが向上するのは、どのような場合でどの程度向上しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL レプリケーションは、読み取りが頻繁に行われ、書き込みはそれほどないシステムにもっとも適しています。理論的には、単一のマスターおよび複数のスレーブのセットアップを使用する場合、ネットワーク帯域幅がなくなるか、マスターで更新のロードを処理できないポイントに到達するまでは、スレーブを追加することによってシステムを拡張できます。
      </p><p>
        処理能力の上積みが横ばいになる前のスレーブの数、およびサイトのパフォーマンスを改善できる度合いを判別するには、クエリーパターンを知り、典型的なマスターおよび典型的なスレーブでの読み取りおよび書き込みのスループットの関係をベンチマークすることによって経験的に判別する必要があります。ここでは、架空のシステムのレプリケーションの構成を単純に計算した例を示します。<code class="literal">reads</code> および <code class="literal">writes</code> は、1 秒当たりの読み取りおよび書き込みの数をそれぞれ示しています。
      </p><p>
        システムのロードは 10% の書き込みと 90% の読み取りで構成されていて、ベンチマークによって <code class="literal">reads</code> が 1200 - 2 * <code class="literal">writes</code> であることが判別されたとします。つまり、書き込みがない場合、システムは毎秒 1,200 回の読み取りを実行できます。書き込みの平均は読み取りの平均の 2 倍の時間がかかり、この関係はリニア (直線的) です。マスターと各スレーブの容量は同じであり、1 つのマスターと <em class="replaceable"><code>N</code></em> 個のスレーブがあるとします。この場合、各サーバー (マスターまたはスレーブ) は次のようになります。
      </p><p>
        <code class="literal">reads</code> = 1200 - 2 * <code class="literal">writes</code>
      </p><p>
        <code class="literal">reads</code> = 9 * <code class="literal">writes</code> / (<em class="replaceable"><code>N</code></em> + 1) (読み取りは分散されますが、書き込みはすべてのスレーブにレプリケートされます)
      </p><p>
        9 * <code class="literal">writes</code> / (<em class="replaceable"><code>N</code></em> + 1) + 2 * <code class="literal">writes</code> = 1200
      </p><p>
        <code class="literal">writes</code> = 1200 / (2 + 9/(<em class="replaceable"><code>N</code></em> + 1))
      </p><p>
        最後の等式は、実行可能な最大読み取り回数が毎秒 1200 回で、書き込み 1 回当たり 9 回の読み取りがある場合の <em class="replaceable"><code>N</code></em> 個のスレーブの書き込みの最大数を示しています。
      </p><p>
        この分析によって、次の結論が導かれます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>N</code></em> = 0 (レプリケーションがないことを意味します) の場合、システムは毎秒 1200/11 = 109 回の書き込みを処理できます。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>N</code></em> = 1 の場合、毎秒最大 184 回の書き込みを実行できます。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>N</code></em> = 8 の場合、毎秒最大 400 回の書き込みを実行できます。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>N</code></em> = 17 の場合、毎秒最大 480 回の書き込みを実行できます。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>N</code></em> が無限に近づくと (予算も負の無限大になり)、毎秒 600 回の書き込みに近くなり、システムスループットは 5.5 倍になります。ただし、8 サーバーのみでも 4 倍近くに増えます。
          </p></li></ul></div><p>
        これらの計算ではネットワーク帯域幅を無限と想定しており、システムにおいて重要である可能性があるさまざまなほかの要因が無視されています。多くの場合、<em class="replaceable"><code>N</code></em> 個のレプリケーションスレーブを追加した場合のシステムの状態を正確に予測する前述と同様の計算を行うことはできません。ただし、次の質問に答えると、レプリケーションによってシステムのパフォーマンスが改善されるかどうか、およびどれくらい改善されるかを判別するのに役立ちます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            システムの読み取りと書き込みの比率はどれくらいですか。
          </p></li><li class="listitem"><p>
            読み取りを減らした場合、単一のサーバーで書き込みのロードをどれくらい処理できますか。
          </p></li><li class="listitem"><p>
            ネットワークで帯域幅を使用できるスレーブはいくつですか。
          </p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994397136"></a><a name="idm139978994397008"></a><p><b>A.13.9.</b></p></td><td align="left" valign="top"><p>
        冗長性または高可用性を持たせるには、レプリケーションをどのように使用すればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        冗長性の実装方法は、アプリケーションおよび状況によってまったく異なります。高可用性ソリューション (自動フェイルオーバーを使用する) では、アクティブなモニタリング、および元の MySQL サーバーからスレーブへのフェイルオーバーのサポートを提供する、カスタムスクリプトまたはサードパーティーのツールが必要となります。
      </p><p>
        この処理を手動で行うには、新しいサーバーとやり取りするようにアプリケーションを変更するか、MySQL サーバーの DNS を障害が発生したサーバーから新しいサーバーに変更することによって、障害が発生したマスターから事前構成されているスレーブに切り替えることができる必要があります。
      </p><p>
        詳細およびソリューションの例については、<a class="xref" href="replication.html#replication-solutions-switch" title="17.3.6 フェイルオーバー中にマスターを切り替える">セクション17.3.6「フェイルオーバー中にマスターを切り替える」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994392496"></a><a name="idm139978994392368"></a><p><b>A.13.10.</b></p></td><td align="left" valign="top"><p>
        マスターサーバーがステートメントベースのバイナリロギング形式または行ベースのバイナリロギング形式のどちらを使用しているかを判別するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="literal">binlog_format</code> システム変数の値を確認します。
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'binlog_format';</code></strong>
</pre><p>
        表示される値は、<code class="literal">STATEMENT</code>、<code class="literal">ROW</code>、または <code class="literal">MIXED</code> のいずれかです。<code class="literal">MIXED</code> モードの場合、行ベースのロギングが望ましいのですが、特定の状況では、レプリケーションがステートメントベースのロギングに自動的に切り替わります。これが発生する場合については、<a class="xref" href="server-administration.html#binary-log-mixed" title="5.2.4.3 混合形式のバイナリロギング形式">セクション5.2.4.3「混合形式のバイナリロギング形式」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994383536"></a><a name="idm139978994383408"></a><p><b>A.13.11.</b></p></td><td align="left" valign="top"><p>
        行ベースのレプリケーションを使用するようにスレーブに指示するにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        スレーブは使用する形式を自動的に識別します。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994381648"></a><a name="idm139978994381520"></a><p><b>A.13.12.</b></p></td><td align="left" valign="top"><p>
        <code class="literal">GRANT</code> ステートメントおよび <code class="literal">REVOKE</code> ステートメントがスレーブマシンにレプリケートされないようにするにはどうすればよいですか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        <code class="option">--replicate-wild-ignore-table=mysql.%</code> オプションを指定してサーバーを起動し、<code class="literal">mysql</code> データベースのテーブルのレプリケーションが無視されるようにします。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994376224"></a><a name="idm139978994376096"></a><p><b>A.13.13.</b></p></td><td align="left" valign="top"><p>
        オペレーティングシステムが混在している場合、レプリケーションは動作しますか (たとえば、マスターは Linux で実行され、スレーブは OS X および Windows で実行されている場合)。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994374224"></a><a name="idm139978994374096"></a><p><b>A.13.14.</b></p></td><td align="left" valign="top"><p>
        ハードウェアのアーキテクチャーが混在している場合、レプリケーションは動作しますか (たとえば、マスターは 64 ビットマシンで実行され、スレーブは 32 ビットマシンで実行されている場合)。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        はい。
      </p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faqs-thread-pool"></a>A.14 MySQL 5.6 FAQ: MySQL エンタープライズスケーラビリティースレッドプール</h2></div></div></div><div class="qandaset"><a name="idm139978994370672"></a><dl><dt>A.14.1. <a href="faqs.html#idm139978994370544">
        スレッドプールとは何ですか。これはどのような問題を解決しますか。
      </a></dt><dt>A.14.2. <a href="faqs.html#idm139978994364960">
        スレッドプールは、最適なパフォーマンスおよびスループットのために、並列セッションおよびトランザクションをどのように制限および管理しますか。
      </a></dt><dt>A.14.3. <a href="faqs.html#idm139978994360224">
        スレッドプールは、クライアント側の接続プールとどのように異なりますか。
      </a></dt><dt>A.14.4. <a href="faqs.html#idm139978994355424">
        スレッドプールはどのような場合に使用しますか。
      </a></dt><dt>A.14.5. <a href="faqs.html#idm139978994347664">
        推奨されるスレッドプールの構成はありますか。
      </a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="idm139978994370544"></a><a name="idm139978994370416"></a><p><b>A.14.1.</b></p></td><td align="left" valign="top"><p>
        スレッドプールとは何ですか。これはどのような問題を解決しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL スレッドプールは、MySQL サーバーのデフォルトの接続処理機能を拡張する MySQL サーバーのプラグインであり、ステートメント/クエリーおよびトランザクションの並列実行数を制限して、タスクを完了するための CPU およびメモリーのリソースがそれぞれに十分に確保されるようにします。MySQL 5.5 および 5.6 の商用配布には、スレッドプールプラグインが含まれています。
      </p><p>
        MySQL サーバーのデフォルトのスレッド処理モデルでは、クライアント接続ごとに 1 つのスレッドを使用してステートメントが実行されます。より多くのクライアントがサーバーに接続してステートメントを実行すると、全体的なパフォーマンスが低下します。スレッドプールプラグインは、オーバーヘッドを軽減してパフォーマンスを向上させるように設計された代替のスレッド処理モデルを提供します。スレッドプールプラグインは、特に現在のマルチ CPU/コアシステムでの多数のクライアント接続において、ステートメント実行スレッドを効率的に管理することによって、サーバーのパフォーマンスを向上させます。
      </p><p>
        詳細は、<a class="xref" href="optimization.html#thread-pool-plugin" title="8.11.6 スレッドプールプラグイン">セクション8.11.6「スレッドプールプラグイン」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994364960"></a><a name="idm139978994364832"></a><p><b>A.14.2.</b></p></td><td align="left" valign="top"><p>
        スレッドプールは、最適なパフォーマンスおよびスループットのために、並列セッションおよびトランザクションをどのように制限および管理しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        スレッドプールは、<span class="quote">「<span class="quote">分割統治</span>」</span>手法を使用して並列性を制限および調整します。MySQL サーバーのデフォルトの接続処理と異なり、スレッドプールでは接続とスレッドが分離され、接続およびそれらの接続から受け取ったステートメントを実行するスレッドが固定された関係を持たないようになっています。スレッドプールは、構成可能なスレッドグループ内でクライアント接続を管理します。スレッドグループでは、実行される処理の性質に基づいて優先順位が付けられ、キューに入れられます。
      </p><p>
        詳細は、<a class="xref" href="optimization.html#thread-pool-operation" title="8.11.6.2 スレッドプール操作">セクション8.11.6.2「スレッドプール操作」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994360224"></a><a name="idm139978994360096"></a><p><b>A.14.3.</b></p></td><td align="left" valign="top"><p>
        スレッドプールは、クライアント側の接続プールとどのように異なりますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        MySQL 接続プールはクライアント側で動作し、MySQL サーバーに対して MySQL クライアントで接続および切断が繰り返されないようにします。MySQL クライアントのアイドル状態の接続をキャッシュし、必要に応じてほかのユーザーが使用できるように設計されています。これにより、クエリーが MySQL サーバーに発行されたときに、接続の確立および切断のオーバーヘッドおよびコストが最小化されます。MySQL 接続プールは、クエリー処理機能、またはバックエンドの MySQL サーバーの負荷を認識できません。それとは対照的に、スレッドプールは MySQL サーバー側で動作し、インバウンドの並列接続の実行、およびバックエンドの MySQL データベースにアクセスするクライアント接続から受け取ったクエリーの実行を管理するように設計されています。機能が分離されているため、MySQL 接続プールとスレッドプールは次元の異なるものであり、相互に独立して使用できます。
      </p><p>
        MySQL Connector を使用した MySQL の接続プールについては、<a class="xref" href="connectors-apis.html" title="第 23 章 Connector および API">第23章「<i>Connector および API</i>」</a>で説明しています。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994355424"></a><a name="idm139978994355296"></a><p><b>A.14.4.</b></p></td><td align="left" valign="top"><p>
        スレッドプールはどのような場合に使用しますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        スレッドプールを最適に使用するには、考慮するべきいくつかの経験則があります。
      </p><p>
        MySQL の <code class="literal">Threads_running</code> 変数は、MySQL サーバーで現在実行されている並列ステートメントの数を追跡します。この変数がサーバーが最適に動作しない範囲に常時ある場合 (通常、InnoDB のワークロードの場合、40 を超えている場合)、特にきわめて並列負荷が高い状況では、スレッドプールを使用することは効果があります。
      </p><p>
        <code class="literal">innodb_thread_concurrency</code> を使用して同時に実行されるステートメントの数を制限している場合、スレッドプールを使用すると、トランザクションの内容、ユーザー定義の指定などに基づいて、接続をスレッドグループに割り当てて実行をキューに入れることによって、同じ問題が少しだけ良好に解決されます。
      </p><p>
        最後に、ワークロードが主に短いクエリーで構成されている場合、スレッドプールを使用することは効果があります。
      </p><p>
        詳細は、<a class="xref" href="optimization.html#thread-pool-tuning" title="8.11.6.3 スレッドプールのチューニング">セクション8.11.6.3「スレッドプールのチューニング」</a>を参照してください。
      </p></td></tr><tr class="question"><td align="left" valign="top"><a name="idm139978994347664"></a><a name="idm139978994347536"></a><p><b>A.14.5.</b></p></td><td align="left" valign="top"><p>
        推奨されるスレッドプールの構成はありますか。
      </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
        スレッドプールには、パフォーマンスに影響する、ユーザー事例から追加された多数の構成パラメータがあります。これらの詳細、およびチューニングのヒントについては、<a class="xref" href="optimization.html#thread-pool-tuning" title="8.11.6.3 スレッドプールのチューニング">セクション8.11.6.3「スレッドプールのチューニング」</a>を参照してください。
      </p></td></tr></tbody></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="workbench.html">前</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="error-handling.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第 26 章 MySQL Workbench </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 付録 B エラー、エラーコード、および一般的な問題</td></tr></table></div><div class="copyright-footer"></div></body></html>
